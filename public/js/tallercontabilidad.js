!function(t){var e={};function i(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=59)}({59:function(t,e,i){t.exports=i(60)},60:function(t,e){var i;function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}$((function(){$('[data-toggle="tooltip"]').tooltip()}));var o=new Vue({data:{options:objeto,cuentas:cuentas},methods:{obtenerNombre:function(t){return this.cuentas.filter((function(e){return e.id==t}))[0].nombre},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},VueSweetAlert2:function(t,e){Swal.fire({html:'<div id="VueSweetAlert2"></div>',showConfirmButton:!1,showCloseButton:!0,customClass:"swal-wide",willOpen:function(){var i=new(Vue.extend(Vue.component(t)))({propsData:e});i.$mount(),document.getElementById("VueSweetAlert2").appendChild(i.$el)}})},horasExtras:function(t,e){var i=0,a=Number(e)/30/8;return t.forEach((function(t){i+=Number(t.dia)*a*1.5})),i},impuestoAgregado:function(t,e,i,a,o){return Number((a+(12*(t-9.45*t/100-e)-i)*o/100)/12).toFixed(2)},prestamoHipotecario:function(t,e,i){var a=Number(t)/Number(e),o=a*Number(i)/100;return Number((a+o)/12).toFixed(2)},prestamoQuirografario:function(t,e,i){var a=Number(t)/Number(e),o=a*Number(i)/100;return Number(a+o).toFixed(2)}}}),s=(new Vue({el:"#b_horizontal",data:{options:objeto,cuentas:cuentas,id_taller:taller,tipo:"horizontal",update:0,balance_inicial:{nombre:"",fecha:""},patrimonio:{nom_cuenta:"",cuenta_id:"",saldo:""},total_balance_inicial:{t_activo:"",t_pasivo:"",t_patrimonio_pasivo:""},b_initotal:{t_a_corriente:"",t_a_nocorriente:"",t_p_corriente:"",t_p_no_corriente:"",t_patrimonio:""},a_corrientes:[],a_nocorrientes:[],p_corrientes:[],p_nocorrientes:[],patrimonios:[],registro:{activo_corriente:"",activo_nocorriente:"",pasivo_corriente:"",pasivo_nocorriente:"",patrimonio:""},activo:{a_corriente:{nom_cuenta:"",cuenta_id:"",saldo:"",edit:!1},a_nocorriente:{nom_cuenta:"",cuenta_id:"",saldo:"",edit:!1}},bi:{const_id:""},pasivo:{p_corriente:{nom_cuenta:"",cuenta_id:"",saldo:"",edit:!1,total:""},p_nocorriente:{nom_cuenta:"",cuenta_id:"",saldo:"",edit:!1,total:""}}},mounted:function(){this.cambioActivo(),this.cambioActivoNo(),this.cambioPasivo(),this.cambioPasivoNo(),this.cambioPatrimonio(),this.TotalActivo(),this.TotalPasivo(),this.obtenerBalance()},methods:{decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},abrirActivoC:function(){this.limpiar(),$("#bih-transaccion").modal("show"),$("#nav-bih-activo-corriente-tab").tab("show")},abrirActivoNoC:function(){this.limpiar(),$("#bih-transaccion").modal("show"),$("#nav-bih-activo-no-corriente-tab").tab("show")},abrirPasivoC:function(){this.limpiar(),$("#bih-transaccion").modal("show"),$("#nav-bih-pasivo-corriente-tab").tab("show")},abrirPasivoNoC:function(){this.limpiar(),$("#bih-transaccion").modal("show"),$("#nav-bih-pasivo-no-corriente-tab").tab("show")},abrirPatrimonio:function(){this.limpiar(),$("#bih-transaccion").modal("show"),$("#nav-bih-patrimonio-tab").tab("show")},deleteAcCooriente:function(t){var e=this,i=this.a_corrientes[t].nom_cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.a_corrientes.splice(t,1),e.cambioActivo(),e.TotalActivo())}))},deletePaCooriente:function(t){var e=this,i=this.p_corrientes[t].nom_cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.p_corrientes.splice(t,1),e.cambioPasivo(),e.TotalPasivo())}))},deleteAcNoCooriente:function(t){var e=this,i=this.a_nocorrientes[t].nom_cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.a_nocorrientes.splice(t,1),e.cambioActivoNo(),e.TotalActivo())}))},deletePaNoCooriente:function(t){var e=this,i=this.p_nocorrientes[t].nom_cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.p_nocorrientes.splice(t,1),e.cambioPasivoNo(),e.TotalPasivo())}))},deletePatrimonio:function(t){var e=this,i=this.patrimonios[t].nom_cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.patrimonios.splice(t,1),e.cambioPatrimonio())}))},limpiar:function(){this.pasivo.p_corriente.cuenta_id="",this.pasivo.p_corriente.saldo="",this.pasivo.p_nocorriente.cuenta_id="",this.pasivo.p_nocorriente.saldo="",this.activo.a_corriente.cuenta_id="",this.activo.a_corriente.saldo="",this.activo.a_nocorriente.cuenta_id="",this.activo.a_nocorriente.saldo="",this.pasivo.p_corriente.edit=!1,this.pasivo.p_nocorriente.edit=!1,this.activo.a_corriente.edit=!1,this.activo.a_nocorriente.edit=!1,this.patrimonio.edit=!1,this.bi.const_id=""},agregarActivoCorriente:function(){if(""==this.activo.a_corriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.activo.a_corriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.activo.a_corriente.cuenta_id,nom_cuenta:e,saldo:this.activo.a_corriente.saldo};this.a_corrientes.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.activo.a_corriente.cuenta_id="",this.activo.a_corriente.saldo="",this.cambioActivo()}}},editAcorriente:function(t){this.limpiar(),this.activo.a_corriente.edit=!0,this.registro.a_corriente=t,this.bi.const_id=this.a_corrientes[t].cuenta_id,this.activo.a_corriente.cuenta_id=this.a_corrientes[t].cuenta_id,this.activo.a_corriente.saldo=this.a_corrientes[t].saldo,$("#bih-transaccion").modal("show"),$("#nav-bih-activo-corriente-tab").tab("show")},actualizarActivoC:function(){if(""==this.activo.a_corriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.activo.a_corriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.a_corriente;this.a_corrientes[i].cuenta_id=this.activo.a_corriente.cuenta_id,this.a_corrientes[i].nom_cuenta=e,this.a_corrientes[i].saldo=this.activo.a_corriente.saldo,this.activo.a_corriente.cuenta_id="",this.activo.a_corriente.saldo="",this.activo.a_corriente.edit=!1,this.registro.a_corriente="",this.cambioActivo()}}},cancelarEdicionActivoC:function(){this.activo.a_corriente.cuenta_id="",this.activo.a_corriente.saldo="",this.activo.a_corriente.edit=!1},agregarActivoNoCorriente:function(){if(""==this.activo.a_nocorriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.activo.a_nocorriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.activo.a_nocorriente.cuenta_id,nom_cuenta:e,saldo:this.activo.a_nocorriente.saldo};this.a_nocorrientes.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.activo.a_nocorriente.cuenta_id="",this.activo.a_nocorriente.saldo="",this.cambioActivoNo()}}},editNoAcorriente:function(t){this.limpiar(),this.activo.a_nocorriente.edit=!0,this.registro.a_nocorriente=t,this.bi.const_id=this.a_nocorrientes[t].cuenta_id,this.activo.a_nocorriente.cuenta_id=this.a_nocorrientes[t].cuenta_id,this.activo.a_nocorriente.saldo=this.a_nocorrientes[t].saldo,$("#bih-transaccion").modal("show"),$("#nav-bih-activo-no-corriente-tab").tab("show")},actualizarActivoNC:function(){if(""==this.activo.a_nocorriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.activo.a_nocorriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.a_nocorriente;this.a_nocorrientes[i].cuenta_id=this.activo.a_nocorriente.cuenta_id,this.a_nocorrientes[i].nom_cuenta=e,this.a_nocorrientes[i].saldo=this.activo.a_nocorriente.saldo,this.activo.a_nocorriente.cuenta_id="",this.activo.a_nocorriente.saldo="",this.activo.a_nocorriente.edit=!1,this.registro.a_nocorriente="",this.cambioActivoNo()}}},cancelarEdicionActivoNC:function(){this.activo.a_nocorriente.cuenta_id="",this.activo.a_nocorriente.saldo="",this.activo.a_nocorriente.edit=!1},agregarPasivoCorriente:function(){if(""==this.pasivo.p_corriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.pasivo.p_corriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.pasivo.p_corriente.cuenta_id,nom_cuenta:e,saldo:this.pasivo.p_corriente.saldo};this.p_corrientes.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.pasivo.p_corriente.cuenta_id="",this.pasivo.p_corriente.saldo="",this.cambioPasivo()}}},editPcorriente:function(t){this.limpiar(),this.pasivo.p_corriente.edit=!0,this.registro.p_corriente=t,this.bi.const_id=this.p_corrientes[t].cuenta_id,this.pasivo.p_corriente.cuenta_id=this.p_corrientes[t].cuenta_id,this.pasivo.p_corriente.saldo=this.p_corrientes[t].saldo,$("#bih-transaccion").modal("show"),$("#nav-bih-pasivo-corriente-tab").tab("show")},actualizarPasivoC:function(){if(""==this.pasivo.p_corriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.pasivo.p_corriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.p_corriente;this.p_corrientes[i].cuenta_id=this.pasivo.p_corriente.cuenta_id,this.p_corrientes[i].nom_cuenta=e,this.p_corrientes[i].saldo=this.pasivo.p_corriente.saldo,this.pasivo.p_corriente.cuenta_id="",this.pasivo.p_corriente.saldo="",this.pasivo.p_corriente.edit=!1,this.registro.p_corriente="",this.cambioPasivoNo()}}},cancelarEdicionPcorriente:function(){this.pasivo.p_corriente.cuenta_id="",this.pasivo.p_corriente.saldo="",this.pasivo.p_corriente.edit=!1},agregarPasivoNoCorriente:function(){if(""==this.pasivo.p_nocorriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.pasivo.p_nocorriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.pasivo.p_nocorriente.cuenta_id,nom_cuenta:e,saldo:this.pasivo.p_nocorriente.saldo};this.p_nocorrientes.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.pasivo.p_nocorriente.cuenta_id="",this.pasivo.p_nocorriente.saldo="",this.cambioPasivoNo()}}},editPNocorriente:function(t){this.limpiar(),this.pasivo.p_nocorriente.edit=!0,this.registro.p_nocorriente=t,this.bi.const_id=this.p_nocorrientes[t].cuenta_id,this.pasivo.p_nocorriente.cuenta_id=this.p_nocorrientes[t].cuenta_id,this.pasivo.p_nocorriente.saldo=this.p_nocorrientes[t].saldo,$("#bih-transaccion").modal("show"),$("#nav-bih-pasivo-no-corriente-tab").tab("show")},actualizarPasivoNC:function(){if(""==this.pasivo.p_nocorriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.pasivo.p_nocorriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.p_nocorriente;this.p_nocorrientes[i].cuenta_id=this.pasivo.p_nocorriente.cuenta_id,this.p_nocorrientes[i].nom_cuenta=e,this.p_nocorrientes[i].saldo=this.pasivo.p_nocorriente.saldo,this.pasivo.p_nocorriente.cuenta_id="",this.pasivo.p_nocorriente.saldo="",this.pasivo.p_nocorriente.edit=!1,this.registro.p_nocorriente="",this.cambioPasivoNo()}}},cancelarEdicionPNocorriente:function(){this.pasivo.p_nocorriente.cuenta_id="",this.pasivo.p_nocorriente.saldo="",this.pasivo.p_nocorriente.edit=!1},agregarPatrimonio:function(){if(""==this.patrimonio.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.patrimonio.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.patrimonio.cuenta_id,nom_cuenta:e,saldo:this.patrimonio.saldo};this.patrimonios.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.patrimonio.cuenta_id="",this.patrimonio.saldo="",this.cambioPatrimonio()}}},editPatrimonio:function(t){this.limpiar(),this.patrimonio.edit=!0,this.registro.patrimonio=t,this.bi.const_id=this.patrimonios[t].cuenta_id,this.patrimonio.cuenta_id=this.patrimonios[t].cuenta_id,this.patrimonio.saldo=this.patrimonios[t].saldo,$("#bih-transaccion").modal("show"),$("#nav-bih-patrimonio-tab").tab("show")},actualizarPatrimonio:function(){if(""==this.patrimonio.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.patrimonio.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.patrimonio;this.patrimonios[i].cuenta_id=this.patrimonio.cuenta_id,this.patrimonios[i].nom_cuenta=e,this.patrimonios[i].saldo=this.patrimonio.saldo,this.patrimonio.cuenta_id="",this.patrimonio.saldo="",this.patrimonio.edit=!1,this.registro.patrimonio="",this.cambioPatrimonio()}}},cancelarEdicionPatrimonio:function(){this.patrimonio.cuenta_id="",this.patrimonio.saldo="",this.patrimonio.edit=!1},Agregar:function(){if(""===this.diario.nom_cuenta.trim())toastr.error("El campo Nombre de cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.diario.debe.trim()&&""===this.diario.haber.trim())toastr.warning("Rellena el cambio de Debe o Haber, no puedes dejar ambos vacios","Smarmoddle",{timeOut:"3000"});else if(""!=this.diario.debe.trim()&&""!=this.diario.haber.trim())toastr.warning("No pueden estar ambos campos llenos a mismo tiempo","Smarmoddle",{timeOut:"3000"});else{var t={fecha:this.diario.fecha,nom_cuenta:this.diario.nom_cuenta,gloza:this.diario.gloza,debe:this.diario.debe,haber:this.diario.haber};this.diarios.push(t),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.diario.fecha="",this.diario.nom_cuenta="",this.diario.gloza="",this.diario.debe="",this.diario.haber=""}},deleteDiario:function(t){this.diarios.splice(t,1)},guardarDiario:function(){axios.post("/sistema/admin/taller/diario",{id:this.id_taller,datos:this.diarios}).then((function(t){console.log(t.data)})).catch((function(t){}))},agregarBalance:function(){if(""===this.balance.cuenta.trim())toastr.error("El campo cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.balance.suma_debe.trim()&&""===this.balance.suma_haber.trim())toastr.warning("Rellena el cambio de Debe o Haber DE SUMAS, no puedes dejar ambos vacios","Smarmoddle",{timeOut:"3000"});else if(""===this.balance.saldo_debe.trim()&&""===this.balance.saldo_haber.trim())toastr.warning("Rellena el cambio de Debe o Haber de SALDOS, no puedes dejar ambos vacios","Smarmoddle",{timeOut:"3000"});else if(""!=this.balance.saldo_debe.trim()&&""!=this.balance.saldo_haber.trim())toastr.warning("No pueden estar ambos campos llenos a mismo tiempo","Smarmoddle",{timeOut:"3000"});else{var t={cuenta:this.balance.cuenta,suma_debe:this.balance.suma_debe,suma_haber:this.balance.suma_haber,saldo_debe:this.balance.saldo_debe,saldo_haber:this.balance.saldo_haber};this.balances.push(t),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.balance.cuenta="",this.balance.suma_debe="",this.balance.suma_haber="",this.balance.saldo_debe="",this.balance.saldo_haber=""}},verificarCuenta:function(t){if(Number(this.bi.const_id)===t)return!1;var e=this.a_corrientes.filter((function(e){return e.cuenta_id==t})),i=this.a_nocorrientes.filter((function(e){return e.cuenta_id==t})),a=this.p_corrientes.filter((function(e){return e.cuenta_id==t})),o=this.a_nocorrientes.filter((function(e){return e.cuenta_id==t})),s=this.patrimonios.filter((function(e){return e.cuenta_id==t}));return e.length>0||(i.length>0||(a.length>0||(o.length>0||s.length>0)))},cambioActivo:function(){this.b_initotal.t_a_corriente=0;var t=this.a_corrientes,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_a_corriente=e,this.TotalActivo()},cambioActivoNo:function(){this.b_initotal.t_a_nocorriente=0;var t=this.a_nocorrientes,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_a_nocorriente=e,this.TotalActivo()},cambioPasivo:function(){this.b_initotal.t_p_corriente=0;var t=this.p_corrientes,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_p_corriente=e,this.TotalPasivo()},cambioPasivoNo:function(){this.b_initotal.t_p_no_corriente=0;var t=this.p_nocorrientes,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_p_no_corriente=e,this.TotalPasivo()},cambioPatrimonio:function(){this.b_initotal.t_patrimonio=0;var t=this.patrimonios,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_patrimonio=e},TotalActivo:function(){var t=this.b_initotal.t_a_corriente+this.b_initotal.t_a_nocorriente;this.total_balance_inicial.t_activo=t},TotalPasivo:function(){var t=this.b_initotal.t_p_corriente+this.b_initotal.t_p_no_corriente;this.total_balance_inicial.t_pasivo=t},totalPasivoPatrimonio:function(){$("#pasivo_patrimonio").modal("hide"),toastr.success("Total Agregado Correctamente","Smarmoddle",{timeOut:"3000"})},guardarBalanceInicial:function(){if(""===this.balance_inicial.nombre.trim())toastr.error("Campo Nombre es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.balance_inicial.fecha.trim())toastr.error("Campo Fecha es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.total_balance_inicial.t_patrimonio_pasivo.trim())toastr.error("Debes calcular el Total del Pasivo + Patrimonio","Smarmoddle",{timeOut:"3000"});else{var t=this;axios.post("/sistema/admin/taller/balance_inicial",{id:t.id_taller,nombre:t.balance_inicial.nombre,fecha:t.balance_inicial.fecha,tipo:t.tipo,a_corriente:t.a_corrientes,a_nocorriente:t.a_nocorrientes,p_corriente:t.p_corrientes,p_nocorriente:t.p_nocorrientes,patrimonio:t.patrimonios,totales_iniciales:t.total_balance_inicial,totales_totales:t.b_initotal,t_patrimonio:t.total_balance_inicial.t_patrimonio_pasivo}).then((function(e){1==e.data.success?(toastr.success(e.data.message,"Smarmoddle",{timeOut:"3000"}),t.cambioActivo(),t.cambioActivoNo(),t.cambioPasivo(),t.cambioPasivoNo(),t.cambioPatrimonio(),console.log(e.data)):(toastr.success(e.data.message,"Smarmoddle",{timeOut:"3000"}),t.cambioActivo(),t.cambioActivoNo(),t.cambioPasivo(),t.cambioPasivoNo(),t.cambioPatrimonio())})).catch((function(t){toastr.error(t.response.data.message,"Smarmoddle",{timeOut:"3000"})}))}},obtenerBalance:function(){var t=this;axios.post("/sistema/admin/taller/obtenerbalance",{id:t.id_taller,tipo:t.tipo}).then((function(e){e.data.tipo!=t.tipo&&1!=e.data.datos||(toastr.success(e.data.message,"Smarmoddle",{timeOut:"3000"}),t.balance_inicial.nombre=e.data.nombre,t.balance_inicial.fecha=e.data.fecha,t.a_corrientes=e.data.a_corriente,t.a_nocorrientes=e.data.a_nocorriente,t.p_corrientes=e.data.p_corriente,t.p_nocorrientes=e.data.p_nocorriente,t.patrimonios=e.data.patrimonios,t.total_balance_inicial.t_patrimonio_pasivo=e.data.total_pasivo_patrimonio,t.cambioActivo(),t.cambioActivoNo(),t.cambioPasivo(),t.cambioPasivoNo(),t.cambioPatrimonio(),console.log(e.data))})).catch((function(t){}))}}}),new Vue({el:"#b_vertical",data:{id_taller:taller,tipo:"vertical",update:0,balance_inicial:{nombre:"",fecha:""},patrimonio:{nom_cuenta:"",saldo:""},bi:{const_id:""},options:objeto,cuentas:cuentas,total_balance_inicial:{t_activo:"",t_pasivo:"",t_patrimonio_pasivo:""},b_initotal:{t_a_corriente:"",t_a_nocorriente:"",t_p_corriente:"",t_p_no_corriente:"",t_patrimonio:""},a_corrientes:[],a_nocorrientes:[],p_corrientes:[],p_nocorrientes:[],patrimonios:[],registro:{activo_corriente:"",activo_nocorriente:"",pasivo_corriente:"",pasivo_nocorriente:"",patrimonio:""},activo:{a_corriente:{nom_cuenta:"",cuenta_id:"",saldo:"",edit:!1},a_nocorriente:{nom_cuenta:"",cuenta_id:"",saldo:"",edit:!1}},pasivo:{p_corriente:{nom_cuenta:"",cuenta_id:"",saldo:"",edit:!1,total:""},p_nocorriente:{nom_cuenta:"",cuenta_id:"",saldo:"",edit:!1,total:""}}},mounted:function(){this.cambioActivo(),this.cambioActivoNo(),this.cambioPasivo(),this.cambioPasivoNo(),this.cambioPatrimonio(),this.TotalActivo(),this.TotalPasivo(),this.obtenerBalance()},methods:{decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},abrirActivoC:function(){this.limpiar(),$("#biv-transaccion").modal("show"),$("#nav-biv-activo-corriente-tab").tab("show")},abrirActivoNoC:function(){this.limpiar(),$("#biv-transaccion").modal("show"),$("#nav-biv-activo-no-corriente-tab").tab("show")},abrirPasivoC:function(){this.limpiar(),$("#biv-transaccion").modal("show"),$("#nav-biv-pasivo-corriente-tab").tab("show")},abrirPasivoNoC:function(){this.limpiar(),$("#biv-transaccion").modal("show"),$("#nav-biv-pasivo-no-corriente-tab").tab("show")},abrirPatrimonio:function(){this.limpiar(),$("#biv-transaccion").modal("show"),$("#nav-biv-patrimonio-tab").tab("show")},deleteAcCooriente:function(t){var e=this,i=this.a_corrientes[t].nom_cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.a_corrientes.splice(t,1),e.cambioActivo(),e.TotalActivo())}))},deletePaCooriente:function(t){var e=this,i=this.p_corrientes[t].nom_cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.p_corrientes.splice(t,1),e.cambioPasivo(),e.TotalPasivo())}))},deleteAcNoCooriente:function(t){var e=this,i=this.a_nocorrientes[t].nom_cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.a_nocorrientes.splice(t,1),e.cambioActivoNo(),e.TotalActivo())}))},deletePaNoCooriente:function(t){var e=this,i=this.p_nocorrientes[t].nom_cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.p_nocorrientes.splice(t,1),e.cambioPasivoNo(),e.TotalPasivo())}))},deletePatrimonio:function(t){var e=this,i=this.patrimonios[t].nom_cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.patrimonios.splice(t,1),e.cambioPatrimonio())}))},limpiar:function(){this.pasivo.p_corriente.cuenta_id="",this.pasivo.p_corriente.saldo="",this.pasivo.p_nocorriente.cuenta_id="",this.pasivo.p_nocorriente.saldo="",this.activo.a_corriente.cuenta_id="",this.activo.a_corriente.saldo="",this.activo.a_nocorriente.cuenta_id="",this.activo.a_nocorriente.saldo="",this.pasivo.p_corriente.edit=!1,this.pasivo.p_nocorriente.edit=!1,this.activo.a_corriente.edit=!1,this.activo.a_nocorriente.edit=!1,this.bi.const_id=""},agregarActivoCorriente:function(){if(""==this.activo.a_corriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.activo.a_corriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.activo.a_corriente.cuenta_id,nom_cuenta:e,saldo:this.activo.a_corriente.saldo};this.a_corrientes.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.activo.a_corriente.cuenta_id="",this.activo.a_corriente.saldo="",this.cambioActivo()}}},editAcorriente:function(t){this.activo.a_corriente.edit=!0,this.registro.a_corriente=t,this.bi.const_id=this.a_corrientes[t].cuenta_id,this.activo.a_corriente.cuenta_id=this.a_corrientes[t].cuenta_id,this.activo.a_corriente.saldo=this.a_corrientes[t].saldo,$("#biv-transaccion").modal("show"),$("#nav-biv-activo-corriente-tab").tab("show")},actualizarActivoC:function(){if(""==this.activo.a_corriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.activo.a_corriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.a_corriente;this.a_corrientes[i].cuenta_id=this.activo.a_corriente.cuenta_id,this.a_corrientes[i].nom_cuenta=e,this.a_corrientes[i].saldo=this.activo.a_corriente.saldo,this.activo.a_corriente.cuenta_id="",this.activo.a_corriente.saldo="",this.activo.a_corriente.edit=!1,this.registro.a_corriente="",this.cambioActivo()}}},cancelarEdicionActivoC:function(){this.activo.a_corriente.cuenta_id="",this.activo.a_corriente.saldo="",this.activo.a_corriente.edit=!1},agregarActivoNoCorriente:function(){if(""==this.activo.a_nocorriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.activo.a_nocorriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.activo.a_nocorriente.cuenta_id,nom_cuenta:e,saldo:this.activo.a_nocorriente.saldo};this.a_nocorrientes.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.activo.a_nocorriente.cuenta_id="",this.activo.a_nocorriente.saldo="",this.cambioActivoNo()}}},editNoAcorriente:function(t){this.activo.a_nocorriente.edit=!0,this.registro.a_nocorriente=t,this.bi.const_id=this.a_nocorrientes[t].cuenta_id,this.activo.a_nocorriente.cuenta_id=this.a_nocorrientes[t].cuenta_id,this.activo.a_nocorriente.saldo=this.a_nocorrientes[t].saldo,$("#biv-transaccion").modal("show"),$("#nav-biv-activo-no-corriente-tab").tab("show")},actualizarActivoNC:function(){if(""==this.activo.a_nocorriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.activo.a_nocorriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.a_nocorriente;this.a_nocorrientes[i].cuenta_id=this.activo.a_nocorriente.cuenta_id,this.a_nocorrientes[i].nom_cuenta=e,this.a_nocorrientes[i].saldo=this.activo.a_nocorriente.saldo,this.activo.a_nocorriente.cuenta_id="",this.activo.a_nocorriente.saldo="",this.activo.a_nocorriente.edit=!1,this.registro.a_nocorriente="",this.cambioActivoNo()}}},cancelarEdicionActivoNC:function(){this.activo.a_nocorriente.cuenta_id="",this.activo.a_nocorriente.saldo="",this.activo.a_nocorriente.edit=!1},agregarPasivoCorriente:function(){if(""==this.pasivo.p_corriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.pasivo.p_corriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.pasivo.p_corriente.cuenta_id,nom_cuenta:e,saldo:this.pasivo.p_corriente.saldo};this.p_corrientes.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.pasivo.p_corriente.cuenta_id="",this.pasivo.p_corriente.saldo="",this.cambioPasivo()}}},editPcorriente:function(t){this.pasivo.p_corriente.edit=!0,this.registro.p_corriente=t,this.bi.const_id=this.p_corrientes[t].cuenta_id,this.pasivo.p_corriente.cuenta_id=this.p_corrientes[t].cuenta_id,this.pasivo.p_corriente.saldo=this.p_corrientes[t].saldo,$("#biv-transaccion").modal("show"),$("#nav-biv-pasivo-corriente-tab").tab("show")},actualizarPasivoC:function(){if(""==this.pasivo.p_corriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.pasivo.p_corriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.p_corriente;this.p_corrientes[i].cuenta_id=this.pasivo.p_corriente.cuenta_id,this.p_corrientes[i].nom_cuenta=e,this.p_corrientes[i].saldo=this.pasivo.p_corriente.saldo,this.pasivo.p_corriente.cuenta_id="",this.pasivo.p_corriente.saldo="",this.pasivo.p_corriente.edit=!1,this.registro.p_corriente="",this.cambioPasivoNo()}}},cancelarEdicionPcorriente:function(){this.pasivo.p_corriente.cuenta_id="",this.pasivo.p_corriente.saldo="",this.pasivo.p_corriente.edit=!1},agregarPasivoNoCorriente:function(){if(""==this.pasivo.p_nocorriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.pasivo.p_nocorriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.pasivo.p_nocorriente.cuenta_id,nom_cuenta:e,saldo:this.pasivo.p_nocorriente.saldo};this.p_nocorrientes.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.pasivo.p_nocorriente.cuenta_id="",this.pasivo.p_nocorriente.saldo="",this.cambioPasivoNo()}}},editPNocorriente:function(t){this.pasivo.p_nocorriente.edit=!0,this.registro.p_nocorriente=t,this.bi.const_id=this.p_nocorrientes[t].cuenta_id,this.pasivo.p_nocorriente.cuenta_id=this.p_nocorrientes[t].cuenta_id,this.pasivo.p_nocorriente.saldo=this.p_nocorrientes[t].saldo,$("#biv-transaccion").modal("show"),$("#nav-biv-pasivo-no-corriente-tab").tab("show")},actualizarPasivoNC:function(){if(""==this.pasivo.p_nocorriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.pasivo.p_nocorriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.p_nocorriente;this.p_nocorrientes[i].cuenta_id=this.pasivo.p_nocorriente.cuenta_id,this.p_nocorrientes[i].nom_cuenta=e,this.p_nocorrientes[i].saldo=this.pasivo.p_nocorriente.saldo,this.pasivo.p_nocorriente.cuenta_id="",this.pasivo.p_nocorriente.saldo="",this.pasivo.p_nocorriente.edit=!1,this.registro.p_nocorriente="",this.cambioPasivoNo()}}},cancelarEdicionPNocorriente:function(){this.pasivo.p_nocorriente.cuenta_id="",this.pasivo.p_nocorriente.saldo="",this.pasivo.p_nocorriente.edit=!1},agregarPatrimonio:function(){if(""==this.patrimonio.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.patrimonio.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.patrimonio.cuenta_id,nom_cuenta:e,saldo:this.patrimonio.saldo};this.patrimonios.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.patrimonio.cuenta_id="",this.patrimonio.saldo="",this.cambioPatrimonio()}}},editPatrimonio:function(t){this.patrimonio.edit=!0,this.registro.patrimonio=t,this.bi.const_id=this.patrimonios[t].cuenta_id,this.patrimonio.cuenta_id=this.patrimonios[t].cuenta_id,this.patrimonio.saldo=this.patrimonios[t].saldo,$("#biv-transaccion").modal("show"),$("#nav-biv-patrimonio-tab").tab("show")},actualizarPatrimonio:function(){if(""==this.patrimonio.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.patrimonio.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.patrimonio;this.patrimonios[i].cuenta_id=this.patrimonio.cuenta_id,this.patrimonios[i].nom_cuenta=e,this.patrimonios[i].saldo=this.patrimonio.saldo,this.patrimonio.cuenta_id="",this.patrimonio.saldo="",this.patrimonio.edit=!1,this.registro.patrimonio="",this.cambioPatrimonio()}}},cancelarEdicionPatrimonio:function(){this.patrimonio.cuenta_id="",this.patrimonio.saldo="",this.patrimonio.edit=!1},Agregar:function(){if(""===this.diario.nom_cuenta.trim())toastr.error("El campo Nombre de cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.diario.debe.trim()&&""===this.diario.haber.trim())toastr.warning("Rellena el cambio de Debe o Haber, no puedes dejar ambos vacios","Smarmoddle",{timeOut:"3000"});else if(""!=this.diario.debe.trim()&&""!=this.diario.haber.trim())toastr.warning("No pueden estar ambos campos llenos a mismo tiempo","Smarmoddle",{timeOut:"3000"});else{var t={fecha:this.diario.fecha,nom_cuenta:this.diario.nom_cuenta,gloza:this.diario.gloza,debe:this.diario.debe,haber:this.diario.haber};this.diarios.push(t),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.diario.fecha="",this.diario.nom_cuenta="",this.diario.gloza="",this.diario.debe="",this.diario.haber=""}},deleteDiario:function(t){this.diarios.splice(t,1)},guardarDiario:function(){axios.post("/sistema/admin/taller/diario",{id:this.id_taller,datos:this.diarios}).then((function(t){console.log(t.data)})).catch((function(t){}))},agregarBalance:function(){if(""===this.balance.cuenta.trim())toastr.error("El campo cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.balance.suma_debe.trim()&&""===this.balance.suma_haber.trim())toastr.warning("Rellena el cambio de Debe o Haber DE SUMAS, no puedes dejar ambos vacios","Smarmoddle",{timeOut:"3000"});else if(""===this.balance.saldo_debe.trim()&&""===this.balance.saldo_haber.trim())toastr.warning("Rellena el cambio de Debe o Haber de SALDOS, no puedes dejar ambos vacios","Smarmoddle",{timeOut:"3000"});else if(""!=this.balance.saldo_debe.trim()&&""!=this.balance.saldo_haber.trim())toastr.warning("No pueden estar ambos campos llenos a mismo tiempo","Smarmoddle",{timeOut:"3000"});else{var t={cuenta:this.balance.cuenta,suma_debe:this.balance.suma_debe,suma_haber:this.balance.suma_haber,saldo_debe:this.balance.saldo_debe,saldo_haber:this.balance.saldo_haber};this.balances.push(t),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.balance.cuenta="",this.balance.suma_debe="",this.balance.suma_haber="",this.balance.saldo_debe="",this.balance.saldo_haber=""}},verificarCuenta:function(t){if(Number(this.bi.const_id)===t)return!1;var e=this.a_corrientes.filter((function(e){return e.cuenta_id==t})),i=this.a_nocorrientes.filter((function(e){return e.cuenta_id==t})),a=this.p_corrientes.filter((function(e){return e.cuenta_id==t})),o=this.a_nocorrientes.filter((function(e){return e.cuenta_id==t})),s=this.patrimonios.filter((function(e){return e.cuenta_id==t}));return e.length>0||(i.length>0||(a.length>0||(o.length>0||s.length>0)))},cambioActivo:function(){this.b_initotal.t_a_corriente=0;var t=this.a_corrientes,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_a_corriente=e,this.TotalActivo()},cambioActivoNo:function(){this.b_initotal.t_a_nocorriente=0;var t=this.a_nocorrientes,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_a_nocorriente=e,this.TotalActivo()},cambioPasivo:function(){this.b_initotal.t_p_corriente=0;var t=this.p_corrientes,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_p_corriente=e,this.TotalPasivo()},cambioPasivoNo:function(){this.b_initotal.t_p_no_corriente=0;var t=this.p_nocorrientes,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_p_no_corriente=e,this.TotalPasivo()},cambioPatrimonio:function(){this.b_initotal.t_patrimonio=0;var t=this.patrimonios,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_patrimonio=e},TotalActivo:function(){var t=this.b_initotal.t_a_corriente+this.b_initotal.t_a_nocorriente;this.total_balance_inicial.t_activo=t},TotalPasivo:function(){var t=this.b_initotal.t_p_corriente+this.b_initotal.t_p_no_corriente;this.total_balance_inicial.t_pasivo=t},totalPasivoPatrimonio:function(){$("#pasivo_patrimonio").modal("hide"),toastr.success("Total Agregado Correctamente","Smarmoddle",{timeOut:"3000"})},guardarBalanceInicial:function(){if(""===this.balance_inicial.nombre.trim())toastr.error("Campo Nombre es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.balance_inicial.fecha.trim())toastr.error("Campo Fecha es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.total_balance_inicial.t_patrimonio_pasivo.trim())toastr.error("Debes calcular el Total del Pasivo + Patrimonio","Smarmoddle",{timeOut:"3000"});else{var t=this;axios.post("/sistema/admin/taller/balance_inicial",{id:t.id_taller,nombre:t.balance_inicial.nombre,fecha:t.balance_inicial.fecha,tipo:t.tipo,a_corriente:t.a_corrientes,a_nocorriente:t.a_nocorrientes,p_corriente:t.p_corrientes,p_nocorriente:t.p_nocorrientes,patrimonio:t.patrimonios,t_patrimonio:t.total_balance_inicial.t_patrimonio_pasivo}).then((function(e){1==e.data.success?(toastr.success(e.data.message,"Smarmoddle",{timeOut:"3000"}),t.cambioActivo(),t.cambioActivoNo(),t.cambioPasivo(),t.cambioPasivoNo(),t.cambioPatrimonio(),console.log(e.data)):(toastr.success(e.data.message,"Smarmoddle",{timeOut:"3000"}),t.cambioActivo(),t.cambioActivoNo(),t.cambioPasivo(),t.cambioPasivoNo(),t.cambioPatrimonio())})).catch((function(t){toastr.error(t.response.data.message,"Smarmoddle",{timeOut:"3000"})}))}},obtenerBalance:function(){var t=this;axios.post("/sistema/admin/taller/obtenerbalance",{id:t.id_taller,tipo:t.tipo}).then((function(e){e.data.tipo!=t.tipo&&1!=e.data.datos||(toastr.success(e.data.message,"Smarmoddle",{timeOut:"3000"}),t.balance_inicial.nombre=e.data.nombre,t.balance_inicial.fecha=e.data.fecha,t.a_corrientes=e.data.a_corriente,t.a_nocorrientes=e.data.a_nocorriente,t.p_corrientes=e.data.p_corriente,t.p_nocorrientes=e.data.p_nocorriente,t.patrimonios=e.data.patrimonios,t.total_balance_inicial.t_patrimonio_pasivo=e.data.total_pasivo_patrimonio,t.cambioActivo(),t.cambioActivoNo(),t.cambioPasivo(),t.cambioPasivoNo(),t.cambioPatrimonio(),console.log(e.data))})).catch((function(t){}))}}}),new Vue({el:"#diario",data:{id_taller:taller,datos_diario:"",producto_id:1,nombre:"",fechabalance:"",complete:!1,options:objeto,cuentas:cuentas,balanceInicial:{debe:[],haber:[],totaldebe:0,totalhaber:0},kardex:[],nombre_kardex:"",producto_kardex:"",transacciones:"",registros:[],eliminar:{index:""},ajustes:[],porcentajes:{porcentaje:0,index_cuenta:"",tipo:"",cantidad:0},registerindex:0,cuentaindex:0,diarios:{debe:[],haber:[],comentario:"",fecha:"",ajustado:!1,tipo:""},edit:{debe:[],haber:[],comentario:""},diario:{debe:{edit:!1,index:"",fecha:"",nom_cuenta:"",saldo:"0.00"},haber:{edit:!1,index:"",fecha:"",nom_cuenta:"",saldo:"0.00"},comentario:""},pasan:{debe:0,haber:0},total:{debe:0,haber:0},update:!1,dato:[]},mounted:function(){this.obtenerDiarioGeneral()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},decimales:function(t){return null!==t?Number(t).toFixed(2):void 0},abrirTransaccion:function(){this.update=!1,this.diarios.debe=[],this.diarios.haber=[],this.diarios.fecha=[],this.diarios.comentario=[],this.diarios.ajustado=!1,this.diario.haber.fecha="",this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1,this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1,this.limpiar(),$("#dg-transaccion").modal("show"),$("#comentario-diario-tab").tab("show")},limpiar:function(){this.update=!1,this.diarios.debe=[],this.diarios.haber=[],this.diarios.fecha=[],this.diarios.comentario=[],this.diarios.ajustado=!1,this.diario.haber.fecha="",this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1,this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1},valorPorcentual:function(t,e){return Number(e*t/100)},obtenerKardexFifo:function(){var t=this;axios.post("/sistema/admin/taller/kardex-obtener-fifo",{id:t.id_taller,producto_id:t.producto_id}).then((function(e){1==e.data.datos?(t.kardex=e.data.kardex_fifo,t.nombre_kardex=e.data.informacion.nombre,t.producto_kardex=e.data.informacion.producto):(t.kardex=[],t.nombre="",t.producto="")})).catch((function(t){}))},obtenerBalanceInicial:function(){var t=this;if(this.registros.filter((function(t){return"inicial"==t.tipo})).length>=1)toastr.warning("Ya tienes cargado los datos del balance inicial","Smarmoddle",{timeOut:"3000"});else{var e=this;axios.post("/sistema/admin/taller/b_inicial_diario",{id:e.id_taller}).then((function(i){if(1==i.data.datos){var a=i.data.inicial;a.debe[0].fecha=a.fecha,e.registros.unshift(a),console.log(i.data),t.totalDebe(),t.totalHaber(),t.totalesFinales()}else toastr.warning("Aun no has creado tu balance Inicial","Smarmoddle",{timeOut:"3000"})})).catch((function(t){}))}},agregarHaber:function(){if(""===this.diario.haber.nom_cuenta)toastr.error("No has registrado una cuenta","Smarmoddle",{timeOut:"3000"});else{var t=this.diario.haber.nom_cuenta,e=this.cuentas.filter((function(e){return e.id==t})),i=this.diario.haber.saldo;if(1==e[0].porcentual){var a=this.valorPorcentual(e[0].porcentaje,i),o={cuenta_id:e[0].id,fecha:this.diario.haber.fecha,nom_cuenta:e[0].nombre,saldo:a};this.diarios.haber.push(o)}else{var s={cuenta_id:e[0].id,fecha:this.diario.haber.fecha,nom_cuenta:e[0].nombre,saldo:this.diario.haber.saldo};this.diarios.haber.push(s)}toastr.success("Activo agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.diario.haber.fecha="",this.diario.haber.nom_cuenta="",this.diario.haber.saldo=""}},agregarDebe:function(){var t=this.diario.debe.nom_cuenta,e=this.cuentas.filter((function(e){return e.id==t})),i=this.diario.debe.saldo;if(""===this.diario.debe.nom_cuenta)toastr.error("La cuenta es obligatoria","Smarmoddle",{timeOut:"3000"});else{if(1==e[0].porcentual){var a=this.valorPorcentual(e[0].porcentaje,i),o={cuenta_id:e[0].id,fecha:this.diario.debe.fecha,nom_cuenta:e[0].nombre,saldo:a};this.diarios.debe.push(o)}else{var s={cuenta_id:e[0].id,fecha:this.diario.debe.fecha,nom_cuenta:e[0].nombre,saldo:this.diario.debe.saldo};this.diarios.debe.push(s)}toastr.success("Activo agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo=""}},agregarComentario:function(){this.diarios.comentario=this.diario.comentario,this.diario.comentario=""},deleteHaber:function(t){this.diarios.haber.splice(t,1),this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1,this.diario.haber.fecha="",this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1},deleteDebe:function(t){this.diarios.debe.splice(t,1),this.diario.haber.fecha="",this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1,this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1},guardarRegistro:function(){var t=0,e=0;if(this.diarios.debe.forEach((function(e,i){var a=e.saldo;t+=Number(a)})),this.diarios.haber.forEach((function(t,i){var a=t.saldo;e+=Number(a)})),0==this.diarios.debe)toastr.error("No tienes transaccion para guardar","Smarmoddle",{timeOut:"3000"});else if(""==this.diarios.comentario)toastr.error("Debes agregar un comentario","Smarmoddle",{timeOut:"3000"});else if(""==this.diarios.fecha)toastr.error("Debes agregar la fecha","Smarmoddle",{timeOut:"3000"});else if(e.toFixed(2)!=t.toFixed(2))toastr.error("El Total de Debe y Haber no coinciden","Smarmoddle",{timeOut:"3000"});else{if(this.diarios.debe[0].fecha=this.diarios.fecha,1==this.diarios.ajustado){var i={tipo:"ajustado",debe:this.diarios.debe,haber:this.diarios.haber,comentario:this.diarios.comentario,fecha:this.diarios.fecha};this.ajustes.push(i)}else{var a={tipo:"normal",debe:this.diarios.debe,haber:this.diarios.haber,comentario:this.diarios.comentario,fecha:this.diarios.fecha};this.registros.push(a)}toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.diarios.debe=[],this.diarios.haber=[],this.diarios.comentario="",this.diarios.ajustado=!1,this.totalDebe(),this.totalHaber(),this.totalesFinales(),this.limpiar(),$("#dg-transaccion").modal("hide")}},debeEditRegister:function(t){var e=JSON.parse(JSON.stringify(this.registros));this.update=!0,this.registerindex=t,this.diarios.debe=[],this.diarios.haber=[],this.diarios.debe=e[t].debe,this.diarios.haber=e[t].haber,this.diarios.comentario=e[t].comentario,this.diarios.fecha=e[t].fecha,"ajustado"==e[t].tipo?this.diarios.ajustado=!0:this.diarios.ajustado=!1,this.diarios.tipo=e[t].tipo,$("#dg-transaccion").modal("show")},debeEditAjustado:function(t){var e=JSON.parse(JSON.stringify(this.ajustes));this.update=!0,this.registerindex=t,this.diarios.debe=[],this.diarios.haber=[],this.diarios.debe=e[t].debe,this.diarios.haber=e[t].haber,this.diarios.comentario=e[t].comentario,this.diarios.fecha=e[t].fecha,"ajustado"==e[t].tipo?this.diarios.ajustado=!0:this.diarios.ajustado=!1,this.diarios.tipo=e[t].tipo,$("#dg-transaccion").modal("show")},deleteRegistro:function(t){var e=this;Swal.fire({title:"Seguro que deseas eliminar este registro??",text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro se elimino","success"),e.registros.splice(t,1),e.totalDebe(),e.totalHaber(),e.totalesFinales())}))},deleteAjuste:function(t){var e=this;Swal.fire({title:"Seguro que deseas eliminar este registro??",text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro se elimino","success"),e.ajustes.splice(t,1),e.totalDebe(),e.totalHaber(),e.totalesFinales())}))},updaterRegister:function(){var t=this.registerindex,e=0,i=0;if(this.diarios.debe.forEach((function(t,i){var a=t.saldo;e+=Number(a)})),this.diarios.haber.forEach((function(t,e){var a=t.saldo;i+=Number(a)})),0==this.diarios.debe)toastr.error("No tienes transaccion para guardar","Smarmoddle",{timeOut:"3000"});else if(""===this.diarios.comentario.trim())toastr.error("Debes agregar un comentario","Smarmoddle",{timeOut:"3000"});else if(""===this.diarios.fecha.trim())toastr.error("Debes agregar la fecha","Smarmoddle",{timeOut:"3000"});else if(i!=e)toastr.error("El Total de Debe y Haber no coinciden","Smarmoddle",{timeOut:"3000"});else{if("ajustado"==this.diarios.tipo&&1==this.diarios.ajustado)this.diarios.debe.forEach((function(t,e){t.fecha=""})),this.diarios.debe[0].fecha=this.diarios.fecha,this.ajustes[t].debe=this.diarios.debe,this.ajustes[t].haber=this.diarios.haber,this.ajustes[t].comentario=this.diarios.comentario,this.ajustes[t].fecha=this.diarios.fecha;else if("ajustado"==this.diarios.tipo&&!0!==this.diarios.ajustado){var a=JSON.parse(JSON.stringify(this.ajustes[t]));this.diarios.debe.forEach((function(t,e){t.fecha=""})),this.diarios.debe[0].fecha=this.diarios.fecha,a.debe=this.diarios.debe,a.haber=this.diarios.haber,a.comentario=this.diarios.comentario,a.fecha=this.diarios.fecha,a.tipo="normal",this.registros.push(a),this.ajustes.splice(t,1)}else if("normal"==this.diarios.tipo&&0==this.diarios.ajustado)this.diarios.debe.forEach((function(t,e){t.fecha=""})),this.diarios.debe[0].fecha=this.diarios.fecha,this.registros[t].debe=this.diarios.debe,this.registros[t].haber=this.diarios.haber,this.registros[t].comentario=this.diarios.comentario,this.registros[t].fecha=this.diarios.fecha;else if("normal"==this.diarios.tipo&&1==this.diarios.ajustado){var o=JSON.parse(JSON.stringify(this.registros[t]));this.diarios.debe.forEach((function(t,e){t.fecha="",console.log(t.fecha)})),console.log(o),this.diarios.debe[0].fecha=this.diarios.fecha,o.debe=this.diarios.debe,o.haber=this.diarios.haber,o.comentario=this.diarios.comentario,o.fecha=this.diarios.fecha,o.tipo="ajustado",this.ajustes.push(o),this.registros.splice(t,1)}this.diarios.debe=[],this.diarios.haber=[],this.diarios.comentario="",this.diarios.fecha="",this.diarios.tipo="",this.diarios.ajustado=!1,this.totalDebe(),this.totalHaber(),this.totalesFinales(),$("#dg-transaccion").modal("hide")}},updateHaber:function(){var t=this.diario.haber.nom_cuenta,e=this.diario.haber.index,i=this.cuentas.filter((function(e){return e.id==t}));console.log(i);var a=this.diario.haber.saldo;if(1==i[0].porcentual){var o=this.valorPorcentual(i[0].porcentaje,a);this.diarios.haber[e].nom_cuenta=i[0].nombre,this.diarios.haber[e].saldo=o}else this.diarios.haber[e].cuenta_id=t,this.diarios.haber[e].nom_cuenta=i[0].nombre,this.diarios.haber[e].saldo=a;this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1},habediarioEdit:function(t){this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1,this.diario.haber.index=t;var e=this.diarios.haber[t].cuenta_id,i=this.cuentas.filter((function(t){return t.id==e}));console.log(i),1==i[0].porcentual?(this.diario.haber.nom_cuenta=e,this.diario.haber.saldo=""):(this.diario.haber.nom_cuenta=e,this.diario.haber.saldo=this.diarios.haber[t].saldo),this.diario.haber.edit=!0,$("#haber-diario-tab").tab("show")},totalesFinales:function(){this.total.debe=0,this.total.haber=0;var t=this.ajustes,e=0,i=0;t.forEach((function(t,i){t.debe.forEach((function(t,i){e+=Number(t.saldo)}))})),this.total.debe=Number(this.pasan.debe+e).toFixed(2),t.forEach((function(t,e){t.haber.forEach((function(t,e){i+=Number(t.saldo)}))})),this.total.haber=Number(this.pasan.haber+i).toFixed(2)},debediairoEdit:function(t){this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1,this.diario.debe.index=t;var e=this.diarios.debe[t].cuenta_id;""!==this.diarios.debe[t].fecha?this.diario.debe.fecha=this.diarios.debe[t].fecha:this.diario.debe.fecha="",1==this.cuentas.filter((function(t){return t.id==e}))[0].porcentual?(this.diario.debe.nom_cuenta=e,this.diario.debe.saldo=""):(this.diario.debe.nom_cuenta=e,this.diario.debe.saldo=this.diarios.debe[t].saldo),this.diario.debe.edit=!0,$("#debe-diario-tab").tab("show")},cancelarEdicion:function(t){"debe"==t?(this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1):(this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1)},updateDebe:function(){var t=this.diario.debe.nom_cuenta,e=this.diario.debe.index,i=this.cuentas.filter((function(e){return e.id==t}));console.log(i);var a=this.diario.debe.saldo;if(""!==this.diario.debe.fecha&&(this.diarios.debe[e].fecha=this.diario.debe.fecha),1==i[0].porcentual){var o=this.valorPorcentual(i[0].porcentaje,a);this.diarios.debe[e].nom_cuenta=i[0].nombre,this.diarios.debe[e].saldo=o}else this.diarios.debe[e].nom_cuenta=i[0].nombre,this.diarios.debe[e].saldo=a;this.diarios.debe[e].cuenta_id=t,""!==this.diario.debe.fecha&&(this.diario.debe.fecha=""),this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1},debeDelete:function(t){this.edit.debe.splice(t,1)},totalDebeBi:function(){var t=this.balanceInicial,e=0;t.debe.forEach((function(t,i){e+=Number(t.saldo)})),this.balanceInicial.totaldebe=e},totalHaberBi:function(){var t=this.balanceInicial,e=0;t.haber.forEach((function(t,i){e+=Number(t.saldo)})),this.balanceInicial.totalhaber=e,this.totalesFinales()},totalDebe:function(){this.pasan.debe=0;var t=this.registros,e=0;t.forEach((function(t,i){t.debe.forEach((function(t,i){e+=Number(t.saldo)}))})),this.pasan.debe=this.balanceInicial.totaldebe+e},totalHaber:function(){this.pasan.haber=0;var t=this.registros,e=0;t.forEach((function(t,i){t.haber.forEach((function(t,i){e+=Number(t.saldo)}))})),this.pasan.haber=this.balanceInicial.totalhaber+e},guardarDiario:function(){var t=this.registros.concat(this.ajustes);if(0==t.length)toastr.error("No tienes registros para guardar","Smarmoddle",{timeOut:"3000"});else{console.log(t);var e=this;axios.post("/sistema/admin/taller/diario",{id:e.id_taller,registro:t,nombre:e.nombre,total_debe:e.total.debe,total_haber:e.total.haber}).then((function(t){0==t.data.success?toastr.error(t.data.message,"Smarmoddle",{timeOut:"3000"}):"act"==t.data.success?(toastr.success("Diario General Actualizado Correctamente","Smarmoddle",{timeOut:"3000"}),s.obtenerDiarioGeneral()):(toastr.success("Diairo General Creado Correctamente","Smarmoddle",{timeOut:"3000"}),e.dato=t.data,s.obtenerDiarioGeneral())})).catch((function(t){}))}},obtenerDiarioGeneral:function(){var t=this,e=this;axios.post("/sistema/admin/taller/diariogeneral",{id:e.id_taller}).then((function(i){if(1==i.data.datos){if(e.registros=i.data.registros,e.ajustes=i.data.ajustes,e.nombre=i.data.nombre,1==i.data.tieneinicial){var a=i.data.inicial;e.registros.unshift(a)}t.totalDebe(),t.totalHaber(),t.totalesFinales(),toastr.success("Diairo General cargado Correctamente","Smarmoddle",{timeOut:"3000"})}})).catch((function(t){}))}}}),new Vue({el:"#mayor_general",data:(i={id_taller:taller,nombre:"",nombre_dgral:"",fechabalance:"",complete:!1,options:objeto,cuentas:cuentas,dgeneral:[],nombre_kardex:"",producto_kardex:"",registros:[],eliminar:{index:""}},a(i,"eliminar",{nombre:"",index:""}),a(i,"ajustes",[]),a(i,"registerindex",0),a(i,"cuentaindex",0),a(i,"mayores",{registros:[],cierres:[],cuenta:"",total_debe:"",total_haber:"",total_saldo:""}),a(i,"mayor",{seleccion:"",registro:{edit:!1,cierre:!1,index:"",fecha:"",detalle:"",debe:"",haber:"",saldo:""},cuenta:"",tipo:""}),a(i,"update",!1),a(i,"registros_cierres",[]),a(i,"nombre_cierre",""),i),mounted:function(){this.obtenerDiarioGeneral(),this.obtenerMayorGeneral(),this.obtenerAsientoCierre()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},obtenerAsientoCierre:function(){var t=this;axios.post("/sistema/admin/taller/asiento-cierre-obtener",{id:t.id_taller}).then((function(e){1==e.data.datos&&(t.registros_cierres=e.data.registros,t.nombre_cierre=e.data.nombre)})).catch((function(t){}))},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},onSelect:function(){if(null==this.mayor.seleccion)return this.update=!1,this.mayores.registros=[],this.mayores.cierres=[],this.mayores.cuenta="",this.mayor.registro.cierre=!1,this.mayor.registro.detalle="",this.mayor.registro.fecha="",this.mayor.registro.debe="",this.mayor.registro.haber="",void(this.mayor.registro.saldo="");var t=this.mayor.seleccion.value,e=this.registros.filter((function(e){return e.cuenta_id==t}));console.log(t),e.length>0?(this.update=!0,this.mayores.registros=e[0].registros,this.mayores.cierres=e[0].cierres,this.mayor.cuenta=e[0].cuenta_id):(this.update=!1,this.mayores.registros=[],this.mayores.cierres=[],this.mayor.cuenta=t,this.mayor.registro.cierre=!1,this.mayor.registro.detalle="",this.mayor.registro.fecha="",this.mayor.registro.debe="",this.mayor.registro.haber="",this.mayor.registro.saldo="")},abrirTransaccion:function(){this.update=!1,this.mayores.registros=[],this.mayores.cierres=[],this.mayor.cuenta="",this.mayores.cuenta="",this.mayor.seleccion="",this.mayor.registro.cierre=!1,this.mayor.registro.detalle="",this.mayor.registro.fecha="",this.mayor.registro.debe="",this.mayor.registro.haber="",this.mayor.registro.saldo="",$("#mg-transaccion").modal("show")},numberFormat:function(t){return new Intl.NumberFormat("de-DE").format(t)},agregarCelda:function(){if(""==this.mayor.registro.fecha)toastr.error("El campo fecha es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""==this.mayor.registro.detalle)toastr.error("El campo detalle es obligatorio","Smarmoddle",{timeOut:"3000"});else{if(1==this.mayor.registro.cierre){var t={tipo:"",fecha:this.mayor.registro.fecha,detalle:this.mayor.registro.detalle,debe:this.mayor.registro.debe,haber:this.mayor.registro.haber,saldo:this.mayor.registro.saldo};this.mayores.cierres.push(t)}else{var e={tipo:"",fecha:this.mayor.registro.fecha,detalle:this.mayor.registro.detalle,debe:this.mayor.registro.debe,haber:this.mayor.registro.haber,saldo:this.mayor.registro.saldo};this.mayores.registros.push(e)}toastr.success("Movimiento agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.mayor.registro.fecha="",this.mayor.registro.detalle="",this.mayor.registro.debe="",this.mayor.registro.haber="",this.mayor.registro.saldo="",this.mayor.registro.cierre=!1}},deleteNormal:function(t){this.mayores.registros.splice(t,1)},deleteCierre:function(t){this.mayores.cierres.splice(t,1)},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},guardarRegistro:function(){if(0==this.mayores.registros.length)toastr.error("No tienes transaccion para guardar","Smarmoddle",{timeOut:"3000"});else if(""==this.mayor.cuenta)toastr.error("Debes seleccionar una cuenta","Smarmoddle",{timeOut:"3000"});else{var t=0,e=0;this.mayores.registros.forEach((function(e,i){var a=e.debe;t+=Number(a)})),this.mayores.registros.forEach((function(t,i){var a=t.haber;e+=Number(a)}));var i=this.mayor.cuenta,a=o.obtenerNombre(i);if(this.mayores.cierres.length>=1){var s={cuenta_id:i,cuenta:a,registros:this.mayores.registros,cierres:this.mayores.cierres,total_debe:t,total_haber:e,total_saldo:"-0-"};this.registros.push(s)}else{var r={cuenta_id:i,cuenta:a,registros:this.mayores.registros,cierres:this.mayores.cierres,total_debe:t,total_haber:e,total_saldo:""};this.registros.push(r)}toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.mayores.registros=[],this.mayores.cierres=[],this.mayor.cuenta="",this.mayor.seleccion="",this.mayor.registro.cierre=!1}},editarTransaccion:function(t){var e=JSON.parse(JSON.stringify(this.registros));this.update=!0,this.registerindex=t,this.mayores.registros=[],this.mayores.cierres=[],this.mayores.registros=e[t].registros,this.mayores.cierres=e[t].cierres,this.mayor.seleccion={text:e[t].cuenta,value:e[t].cuenta_id},this.onSelect(),$("#mg-transaccion").modal("show")},updaterRegister:function(){var t=this.mayor.cuenta,e=0,i=0,a=this.registros.filter((function(e){return e.cuenta_id==t}));console.log(a),a[0].registros.forEach((function(t,i){var a=t.debe;e+=Number(a)})),a[0].registros.forEach((function(t,e){var a=t.haber;i+=Number(a)})),a[0].total_debe=e,a[0].total_haber=i,this.mayores.cierres.length>=1?a[0].total_saldo="-0-":a[0].total_saldo="",this.mayores.registros=[],this.mayores.cierres=[],this.mayor.cuenta="",this.mayores.cuenta="",this.mayor.seleccion="",this.mayor.registro.cierre=!1,this.mayor.registro.detalle="",this.mayor.registro.fecha="",this.mayor.registro.debe="",this.mayor.registro.haber="",this.mayor.registro.saldo="",toastr.success("Registro Actualizado Correctamente ","Smarmoddle",{timeOut:"3000"})},obtenerDiarioGeneral:function(){var t=this;axios.post("/sistema/admin/taller/diariogeneral",{id:t.id_taller}).then((function(e){if(1==e.data.datos){t.dgeneral=e.data.registros,t.ajustes=e.data.ajustes,t.nombre_dgral=e.data.nombre;var i=e.data.inicial;t.dgeneral.unshift(i)}})).catch((function(t){}))},warningEliminar:function(t){var e=this;this.eliminar.index=t,this.eliminar.nombre=this.registros[t].cuenta,Swal.fire({title:"Seguro que deseas eliminar la cuenta "+this.eliminar.nombre,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+e.eliminar.nombre,"success"),e.registros.splice(t,1))}))},eliminarRegistro:function(){var t=this.eliminar.index;this.registros.splice(t,1),this.eliminar.index="",this.eliminar.nombre="",$("#eliminar-mg").modal("hide")},guardarMayor:function(){if(0==this.registros.length)toastr.error("No tienes registros para guardar","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/mayor",{id:this.id_taller,registro:this.registros,nombre:this.nombre}).then((function(t){0==t.data.success?toastr.error(t.data.message,"Smarmoddle",{timeOut:"3000"}):"act"==t.data.success?(toastr.success("Diario General Actualizado Correctamente","Smarmoddle",{timeOut:"3000"}),r.obtenerMayorGeneral(),n.obtenerMayorGeneral()):(toastr.success("Diairo General Creado Correctamente","Smarmoddle",{timeOut:"3000"}),r.obtenerMayorGeneral(),n.obtenerMayorGeneral())})).catch((function(t){}))}},obtenerMayorGeneral:function(){var t=this;axios.post("/sistema/admin/taller/mayorgeneral",{id:t.id_taller}).then((function(e){1==e.data.datos&&(t.registros=e.data.registros,t.nombre=e.data.nombre,console.log(e.data.registros),toastr.success("Mayor Gneral cargado Correctamente","Smarmoddle",{timeOut:"3000"}))})).catch((function(t){}))}}})),r=new Vue({el:"#balance_comp",data:{nombre:"",fecha:"",enunciados:"",id_taller:taller,nombre_mayor:"",options:objeto,cuentas:cuentas,balances:[],balance:{cuenta:"",suma_debe:"",suma_haber:"",saldo_debe:"",saldo_haber:"",edit:!1,const_id:""},mayorgeneral:[],suman:{sum_debe:0,sum_haber:0,sal_debe:0,sal_haber:0},update:!1,registro_id:0},mounted:function(){this.obtenerBalanceCom(),this.obtenerMayorGeneral()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},verificarCuenta:function(t){return Number(this.balance.const_id)!==t&&this.balances.filter((function(e){return e.cuenta_id==t})).length>0},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},obtenerMayorGeneral:function(){var t=this;axios.post("/sistema/admin/taller/mayorgeneral",{id:t.id_taller}).then((function(e){1==e.data.datos&&(t.mayorgeneral=e.data.registros,t.nombre_mayor=e.data.nombre)})).catch((function(t){}))},abrirTransaccion:function(){this.update=!1,this.balance.cuenta="",this.balance.edit=!1,this.balance.suma_debe="",this.balance.suma_haber="",this.balance.saldo_debe="",this.balance.saldo_haber="",$("#bc-transaccion").modal("show")},sumas:function(){var t=Number(this.balance.suma_debe),e=Number(this.balance.suma_haber);t>e?(this.balance.saldo_debe=Number(t-e).toFixed(2),this.balance.saldo_haber=""):(this.balance.saldo_haber=Number(e-t).toFixed(2),this.balance.saldo_debe="")},mover:function(){this.update=!1,this.balance.cuenta="",this.balance.suma_debe="",this.balance.suma_haber=""},log:function(t){window.console.log(t)},totales:function(){this.suman.sum_debe=0,this.suman.sum_haber=0,this.suman.sal_debe=0,this.suman.sal_haber=0;var t=this.balances,e=0,i=0,a=0,o=0;t.forEach((function(t,i){e+=Number(t.suma_debe)})),t.forEach((function(t,e){i+=Number(t.suma_haber)})),t.forEach((function(t,e){a+=Number(t.saldo_debe)})),t.forEach((function(t,e){o+=Number(t.saldo_haber)})),this.suman.sum_debe=e.toFixed(2),this.suman.sum_haber=i.toFixed(2),this.suman.sal_debe=a.toFixed(2),this.suman.sal_haber=o.toFixed(2)},agregarRegistro:function(){if(""==this.balance.cuenta)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.balance.cuenta;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e={cuenta_id:t,cuenta:o.obtenerNombre(t),suma_debe:this.balance.suma_debe,suma_haber:this.balance.suma_haber,saldo_debe:this.balance.saldo_debe,saldo_haber:this.balance.saldo_haber};this.balances.push(e),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.balance.cuenta="",this.balance.suma_debe="",this.balance.saldo_debe="",this.balance.suma_haber="",this.balance.saldo_haber="",this.totales()}}},deleteBalance:function(t){var e=this;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+this.balances[t].cuenta,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+e.balances[t].cuenta,"success"),e.balances.splice(t,1),e.totales())}))},editBalance:function(t){this.balance.edit=!0,this.registro_id=t,this.balance.const_id=this.balances[t].cuenta_id,this.balance.cuenta=this.balances[t].cuenta_id,this.balance.suma_debe=this.balances[t].suma_debe,this.balance.suma_haber=this.balances[t].suma_haber,this.balance.saldo_debe=this.balances[t].saldo_debe,this.balance.saldo_haber=this.balances[t].saldo_haber},editBalanceFuera:function(t){this.balance.edit=!0,this.registro_id=t,this.balance.const_id=this.balances[t].cuenta_id,this.balance.cuenta=this.balances[t].cuenta_id,this.balance.suma_debe=this.balances[t].suma_debe,this.balance.suma_haber=this.balances[t].suma_haber,this.balance.saldo_debe=this.balances[t].saldo_debe,this.balance.saldo_haber=this.balances[t].saldo_haber,$("#bc-transaccion").modal("show")},cancelarEdicion:function(){this.balance.cuenta="",this.balance.suma_debe="",this.balance.suma_haber="",this.balance.saldo_haber="",this.balance.saldo_haber="",this.balance.edit=!1},actualizarBalance:function(){if(""==this.balance.cuenta)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.registro_id,e=this.balance.cuenta;if(1==this.verificarCuenta(e))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var i=o.obtenerNombre(e);this.balances[t].cuenta=i,this.balances[t].cuenta_id=e,this.balances[t].suma_debe=this.balance.suma_debe,this.balances[t].suma_haber=this.balance.suma_haber,this.balances[t].saldo_debe=this.balance.saldo_debe,this.balances[t].saldo_haber=this.balance.saldo_haber,this.balance.cuenta="",this.balance.suma_debe="",this.balance.suma_haber="",this.balance.saldo_debe="",this.balance.saldo_haber="",this.balance.edit=!1,this.totales()}}},guardarBalance:function(){var t=this;if(0==this.balances.length)toastr.error("Debe haber al menos un registro en el Balance","Smarmoddle",{timeOut:"3000"});else if(""==this.fecha||""==this.nombre)toastr.error("Fecha y Nombre son obligaorios","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/balance-comprobacion",{id:this.id_taller,nombre:this.nombre,fecha:this.fecha,balances:this.balances,sum_debe:this.suman.sum_debe,sum_haber:this.suman.sum_haber,sal_debe:this.suman.sal_debe,sal_haber:this.suman.sal_haber}).then((function(e){"guardado"==e.data.estado?(toastr.success("Balance creado correctamente","Smarmoddle",{timeOut:"3000"}),n.obtenerBalanceCom()):"actualizado"==e.data.estado&&(toastr.warning("Balance actualizado correctamente","Smarmoddle",{timeOut:"3000"}),console.log(t.balances),n.obtenerBalanceCom())})).catch((function(t){}))}},obtenerBalanceCom:function(){var t=this;axios.post("/sistema/admin/taller/balance-obtener-comprobacion",{id:this.id_taller}).then((function(e){1==e.data.datos&&(toastr.info("Balance de Comprobacion cargado correctamente","Smarmoddle",{timeOut:"3000"}),t.balances=e.data.bcomprobacion,t.nombre=e.data.nombre,t.fecha=e.data.fecha,t.totales())})).catch((function(t){}))}}}),n=new Vue({el:"#hoja_trabajo",data:{id_taller:taller,nombre:"",options:objeto,cuentas:cuentas,balances:[],nombre_mayor:"",mayorgeneral:[],nombre_balance:"",eliminar:{index:"",nombre:""},fecha_balance:"",registros:[],registro_id:"",registro:{edit:!1,const_id:"",cuenta_id:"",balance_comp:{debe:"",haber:""},ajustes:{debe:"",haber:""},balance_ajustado:{debe:"",haber:""},estado_resultado:{debe:"",haber:""},balance_general:{debe:"",haber:""}},suman:{balance_comp:{total_debe:0,total_haber:0},ajustes:{total_debe:0,total_haber:0},balance_ajustado:{total_debe:0,total_haber:0},estado_resultado:{total_debe:0,total_haber:0},balance_general:{total_debe:0,total_haber:0}},update:!1},mounted:function(){this.obtenerBalanceCom(),this.obtenerMayorGeneral(),this.obtenerHojita()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},sumasTotales:function(){var t=this.registros,e=0,i=0,a=0,o=0,s=0,r=0,n=0,c=0,d=0,l=0;t.forEach((function(t,i){var a=t.bc_debe;null!=a&&""!==a&&(e+=Number(a))})),this.suman.balance_comp.total_debe=e.toFixed(2),t.forEach((function(t,e){var a=t.bc_haber;null!=a&&""!==a&&(i+=Number(a))})),this.suman.balance_comp.total_haber=i.toFixed(2),t.forEach((function(t,e){var i=t.ajuste_debe;null!=i&&""!==i&&(a+=Number(i))})),this.suman.ajustes.total_debe=a.toFixed(2),t.forEach((function(t,e){var i=t.ajuste_haber;null!=i&&""!==i&&(o+=Number(i))})),this.suman.ajustes.total_haber=o.toFixed(2),t.forEach((function(t,e){var i=t.ba_debe;null!=i&&""!==i&&(s+=Number(i))})),this.suman.balance_ajustado.total_debe=s.toFixed(2),t.forEach((function(t,e){var i=t.ba_haber;null!=i&&""!==i&&(r+=Number(i))})),this.suman.balance_ajustado.total_haber=r.toFixed(2),t.forEach((function(t,e){var i=t.er_debe;null!=i&&""!==i&&(n+=Number(i))})),this.suman.estado_resultado.total_debe=n.toFixed(2),t.forEach((function(t,e){var i=t.er_haber;null!=i&&""!==i&&(c+=Number(i))})),this.suman.estado_resultado.total_haber=c.toFixed(2),t.forEach((function(t,e){var i=t.bg_debe;null!=i&&""!==i&&(d+=Number(i))})),this.suman.balance_general.total_debe=d.toFixed(2),t.forEach((function(t,e){var i=t.bg_haber;null!=i&&""!==i&&(l+=Number(i))})),this.suman.balance_general.total_haber=l.toFixed(2)},verificarCuenta:function(t){return Number(this.registro.const_id)!==t&&this.registros.filter((function(e){return e.cuenta_id==t})).length>0},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},abrirTransaccion:function(){this.update=!1,$("#ht-transaccion").modal("show")},agregarRegistro:function(){if(""==this.registro.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.registro.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e={cuenta_id:t,cuenta:o.obtenerNombre(t),bc_debe:this.registro.balance_comp.debe,bc_haber:this.registro.balance_comp.haber,ajuste_debe:this.registro.ajustes.debe,ajuste_haber:this.registro.ajustes.haber,ba_debe:this.registro.balance_ajustado.debe,ba_haber:this.registro.balance_ajustado.haber,er_debe:this.registro.estado_resultado.debe,er_haber:this.registro.estado_resultado.haber,bg_debe:this.registro.balance_general.debe,bg_haber:this.registro.balance_general.haber};this.registros.push(e),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.registro.cuenta_id="",this.registro.balance_comp.debe="",this.registro.balance_comp.haber="",this.registro.ajustes.debe="",this.registro.ajustes.haber="",this.registro.balance_ajustado.debe="",this.registro.balance_ajustado.haber="",this.registro.estado_resultado.debe="",this.registro.estado_resultado.haber="",this.registro.balance_general.debe="",this.registro.balance_general.haber="",this.sumasTotales()}}},editBalance:function(t){this.registro.edit=!0,this.registro_id=t,this.registro.const_id=this.registros[t].cuenta_id,this.registro.cuenta_id=this.registros[t].cuenta_id,this.registro.balance_comp.debe=this.registros[t].bc_debe,this.registro.balance_comp.haber=this.registros[t].bc_haber,this.registro.ajustes.debe=this.registros[t].ajuste_debe,this.registro.ajustes.haber=this.registros[t].ajuste_haber,this.registro.balance_ajustado.debe=this.registros[t].ba_debe,this.registro.balance_ajustado.haber=this.registros[t].ba_haber,this.registro.estado_resultado.debe=this.registros[t].er_debe,this.registro.estado_resultado.haber=this.registros[t].er_haber,this.registro.balance_general.debe=this.registros[t].bg_debe,this.registro.balance_general.haber=this.registros[t].bg_haber},editBalanceFuera:function(t){this.registro.edit=!0,this.registro_id=t,this.registro.const_id=this.registros[t].cuenta_id,this.registro.cuenta_id=this.registros[t].cuenta_id,this.registro.balance_comp.debe=this.registros[t].bc_debe,this.registro.balance_comp.haber=this.registros[t].bc_haber,this.registro.ajustes.debe=this.registros[t].ajuste_debe,this.registro.ajustes.haber=this.registros[t].ajuste_haber,this.registro.balance_ajustado.debe=this.registros[t].ba_debe,this.registro.balance_ajustado.haber=this.registros[t].ba_haber,this.registro.estado_resultado.debe=this.registros[t].er_debe,this.registro.estado_resultado.haber=this.registros[t].er_haber,this.registro.balance_general.debe=this.registros[t].bg_debe,this.registro.balance_general.haber=this.registros[t].bg_haber,$("#ht-transaccion").modal("show")},cancelarEdicion:function(){this.registro.const_id="",this.registro.cuenta_id="",this.registro.balance_comp.debe="",this.registro.balance_comp.haber="",this.registro.ajustes.debe="",this.registro.ajustes.haber="",this.registro.balance_ajustado.debe="",this.registro.balance_ajustado.haber="",this.registro.estado_resultado.debe="",this.registro.estado_resultado.haber="",this.registro.balance_general.debe="",this.registro.balance_general.haber="",this.registro.edit=!1},actualizarBalance:function(){if(""==this.registro.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.registro_id,e=this.registro.cuenta_id;if(1==this.verificarCuenta(e))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var i=o.obtenerNombre(e);this.registros[t].cuenta=i,this.registros[t].cuenta_id=e,this.registros[t].bc_debe=this.registro.balance_comp.debe,this.registros[t].bc_haber=this.registro.balance_comp.haber,this.registros[t].ajuste_debe=this.registro.ajustes.debe,this.registros[t].ajuste_haber=this.registro.ajustes.haber,this.registros[t].ba_debe=this.registro.balance_ajustado.debe,this.registros[t].ba_haber=this.registro.balance_ajustado.haber,this.registros[t].er_debe=this.registro.estado_resultado.debe,this.registros[t].er_haber=this.registro.estado_resultado.haber,this.registros[t].bg_debe=this.registro.balance_general.debe,this.registros[t].bg_haber=this.registro.balance_general.haber,this.cancelarEdicion(),this.sumasTotales(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}}},eliminarRegistro:function(){var t=this.eliminar.index;this.registros.splice(t,1),this.eliminar.index="",this.eliminar.nombre="",$("#eliminar-ht").modal("hide")},deleteBalance:function(t){this.registros.splice(t,1),this.sumasTotales()},warningEliminar:function(t){var e=this;this.eliminar.index=t,this.eliminar.nombre=this.registros[t].cuenta,Swal.fire({title:"Seguro que deseas eliminar la cuenta "+this.eliminar.nombre,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+e.eliminar.nombre,"success"),e.registros.splice(t,1))}))},obtenerBalanceCom:function(){var t=this;axios.post("/sistema/admin/taller/balance-obtener-comprobacion",{id:this.id_taller}).then((function(e){1==e.data.datos&&(t.balances=e.data.bcomprobacion,t.nombre_balance=e.data.nombre,t.fecha_balance=e.data.fecha)})).catch((function(t){}))},obtenerMayorGeneral:function(){var t=this;axios.post("/sistema/admin/taller/mayorgeneral",{id:t.id_taller}).then((function(e){1==e.data.datos&&(t.mayorgeneral=e.data.registros,t.nombre_mayor=e.data.nombre)})).catch((function(t){}))},guardarHoja:function(){if(0==this.registros.length)toastr.error("Debe haber al menos un registro en la Hoja","Smarmoddle",{timeOut:"3000"});else if(""==this.nombre)toastr.error("Nombre es obligaorios","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/hoja-trabajo",{id:this.id_taller,nombre:this.nombre,registros:this.registros,bc_total_debe:this.suman.balance_comp.total_debe,bc_total_haber:this.suman.balance_comp.total_haber,ajuste_total_debe:this.suman.ajustes.total_debe,ajuste_total_haber:this.suman.ajustes.total_haber,ba_total_debe:this.suman.balance_ajustado.total_debe,ba_total_haber:this.suman.balance_ajustado.total_haber,er_total_debe:this.suman.estado_resultado.total_debe,er_total_haber:this.suman.estado_resultado.total_haber,bg_total_debe:this.suman.balance_general.total_debe,bg_total_haber:this.suman.balance_general.total_haber}).then((function(t){"guardado"==t.data.estado?(toastr.success("Hoja de Trabajo Creada Correctamente","Smarmoddle",{timeOut:"3000"}),c.obtenerHojita(),d.obtenerHojita(),l.obtenerHojita()):"actualizado"==t.data.estado&&(toastr.warning("Hoja de Trabajo Actualizada correctamente","Smarmoddle",{timeOut:"3000"}),c.obtenerHojita(),d.obtenerHojita(),l.obtenerHojita())})).catch((function(t){}))}},obtenerHojita:function(){var t=this;axios.post("/sistema/admin/taller/hoja-obtener-trabajo",{id:this.id_taller}).then((function(e){1==e.data.datos&&(t.registros=e.data.hojatrabajo,t.nombre=e.data.nombre,t.sumasTotales())})).catch((function(t){}))}}}),c=new Vue({el:"#balance_ajustado",data:{id_taller:taller,hojatrabajo:[],options:objeto,cuentas:cuentas,nombre_hoja:"",nombre:"",balances_ajustados:[],balance:{cuenta_id:"",debe:"",haber:"",const_id:"",edit:!1},suman:{debe:0,haber:0},update:!1,registro_id:0},mounted:function(){this.obtenerBalanceAjus(),this.obtenerHojita()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},obtenerHojita:function(){var t=this;axios.post("/sistema/admin/taller/hoja-obtener-trabajo",{id:this.id_taller}).then((function(e){1==e.data.datos&&(t.hojatrabajo=e.data.hojatrabajo,t.nombre_hoja=e.data.nombre)})).catch((function(t){}))},verificarCuenta:function(t){return Number(this.balance.const_id)!==t&&this.balances_ajustados.filter((function(e){return e.cuenta_id==t})).length>0},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},totales:function(){this.suman.debe=0,this.suman.haber=0;var t=this.balances_ajustados,e=0,i=0;t.forEach((function(t,i){e+=Number(t.debe)})),t.forEach((function(t,e){i+=Number(t.haber)})),this.suman.debe=e.toFixed(2),this.suman.haber=i.toFixed(2)},abrirTransaccion:function(){this.update=!1,$("#ba-transaccion").modal("show")},agregarRegistro:function(){if(""==this.balance.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.balance.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.balance.cuenta_id,cuenta:e,debe:this.balance.debe,haber:this.balance.haber};this.balances_ajustados.push(i),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.balance.cuenta_id="",this.balance.debe="",this.balance.haber="",this.totales()}}},deleteBalance:function(t){this.balances_ajustados.splice(t,1),this.totales()},editBalance:function(t){this.balance.edit=!0,this.registro_id=t,this.balance.const_id=this.balances_ajustados[t].cuenta_id,this.balance.cuenta_id=this.balances_ajustados[t].cuenta_id,this.balance.debe=this.balances_ajustados[t].debe,this.balance.haber=this.balances_ajustados[t].haber},editBalanceFuera:function(t){this.balance.edit=!0,this.registro_id=t,this.balance.const_id=this.balances_ajustados[t].cuenta_id,this.balance.cuenta_id=this.balances_ajustados[t].cuenta_id,this.balance.debe=this.balances_ajustados[t].debe,this.balance.haber=this.balances_ajustados[t].haber,$("#ba-transaccion").modal("show")},cancelarEdicion:function(){this.balance.cuenta_id="",this.balance.debe="",this.balance.haber="",this.balance.edit=!1},actualizarBalance:function(){if(""==this.balance.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.balance.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro_id;this.balances_ajustados[i].cuenta_id=this.balance.cuenta_id,this.balances_ajustados[i].cuenta=e,this.balances_ajustados[i].debe=this.balance.debe,this.balances_ajustados[i].haber=this.balance.haber,this.balance.cuenta_id="",this.balance.debe="",this.balance.haber="",this.balance.edit=!1,this.registro_id="",this.totales()}}},warningEliminar:function(t){var e=this,i=this.balances_ajustados[t].cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.balances_ajustados.splice(t,1))}))},guardarBalance:function(){if(0==this.balances_ajustados.length)toastr.error("Debe haber al menos un registro en el Balance","Smarmoddle",{timeOut:"3000"});else if(""==this.nombre)toastr.error("El nombre es obligatorio","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/balance-ajustado",{id:this.id_taller,balances:this.balances_ajustados,total_debe:this.suman.debe,total_haber:this.suman.haber,nombre:this.nombre}).then((function(t){"guardado"==t.data.estado?toastr.success("Balance creado correctamente","Smarmoddle",{timeOut:"3000"}):"actualizado"==t.data.estado&&toastr.warning("Balance actualizado correctamente","Smarmoddle",{timeOut:"3000"})})).catch((function(t){}))}},obtenerBalanceAjus:function(){var t=this;axios.post("/sistema/admin/taller/balance-obtener-ajustado",{id:this.id_taller}).then((function(e){1==e.data.datos&&(toastr.info("Balance de Comprobacion Ajustado cargado correctamente","Smarmoddle",{timeOut:"3000"}),t.balances_ajustados=e.data.bcomprobacionAjustado,t.nombre=e.data.nombre,t.totales())})).catch((function(t){}))}}}),d=new Vue({el:"#estado_resultado",data:{id_taller:taller,hojatrabajo:[],options:objeto,cuentas:cuentas,nombre_hoja:"",venta:"",costo_venta:"",producto:"",nombre:"",fecha:"",ingresos:[],gastos:[],ingreso:{cuenta_id:"",saldo:"",edit:!1,const_id:""},utilidad_bruta:{costo:"",costo_venta:""},gasto:{cuenta_id:"",saldo:"",edit:!1,const_id:""},utilida:{cuenta_id:"",saldo:"",edit:!1,create:!1,const_id:""},utilidades:[],utilidad:"",update:!1,registro:{ingreso:"",gasto:"",utilida:""},totales:{ingreso:0,gastos:0,utilidad_bruta_ventas:"",utilidad_neta_o:0,utilidad_ejercicio:"",utilidad_liquida:""}},mounted:function(){this.obtenerHojita(),this.obtenerEstadoResultado()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},agregarBruta:function(){this.venta=this.utilidad_bruta.venta,this.costo_venta=this.utilidad_bruta.costo_venta,toastr.info("Datos agregados","Smarmoddle",{timeOut:"3000"});var t=Number(this.venta-this.costo_venta);this.totales.utilidad_bruta_ventas=t,console.log(t),this.totale()},subtotal:function(){var t=Number(this.totales.ingreso)+Number(this.totales.utilidad_bruta_ventas);console.log(t),this.totales.utilidad_neta_o=Number(t).toFixed(2)},warningEliminarIngreso:function(t){var e=this,i=this.ingresos[t].cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.ingresos.splice(t,1),e.totale(),e.subtotal())}))},warningEliminarGastos:function(t){var e=this,i=this.gastos[t].cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.gastos.splice(t,1),e.totale(),e.subtotal())}))},warningEliminarUtilidad:function(t){var e=this,i=this.utilidades[t].cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.utilidades.splice(t,1))}))},VueSweetAlert2:function(t,e){Swal.fire({html:'<div id="VueSweetAlert2"></div>',showConfirmButton:!1,showCloseButton:!0,willOpen:function(){var i=new(Vue.extend(Vue.component(t)))({propsData:e});i.$mount(),document.getElementById("VueSweetAlert2").appendChild(i.$el)}})},totale:function(){this.totales.ingreso=0,this.totales.gastos=0;var t=this.ingresos,e=this.gastos,i=0,a=0;t.forEach((function(t,e){i+=Number(t.saldo)})),e.forEach((function(t,e){a+=Number(t.saldo)})),this.totales.ingreso=i.toFixed(2),this.totales.gastos=a.toFixed(2),console.log(i),console.log(a),this.subtotal()},selectUtilidad:function(){"perdida"==this.utilidad||this.utilidad},obtenerHojita:function(){var t=this;axios.post("/sistema/admin/taller/hoja-obtener-trabajo",{id:this.id_taller}).then((function(e){1==e.data.datos&&(t.hojatrabajo=e.data.hojatrabajo,t.nombre_hoja=e.data.nombre)})).catch((function(t){}))},verificarCuentaIngreso:function(t){if(Number(this.ingreso.const_id)===t)return!1;var e=this.ingresos.filter((function(e){return e.cuenta_id==t})),i=this.gastos.filter((function(e){return e.cuenta_id==t})),a=this.utilidades.filter((function(e){return e.cuenta_id==t}));return e.length>0||(i.length>0||a.length>0)},verificarCuentaGasto:function(t){if(Number(this.gasto.const_id)===t)return!1;var e=this.ingresos.filter((function(e){return e.cuenta_id==t})),i=this.gastos.filter((function(e){return e.cuenta_id==t})),a=this.utilidades.filter((function(e){return e.cuenta_id==t}));return e.length>0||(i.length>0||a.length>0)},verificarCuentaUtilidad:function(t){if(Number(this.utilida.const_id)===t)return!1;var e=this.ingresos.filter((function(e){return e.cuenta_id==t})),i=this.gastos.filter((function(e){return e.cuenta_id==t})),a=this.utilidades.filter((function(e){return e.cuenta_id==t}));return e.length>0||(i.length>0||a.length>0)},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},abrirIngreso:function(){$("#er-ingreso").modal("show"),$("#nav-er-ingreso-tab").tab("show")},abrirGastos:function(){$("#er-ingreso").modal("show"),$("#nav-er-gastos-tab").tab("show")},abrirUtilidades:function(){$("#er-ingreso").modal("show"),$("#nav-er-utilidad-tab").tab("show")},mostrarUtilidades:function(){this.utilida.create=!0},cerrarUtilidades:function(){this.utilida.create=!1,this.utilida.cuenta_id="",this.utilida.saldo="",this.utilida.edit=!1,this.utilida.create=!1,this.const_id=""},agregarIngreso:function(){if(""==this.ingreso.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.ingreso.cuenta_id;if(1==this.verificarCuentaIngreso(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.ingreso.cuenta_id,cuenta:e,saldo:this.ingreso.saldo};this.ingresos.push(i),toastr.success("Ingreso agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.ingreso.cuenta_id="",this.ingreso.saldo="",this.totale(),this.subtotal()}}},agregarGasto:function(){if(""==this.gasto.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.gasto.cuenta_id;if(1==this.verificarCuentaGasto(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.gasto.cuenta_id,cuenta:e,saldo:this.gasto.saldo};this.gastos.push(i),toastr.success("Gasto agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.gasto.cuenta_id="",this.gasto.saldo="",this.totale(),this.subtotal()}}},agregarUtilidad:function(){if(""==this.utilida.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.utilida.cuenta_id;if(1==this.verificarCuentaUtilidad(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.utilida.cuenta_id,cuenta:e,saldo:this.utilida.saldo};this.utilidades.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.utilida.cuenta_id="",this.utilida.saldo="",this.totale(),this.subtotal()}}},editIngreso:function(t){this.ingreso.edit=!0,this.registro.ingreso=t,this.ingreso.const_id=this.ingresos[t].cuenta_id,this.ingreso.cuenta_id=this.ingresos[t].cuenta_id,this.ingreso.saldo=this.ingresos[t].saldo},editIngresoFuera:function(t){this.ingreso.edit=!0,this.registro.ingreso=t,this.ingreso.const_id=this.ingresos[t].cuenta_id,this.ingreso.cuenta_id=this.ingresos[t].cuenta_id,this.ingreso.saldo=this.ingresos[t].saldo,$("#er-ingreso").modal("show"),$("#nav-er-ingreso-tab").tab("show")},cancelarEdicionIngreso:function(){this.ingreso.cuenta_id="",this.ingreso.saldo="",this.ingreso.edit=!1},actualizarIngreso:function(){if(""==this.ingreso.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.ingreso.cuenta_id;if(1==this.verificarCuentaIngreso(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.ingreso;this.ingresos[i].cuenta_id=this.ingreso.cuenta_id,this.ingresos[i].cuenta=e,this.ingresos[i].saldo=this.ingreso.saldo,this.ingreso.cuenta_id="",this.ingreso.saldo="",this.ingreso.edit=!1,this.registro.ingreso="",this.totale(),this.subtotal()}}},editGasto:function(t){this.gasto.edit=!0,this.registro.gasto=t,this.gasto.const_id=this.gastos[t].cuenta_id,this.gasto.cuenta_id=this.gastos[t].cuenta_id,this.gasto.saldo=this.gastos[t].saldo},editGastoFuera:function(t){this.gasto.edit=!0,this.registro.gasto=t,this.gasto.const_id=this.gastos[t].cuenta_id,this.gasto.cuenta_id=this.gastos[t].cuenta_id,this.gasto.saldo=this.gastos[t].saldo,$("#er-ingreso").modal("show"),$("#nav-er-gastos-tab").tab("show")},cancelarEdicionGasto:function(){this.gasto.cuenta_id="",this.gasto.saldo="",this.gasto.edit=!1},actualizarGasto:function(){if(""==this.gasto.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.gasto.cuenta_id;if(1==this.verificarCuentaGasto(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.gasto;this.gastos[i].cuenta_id=this.gasto.cuenta_id,this.gastos[i].cuenta=e,this.gastos[i].saldo=this.gasto.saldo,this.gasto.cuenta_id="",this.gasto.saldo="",this.gasto.edit=!1,this.registro.gasto="",this.totales(),this.subtotal()}}},editUtilidad:function(t){this.utilida.create=!0,this.utilida.edit=!0,this.registro.utilida=t,this.utilida.const_id=this.utilidades[t].cuenta_id,this.utilida.cuenta_id=this.utilidades[t].cuenta_id,this.utilida.saldo=this.utilidades[t].saldo},editUtilidadFuera:function(t){this.utilida.edit=!0,this.registro.utilida=t,this.utilida.const_id=this.utilidades[t].cuenta_id,this.utilida.cuenta_id=this.utilidades[t].cuenta_id,this.utilida.saldo=this.utilidades[t].saldo,$("#er-ingreso").modal("show"),$("#nav-er-utilidad-tab").tab("show")},cancelarEdicionUtilidad:function(){this.utilida.cuenta_id="",this.utilida.saldo="",this.utilida.edit=!1},actualizarUtilidad:function(){if(""==this.utilida.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.utilida.cuenta_id;if(1==this.verificarCuentaUtilidad(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.utilida;this.utilidades[i].cuenta_id=this.utilida.cuenta_id,this.utilidades[i].cuenta=e,this.utilidades[i].saldo=this.utilida.saldo,this.utilida.cuenta_id="",this.utilida.saldo="",this.utilida.edit=!1,this.utilida.create=!1,this.registro.utilidad="",this.totale(),this.subtotal()}}},guardarEstadoResultado:function(){if(""===this.nombre.trim())toastr.error("Campo Nombre es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.fecha.trim())toastr.error("Campo Fecha es obligatorio","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/estado-resultado",{id:this.id_taller,nombre:this.nombre,fecha:this.fecha,ingresos:this.ingresos,gastos:this.gastos,utilidades:this.utilidades,utilidad:this.utilidad,totales:this.totales,venta:this.venta,costo_venta:this.costo_venta}).then((function(t){t.data.success,toastr.success(t.data.message,"Smarmoddle",{timeOut:"3000"}),l.obtenerEstadoResultado(),h.obtenerEstadoResultado()})).catch((function(t){toastr.error(t.response.data.message,"Smarmoddle",{timeOut:"3000"})}))}},obtenerEstadoResultado:function(){var t=this,e=this;axios.post("/sistema/admin/taller/estado-obtener-resultado",{id:e.id_taller}).then((function(i){1==i.data.datos&&(e.nombre=i.data.estadoresultado.nombre,e.fecha=i.data.estadoresultado.fecha,e.ingresos=i.data.ingresos,e.gastos=i.data.gastos,e.utilidades=i.data.utilidades,e.utilidad=i.data.estadoresultado.utilidad,e.venta=i.data.estadoresultado.venta,e.costo_venta=i.data.estadoresultado.costo_venta,e.totales.utilidad_bruta_ventas=i.data.estadoresultado.utilidad_bruta_ventas,e.utilidad_bruta.venta=i.data.estadoresultado.venta,e.utilidad_bruta.costo_venta=i.data.estadoresultado.costo_venta,e.totales.utilidad_ejercicio=i.data.estadoresultado.utilidad_ejercicio,e.totales.utilidad_liquida=i.data.estadoresultado.utilidad_liquida,console.log(i.data.estadoresultado),t.totale(),t.subtotal())})).catch((function(t){}))}}}),l=new Vue({el:"#balance_general",data:{nombre:"",fecha:"",id_taller:taller,hojatrabajo:[],nombre_hoja:"",estadoresultado:{nombre_e_resultado:"",fecha_e_resultado:"",ingresos:[],gastos:[],utilidades:[],utilidad:"",venta_e_resultado:"",costo_venta_e_resultado:"",totales:{ingreso:"",gasto:"",utilidad_bruta_ventas_e_resultado:"",utilidad_ejercicio_e_resultado:"",utilidad_liquida_e_resultado:""}},update:0,balance_general:{nombre:"",fecha:""},patrimonio:{cuenta_id:"",edit:!1,saldo:""},bi:{const_id:"",const_id2:""},options:objeto,cuentas:cuentas,total_balance_inicial:{t_activo:"",t_pasivo:"",t_patrimonio_pasivo:""},registro:{activo_corriente:"",activo_nocorriente:"",pasivo_corriente:"",pasivo_nocorriente:"",patrimonio:""},b_initotal:{t_a_corriente:"",t_a_nocorriente:"",t_p_corriente:"",t_p_no_corriente:"",t_patrimonio:""},a_corrientes:[],a_nocorrientes:[],p_corrientes:[],p_nocorrientes:[],patrimonios:[],activo:{a_corriente:{cuenta_id:"",saldo:"",edit:!1},a_nocorriente:{cuenta_id:"",saldo:"",cuenta_id2:"",total_saldo:"",total_saldo2:"",saldo2:"",edit:!1,double:!1}},pasivo:{p_corriente:{cuenta_id:"",saldo:"",total:"",edit:!1},p_nocorriente:{cuenta_id:"",saldo:"",total:"",edit:!1}}},mounted:function(){this.obtenerHojita(),this.cambioActivo(),this.cambioActivoNo(),this.cambioPasivo(),this.cambioPasivoNo(),this.cambioPatrimonio(),this.TotalActivo(),this.TotalPasivo(),this.obtenerBalance(),this.obtenerEstadoResultado()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},obtenerEstadoResultado:function(){var t=this,e=this;axios.post("/sistema/admin/taller/estado-obtener-resultado",{id:e.id_taller}).then((function(i){1==i.data.datos&&(e.estadoresultado.nombre_e_resultado=i.data.estadoresultado.nombre,e.estadoresultado.fecha_e_resultado=i.data.estadoresultado.fecha,e.estadoresultado.ingresos=i.data.ingresos,e.estadoresultado.totales.ingreso=i.data.estadoresultado.total_ingresos,e.estadoresultado.totales.gasto=i.data.estadoresultado.total_gastos,e.estadoresultado.gastos=i.data.gastos,e.estadoresultado.utilidades=i.data.utilidades,e.estadoresultado.utilidad=i.data.estadoresultado.utilidad,e.estadoresultado.venta_e_resultado=i.data.estadoresultado.venta,e.estadoresultado.costo_venta_e_resultado=i.data.estadoresultado.costo_venta,e.estadoresultado.totales.utilidad_bruta_ventas_e_resultado=i.data.estadoresultado.utilidad_bruta_ventas,e.estadoresultado.totales.utilidad_ejercicio_e_resultado=i.data.estadoresultado.utilidad_ejercicio,e.estadoresultado.totales.utilidad_liquida_e_resultado=i.data.estadoresultado.utilidad_liquida,e.estadoresultado.totales.utilidad_neta_o=i.data.estadoresultado.utilidad_neta_o,console.log(i.data.estadoresultado),t.totale(),t.subtotal())})).catch((function(t){}))},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},obtenerHojita:function(){var t=this;axios.post("/sistema/admin/taller/hoja-obtener-trabajo",{id:this.id_taller}).then((function(e){1==e.data.datos&&(t.hojatrabajo=e.data.hojatrabajo,t.nombre_hoja=e.data.nombre)})).catch((function(t){}))},abrirActivoC:function(){this.limpiar(),$("#bg-transaccion").modal("show"),$("#nav-bg-activo-corriente-tab").tab("show")},abrirActivoNoC:function(){this.limpiar(),$("#bg-transaccion").modal("show"),$("#nav-bg-activo-no-corriente-tab").tab("show")},abrirPasivoC:function(){this.limpiar(),$("#bg-transaccion").modal("show"),$("#nav-bg-pasivo-corriente-tab").tab("show")},abrirPasivoNoC:function(){this.limpiar(),$("#bg-transaccion").modal("show"),$("#nav-bg-pasivo-no-corriente-tab").tab("show")},abrirPatrimonio:function(){this.limpiar(),$("#bg-transaccion").modal("show"),$("#nav-bg-patrimonio-tab").tab("show")},deleteAcCooriente:function(t){var e=this,i=this.a_corrientes[t].cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.a_corrientes.splice(t,1),e.cambioActivo(),e.TotalActivo())}))},deletePaCooriente:function(t){var e=this,i=this.p_corrientes[t].cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.p_corrientes.splice(t,1),e.cambioPasivo(),e.TotalPasivo())}))},deleteAcNoCooriente:function(t){var e=this,i=this.a_nocorrientes[t].cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.a_nocorrientes.splice(t,1),e.cambioActivoNo(),e.TotalActivo())}))},deletePaNoCooriente:function(t){var e=this,i=this.p_nocorrientes[t].cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.p_nocorrientes.splice(t,1),e.cambioPasivoNo(),e.TotalPasivo())}))},deletePatrimonio:function(t){var e=this,i=this.patrimonios[t].cuenta;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.patrimonios.splice(t,1),e.cambioPatrimonio())}))},limpiar:function(){this.pasivo.p_corriente.nom_cuenta="",this.pasivo.p_corriente.saldo="",this.pasivo.p_nocorriente.nom_cuenta="",this.pasivo.p_nocorriente.saldo="",this.activo.a_corriente.nom_cuenta="",this.activo.a_corriente.saldo="",this.activo.a_nocorriente.nom_cuenta="",this.activo.a_nocorriente.saldo="",this.bi.const_id=""},agregarActivoCorriente:function(){if(""==this.activo.a_corriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.activo.a_corriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={resta:"",cuenta_id2:"",cuenta2:"",total_saldo2:"",saldo2:"",total_saldo:"",cuenta_id:this.activo.a_corriente.cuenta_id,cuenta:e,saldo:this.activo.a_corriente.saldo};this.a_corrientes.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.activo.a_corriente.cuenta_id="",this.activo.a_corriente.saldo="",this.cambioActivo()}}},editAcorriente:function(t){this.activo.a_corriente.edit=!0,this.registro.a_corriente=t,this.bi.const_id=this.a_corrientes[t].cuenta_id,this.activo.a_corriente.cuenta_id=this.a_corrientes[t].cuenta_id,this.activo.a_corriente.saldo=this.a_corrientes[t].saldo,$("#bg-transaccion").modal("show"),$("#nav-bg-activo-corriente-tab").tab("show")},actualizarActivoC:function(){if(""==this.activo.a_corriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.activo.a_corriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.a_corriente;this.a_corrientes[i].cuenta_id=this.activo.a_corriente.cuenta_id,this.a_corrientes[i].cuenta=e,this.a_corrientes[i].saldo=this.activo.a_corriente.saldo,this.activo.a_corriente.cuenta_id="",this.activo.a_corriente.saldo="",this.activo.a_corriente.edit=!1,this.registro.a_corriente="",this.cambioActivo()}}},cancelarEdicionActivoC:function(){this.activo.a_corriente.cuenta_id="",this.activo.a_corriente.saldo="",this.activo.a_corriente.edit=!1},DoubleCouenta:function(){this.activo.a_nocorriente.double=!0},DoubleCouentaC:function(){this.activo.a_nocorriente.double=!1},agregarActivoNoCorriente:function(){if(""==this.activo.a_nocorriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.activo.a_nocorriente.cuenta_id,e=this.activo.a_nocorriente.cuenta_id2;if(""!==e)if(1==this.verificarCuenta(e))return void toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var i=o.obtenerNombre(t);if(""!=e&&null!=e){this.activo.a_nocorriente.nombre1=o.obtenerNombre(e),console.log("HAS ENTRADO AQUI");var a=Number(this.activo.a_nocorriente.saldo)-Number(this.activo.a_nocorriente.saldo2);this.activo.a_nocorriente.total_saldo2=a;var s={resta:"si",cuenta_id:this.activo.a_nocorriente.cuenta_id,cuenta:i,saldo:this.activo.a_nocorriente.saldo,cuenta2:this.activo.a_nocorriente.nombre1,total_saldo:this.activo.a_nocorriente.total_saldo,cuenta_id2:this.activo.a_nocorriente.cuenta_id2,saldo2:this.activo.a_nocorriente.saldo2,total_saldo2:this.activo.a_nocorriente.total_saldo2};this.a_nocorrientes.push(s),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"})}else{var r={resta:"no",cuenta_id:this.activo.a_nocorriente.cuenta_id,cuenta:i,saldo:this.activo.a_nocorriente.saldo,cuenta2:"",saldo2:"",total_saldo:this.activo.a_nocorriente.saldo,cuenta_id2:this.activo.a_nocorriente.cuenta_id2,total_saldo2:this.activo.a_nocorriente.total_saldo2};this.a_nocorrientes.push(r),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"})}this.activo.a_nocorriente.cuenta_id="",this.activo.a_nocorriente.saldo="",this.activo.a_nocorriente.cuenta_id2="",this.activo.a_nocorriente.saldo2="",this.activo.a_nocorriente.total_saldo="",this.activo.a_nocorriente.total_saldo2="",this.activo.a_nocorriente.double=!1,this.cambioActivoNo()}}},editNoAcorriente:function(t){this.activo.a_nocorriente.edit=!0,this.registro.a_nocorriente=t,this.bi.const_id=this.a_nocorrientes[t].cuenta_id,this.bi.const_id2=this.a_nocorrientes[t].cuenta_id2,this.activo.a_nocorriente.cuenta_id=this.a_nocorrientes[t].cuenta_id,this.activo.a_nocorriente.saldo=this.a_nocorrientes[t].saldo,this.activo.a_nocorriente.cuenta_id2=this.a_nocorrientes[t].cuenta_id2,this.activo.a_nocorriente.saldo2=this.a_nocorrientes[t].saldo2,"si"==this.a_nocorrientes[t].resta&&(this.activo.a_nocorriente.double=!0),$("#bg-transaccion").modal("show"),$("#nav-bg-activo-no-corriente-tab").tab("show")},actualizarActivoNC:function(){if(""==this.activo.a_nocorriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.activo.a_nocorriente.cuenta_id,e=this.activo.a_nocorriente.cuenta_id2;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var i=o.obtenerNombre(t),a=this.registro.a_nocorriente;if(this.a_nocorrientes[a].cuenta_id=this.activo.a_nocorriente.cuenta_id,this.a_nocorrientes[a].cuenta=i,this.a_nocorrientes[a].saldo=this.activo.a_nocorriente.saldo,""!==e&&void 0!==e){if(1==this.verificarCuentaAct(e))return void toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});var s=o.obtenerNombre(e);this.a_nocorrientes[a].cuenta_id2=this.activo.a_nocorriente.cuenta_id2,this.a_nocorrientes[a].cuenta2=s,this.a_nocorrientes[a].saldo2=this.activo.a_nocorriente.saldo2,this.a_nocorrientes[a].total_saldo="";var r=Number(this.activo.a_nocorriente.saldo)-Number(this.activo.a_nocorriente.saldo2);this.a_nocorrientes[a].total_saldo2=r,console.log(r)}else this.a_nocorrientes[a].cuenta_id2="",this.a_nocorrientes[a].cuenta2="",this.a_nocorrientes[a].saldo2="",this.a_nocorrientes[a].total_saldo2="",this.a_nocorrientes[a].total_saldo=this.activo.a_nocorriente.saldo;this.activo.a_nocorriente.cuenta_id="",this.activo.a_nocorriente.saldo="",this.activo.a_nocorriente.edit=!1,this.registro.a_nocorriente="",this.activo.a_nocorriente.cuenta_id2="",this.activo.a_nocorriente.saldo2="",this.activo.a_nocorriente.double=!1,this.cambioActivoNo()}}},cancelarEdicionActivoNC:function(){this.activo.a_nocorriente.cuenta_id="",this.activo.a_nocorriente.saldo="",this.activo.a_nocorriente.edit=!1,this.activo.a_nocorriente.double=!1,this.activo.a_nocorriente.cuenta_id2="",this.activo.a_nocorriente.saldo2=""},agregarPasivoCorriente:function(){if(""==this.pasivo.p_corriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.pasivo.p_corriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.pasivo.p_corriente.cuenta_id,cuenta:e,saldo:this.pasivo.p_corriente.saldo};this.p_corrientes.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.pasivo.p_corriente.cuenta_id="",this.pasivo.p_corriente.saldo="",this.cambioPasivo()}}},editPcorriente:function(t){this.pasivo.p_corriente.edit=!0,this.registro.p_corriente=t,this.bi.const_id=this.p_corrientes[t].cuenta_id,this.pasivo.p_corriente.cuenta_id=this.p_corrientes[t].cuenta_id,this.pasivo.p_corriente.saldo=this.p_corrientes[t].saldo,$("#bg-transaccion").modal("show"),$("#nav-bg-pasivo-corriente-tab").tab("show")},actualizarPasivoC:function(){if(""==this.pasivo.p_corriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.pasivo.p_corriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.p_corriente;this.p_corrientes[i].cuenta_id=this.pasivo.p_corriente.cuenta_id,this.p_corrientes[i].cuenta=e,this.p_corrientes[i].saldo=this.pasivo.p_corriente.saldo,this.pasivo.p_corriente.cuenta_id="",this.pasivo.p_corriente.saldo="",this.pasivo.p_corriente.edit=!1,this.registro.p_corriente="",this.cambioPasivoNo()}}},cancelarEdicionPcorriente:function(){this.pasivo.p_corriente.cuenta_id="",this.pasivo.p_corriente.saldo="",this.pasivo.p_corriente.edit=!1},agregarPasivoNoCorriente:function(){if(""==this.pasivo.p_nocorriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.pasivo.p_nocorriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.pasivo.p_nocorriente.cuenta_id,cuenta:e,saldo:this.pasivo.p_nocorriente.saldo};this.p_nocorrientes.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.pasivo.p_nocorriente.cuenta_id="",this.pasivo.p_nocorriente.saldo="",this.cambioPasivoNo()}}},editPNocorriente:function(t){this.pasivo.p_nocorriente.edit=!0,this.registro.p_nocorriente=t,this.bi.const_id=this.p_nocorrientes[t].cuenta_id,this.pasivo.p_nocorriente.cuenta_id=this.p_nocorrientes[t].cuenta_id,this.pasivo.p_nocorriente.saldo=this.p_nocorrientes[t].saldo,$("#bg-transaccion").modal("show"),$("#nav-bg-pasivo-no-corriente-tab").tab("show")},actualizarPasivoNC:function(){if(""==this.pasivo.p_nocorriente.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.pasivo.p_nocorriente.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.p_nocorriente;this.p_nocorrientes[i].cuenta_id=this.pasivo.p_nocorriente.cuenta_id,this.p_nocorrientes[i].cuenta=e,this.p_nocorrientes[i].saldo=this.pasivo.p_nocorriente.saldo,this.pasivo.p_nocorriente.cuenta_id="",this.pasivo.p_nocorriente.saldo="",this.pasivo.p_nocorriente.edit=!1,this.registro.p_nocorriente="",this.cambioPasivoNo()}}},cancelarEdicionPNocorriente:function(){this.pasivo.p_nocorriente.cuenta_id="",this.pasivo.p_nocorriente.saldo="",this.pasivo.p_nocorriente.edit=!1},agregarPatrimonio:function(){if(""==this.patrimonio.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.patrimonio.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i={cuenta_id:this.patrimonio.cuenta_id,cuenta:e,saldo:this.patrimonio.saldo};this.patrimonios.push(i),toastr.success("Cuenta agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.patrimonio.cuenta_id="",this.patrimonio.saldo="",this.cambioPatrimonio()}}},editPatrimonio:function(t){this.patrimonio.edit=!0,this.registro.patrimonio=t,this.bi.const_id=this.patrimonios[t].cuenta_id,this.patrimonio.cuenta_id=this.patrimonios[t].cuenta_id,this.patrimonio.saldo=this.patrimonios[t].saldo,$("#bg-transaccion").modal("show"),$("#nav-bg-patrimonio-tab").tab("show")},actualizarPatrimonio:function(){if(""==this.patrimonio.cuenta_id)toastr.error("El campo Cuenta es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.patrimonio.cuenta_id;if(1==this.verificarCuenta(t))toastr.error("No puedes agregar una cuenta repetida","Smarmoddle",{timeOut:"3000"});else{var e=o.obtenerNombre(t),i=this.registro.patrimonio;this.patrimonios[i].cuenta_id=this.patrimonio.cuenta_id,this.patrimonios[i].cuenta=e,this.patrimonios[i].saldo=this.patrimonio.saldo,this.patrimonio.cuenta_id="",this.patrimonio.saldo="",this.patrimonio.edit=!1,this.registro.patrimonio="",this.cambioPatrimonio()}}},cancelarEdicionPatrimonio:function(){this.patrimonio.cuenta_id="",this.patrimonio.saldo="",this.patrimonio.edit=!1},verificarCuenta:function(t){if(Number(this.bi.const_id)===t)return!1;if(Number(this.bi.const_id2)===t)return!1;var e=this.a_corrientes.filter((function(e){return e.cuenta_id==t||e.cuenta_id2==t})),i=this.a_nocorrientes.filter((function(e){return e.cuenta_id==t||e.cuenta_id2==t})),a=this.p_corrientes.filter((function(e){return e.cuenta_id==t||e.cuenta_id2==t})),o=this.a_nocorrientes.filter((function(e){return e.cuenta_id==t||e.cuenta_id2==t})),s=this.patrimonios.filter((function(e){return e.cuenta_id==t||e.cuenta_id2==t}));return e.length>0||(i.length>0||(a.length>0||(o.length>0||s.length>0)))},verificarCuentaAct:function(t){if(this.bi.const_id==this.bi.const_id2)return!0;if(Number(this.bi.const_id)===t)return!1;if(Number(this.bi.const_id2)===t)return!1;var e=this.a_corrientes.filter((function(e){return e.cuenta_id==t||e.cuenta_id2==t})),i=this.a_nocorrientes.filter((function(e){return e.cuenta_id==t||e.cuenta_id2==t})),a=this.p_corrientes.filter((function(e){return e.cuenta_id==t||e.cuenta_id2==t})),o=this.a_nocorrientes.filter((function(e){return e.cuenta_id==t||e.cuenta_id2==t})),s=this.patrimonios.filter((function(e){return e.cuenta_id==t||e.cuenta_id2==t}));return e.length>0||(i.length>0||(a.length>0||(o.length>0||s.length>0)))},cambioActivo:function(){this.b_initotal.t_a_corriente=0;var t=this.a_corrientes,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_a_corriente=e,this.TotalActivo()},cambioActivoNo:function(){this.b_initotal.t_a_nocorriente=0;var t=this.a_nocorrientes,e=0;t.forEach((function(t){e+=Number(t.total_saldo)})),t.forEach((function(t){e+=Number(t.total_saldo2)})),console.log(e),this.b_initotal.t_a_nocorriente=e,this.TotalActivo()},cambioPasivo:function(){this.b_initotal.t_p_corriente=0;var t=this.p_corrientes,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_p_corriente=e,this.TotalPasivo()},cambioPasivoNo:function(){this.b_initotal.t_p_no_corriente=0;var t=this.p_nocorrientes,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_p_no_corriente=e,this.TotalPasivo()},cambioPatrimonio:function(){this.b_initotal.t_patrimonio=0;var t=this.patrimonios,e=0;t.forEach((function(t){e+=Number(t.saldo)})),this.b_initotal.t_patrimonio=e},TotalActivo:function(){var t=this.b_initotal.t_a_corriente+this.b_initotal.t_a_nocorriente;this.total_balance_inicial.t_activo=t},TotalPasivo:function(){var t=this.b_initotal.t_p_corriente+this.b_initotal.t_p_no_corriente;this.total_balance_inicial.t_pasivo=t},totalPasivoPatrimonio:function(){$("#pasivo_patrimonio").modal("hide"),toastr.success("Total Agregado Correctamente","Smarmoddle",{timeOut:"3000"})},guardarBalanceGeneral:function(){if(""===this.balance_general.nombre.trim())toastr.error("Campo Nombre es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.balance_general.fecha.trim())toastr.error("Campo Fecha es obligatorio","Smarmoddle",{timeOut:"3000"});else if(0==this.a_corrientes.length)toastr.error("Debe haber al menos un Activo Corriente","Smarmoddle",{timeOut:"3000"});else if(0==this.a_nocorrientes.length)toastr.error("Debe haber al menos un Activo No Corriente","Smarmoddle",{timeOut:"3000"});else if(0==this.p_corrientes.length)toastr.error("Debe haber al menos un Pasivo Corriente","Smarmoddle",{timeOut:"3000"});else if(0==this.p_nocorrientes.length)toastr.error("Debe haber al menos un Pasivo No Corriente","Smarmoddle",{timeOut:"3000"});else if(0==this.patrimonios.length)toastr.error("Debe haber al menos un Patrimonio","Smarmoddle",{timeOut:"3000"});else if(""===this.total_balance_inicial.t_patrimonio_pasivo.trim())toastr.error("Debes calcular el Total del Pasivo + Patrimonio","Smarmoddle",{timeOut:"3000"});else{var t=this;axios.post("/sistema/admin/taller/balance-general",{id:t.id_taller,nombre:t.balance_general.nombre,fecha:t.balance_general.fecha,a_corriente:t.a_corrientes,a_nocorriente:t.a_nocorrientes,p_corriente:t.p_corrientes,p_nocorriente:t.p_nocorrientes,patrimonio:t.patrimonios,totales:t.b_initotal,total_balance_inicial:t.total_balance_inicial,t_patrimonio:t.total_balance_inicial.t_patrimonio_pasivo}).then((function(e){1==e.data.success?(toastr.success(e.data.message,"Smarmoddle",{timeOut:"3000"}),t.cambioActivo(),t.cambioActivoNo(),t.cambioPasivo(),t.cambioPasivoNo(),t.cambioPatrimonio(),console.log(e.data),h.obtenerBalance()):(toastr.success(e.data.message,"Smarmoddle",{timeOut:"3000"}),t.cambioActivo(),t.cambioActivoNo(),t.cambioPasivo(),t.cambioPasivoNo(),t.cambioPatrimonio(),h.obtenerBalance())})).catch((function(t){console.log(t.response.data.message)}))}},obtenerBalance:function(){var t=this;axios.post("/sistema/admin/taller/obtener-balance-general",{id:t.id_taller}).then((function(e){1==e.data.datos&&(toastr.success(e.data.message,"Smarmoddle",{timeOut:"3000"}),t.balance_general.nombre=e.data.nombre,t.balance_general.fecha=e.data.fecha,t.a_corrientes=e.data.a_corriente,t.a_nocorrientes=e.data.a_nocorriente,t.p_corrientes=e.data.p_corriente,t.p_nocorrientes=e.data.p_nocorriente,t.patrimonios=e.data.patrimonios,t.total_balance_inicial.t_patrimonio_pasivo=e.data.total_pasivo_patrimonio,t.cambioActivo(),t.cambioActivoNo(),t.cambioPasivo(),t.cambioPasivoNo(),t.cambioPatrimonio(),console.log(e.data))})).catch((function(t){}))}}}),h=new Vue({el:"#asientos_cierre",data:{id_taller:taller,producto_id:1,nombre:"",fechabalance:"",complete:!1,options:objeto,cuentas:cuentas,balanceInicial:{debe:[],haber:[],totaldebe:0,totalhaber:0},kardex:[],nombre_kardex:"",producto_kardex:"",registros:[],eliminar:{index:""},porcentajes:{porcentaje:0,index_cuenta:"",tipo:"",cantidad:0},registerindex:0,cuentaindex:0,diarios:{debe:[],haber:[],comentario:"",fecha:"",tipo:""},edit:{debe:[],haber:[],comentario:""},diario:{debe:{edit:!1,index:"",fecha:"",nom_cuenta:"",saldo:""},haber:{edit:!1,index:"",fecha:"",nom_cuenta:"",saldo:""},comentario:""},pasan:{debe:0,haber:0},total:{debe:0,haber:0},update:!1,dato:[],estadoresultado:{nombre_e_resultado:"",fecha_e_resultado:"",ingresos:[],gastos:[],utilidades:[],utilidad:"",venta_e_resultado:"",costo_venta_e_resultado:"",totales:{ingreso:"",gasto:"",utilidad_bruta_ventas_e_resultado:"",utilidad_ejercicio_e_resultado:"",utilidad_liquida_e_resultado:""}},balance_general:{a_corrientes:[],a_nocorrientes:[],p_corrientes:[],p_nocorrientes:[],patrimonios:[],total_balance_inicial:{t_activo:"",t_pasivo:"",t_patrimonio:"",t_patrimonio_pasivo:""}},b_initotal:{}},mounted:function(){this.obtenerAsientoCierre(),this.obtenerEstadoResultado(),this.obtenerBalance()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},obtenerEstadoResultado:function(){var t=this;axios.post("/sistema/admin/taller/estado-obtener-resultado",{id:t.id_taller}).then((function(e){1==e.data.datos&&(t.estadoresultado.nombre_e_resultado=e.data.estadoresultado.nombre,t.estadoresultado.fecha_e_resultado=e.data.estadoresultado.fecha,t.estadoresultado.ingresos=e.data.ingresos,t.estadoresultado.totales.ingreso=e.data.estadoresultado.total_ingresos,t.estadoresultado.totales.gasto=e.data.estadoresultado.total_gastos,t.estadoresultado.gastos=e.data.gastos,t.estadoresultado.utilidades=e.data.utilidades,t.estadoresultado.utilidad=e.data.estadoresultado.utilidad,t.estadoresultado.venta_e_resultado=e.data.estadoresultado.venta,t.estadoresultado.costo_venta_e_resultado=e.data.estadoresultado.costo_venta,t.estadoresultado.totales.utilidad_bruta_ventas_e_resultado=e.data.estadoresultado.utilidad_bruta_ventas,t.estadoresultado.totales.utilidad_ejercicio_e_resultado=e.data.estadoresultado.utilidad_ejercicio,t.estadoresultado.totales.utilidad_liquida_e_resultado=e.data.estadoresultado.utilidad_liquida,t.estadoresultado.totales.utilidad_neta_o=e.data.estadoresultado.utilidad_neta_o,console.log(e.data.estadoresultado))})).catch((function(t){}))},limpiar:function(){this.update=!1,this.diarios.debe=[],this.diarios.haber=[],this.diarios.fecha=[],this.diarios.comentario=[],this.diarios.ajustado=!1,this.diario.haber.fecha="",this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1,this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1},obtenerBalance:function(){var t=this;axios.post("/sistema/admin/taller/obtener-balance-general",{id:t.id_taller}).then((function(e){1==e.data.datos&&(toastr.success(e.data.message,"Smarmoddle",{timeOut:"3000"}),t.balance_general.nombre=e.data.nombre,t.balance_general.fecha=e.data.fecha,t.balance_general.a_corrientes=e.data.a_corriente,t.balance_general.a_nocorrientes=e.data.a_nocorriente,t.balance_general.p_corrientes=e.data.p_corriente,t.balance_general.p_nocorrientes=e.data.p_nocorriente,t.balance_general.patrimonios=e.data.patrimonios,t.balance_general.total_balance_inicial.t_patrimonio_pasivo=e.data.total_pasivo_patrimonio,t.balance_general.total_balance_inicial.t_pasivo=e.data.bgneral.t_pasivo,t.balance_general.total_balance_inicial.t_activo=e.data.bgneral.t_activo,t.balance_general.total_balance_inicial.t_patrimonio=e.data.bgneral.t_patrimonio,t.b_initotal.t_a_corriente=e.data.bgneral.t_a_corriente,t.b_initotal.t_a_nocorriente=e.data.bgneral.t_a_nocorriente,t.b_initotal.t_p_corriente=e.data.bgneral.t_p_corriente,t.b_initotal.t_p_no_corriente=e.data.bgneral.t_p_no_corriente,t.b_initotal.t_patrimonio=e.data.bgneral.t_patrimonio)})).catch((function(t){}))},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},decimales:function(t){return null!==t?Number(t).toFixed(2):void 0},abrirTransaccion:function(){this.update=!1,this.diarios.debe=[],this.diarios.haber=[],this.diarios.fecha=[],this.diarios.comentario=[],this.diarios.ajustado=!1,this.diario.haber.fecha="",this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1,this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1,this.limpiar(),$("#as-transaccion").modal("show"),$("#comentario-diario-tab").tab("show")},llamarDiario:function(){$("#list-mayor-general-list").tab("show"),$("#mg-transaccion").modal("show")},valorPorcentual:function(t,e){return Number(e*t/100)},agregarHaber:function(){if(""===this.diario.haber.nom_cuenta)toastr.error("No has registrado una cuenta","Smarmoddle",{timeOut:"3000"});else{var t=this.diario.haber.nom_cuenta,e=this.cuentas.filter((function(e){return e.id==t})),i=this.diario.haber.saldo;if(1==e[0].porcentual){var a=this.valorPorcentual(e[0].porcentaje,i),o={cuenta_id:e[0].id,fecha:this.diario.haber.fecha,nom_cuenta:e[0].nombre,saldo:a};this.diarios.haber.push(o)}else{var s={cuenta_id:e[0].id,fecha:this.diario.haber.fecha,nom_cuenta:e[0].nombre,saldo:this.diario.haber.saldo};this.diarios.haber.push(s)}toastr.success("Activo agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.diario.haber.fecha="",this.diario.haber.nom_cuenta="",this.diario.haber.saldo=""}},agregarDebe:function(){var t=this.diario.debe.nom_cuenta,e=this.cuentas.filter((function(e){return e.id==t})),i=this.diario.debe.saldo;if(""===this.diario.debe.nom_cuenta)toastr.error("La cuenta es obligatoria","Smarmoddle",{timeOut:"3000"});else{if(1==e[0].porcentual){var a=this.valorPorcentual(e[0].porcentaje,i),o={cuenta_id:e[0].id,fecha:this.diario.debe.fecha,nom_cuenta:e[0].nombre,saldo:a};this.diarios.debe.push(o)}else{var s={cuenta_id:e[0].id,fecha:this.diario.debe.fecha,nom_cuenta:e[0].nombre,saldo:this.diario.debe.saldo};this.diarios.debe.push(s)}toastr.success("Activo agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo=""}},agregarComentario:function(){this.diarios.comentario=this.diario.comentario,this.diario.comentario=""},deleteHaber:function(t){this.diarios.haber.splice(t,1),this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1,this.diario.haber.fecha="",this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1},deleteDebe:function(t){this.diarios.debe.splice(t,1),this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1,this.diario.haber.fecha="",this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1},guardarRegistro:function(){var t=0,e=0;if(this.diarios.debe.forEach((function(e,i){var a=e.saldo;t+=Number(a)})),this.diarios.haber.forEach((function(t,i){var a=t.saldo;e+=Number(a)})),console.log(t),console.log(e),0==this.diarios.debe)toastr.error("No tienes transaccion para guardar","Smarmoddle",{timeOut:"3000"});else if(""==this.diarios.comentario)toastr.error("Debes agregar un comentario","Smarmoddle",{timeOut:"3000"});else if(""==this.diarios.fecha)toastr.error("Debes agregar la fecha","Smarmoddle",{timeOut:"3000"});else if(e.toFixed(2)!=t.toFixed(2))toastr.error("El Total de Debe y Haber no coinciden","Smarmoddle",{timeOut:"3000"});else{this.diarios.debe[0].fecha=this.diarios.fecha;var i={debe:this.diarios.debe,haber:this.diarios.haber,comentario:this.diarios.comentario,fecha:this.diarios.fecha};this.registros.push(i),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.diarios.debe=[],this.diarios.haber=[],this.diarios.comentario="",this.diarios.ajustado=!1,this.totalDebe(),this.totalHaber(),this.limpiar(),$("#as-transaccion").modal("hide")}},debeEditRegister:function(t){var e=JSON.parse(JSON.stringify(this.registros));this.update=!0,this.registerindex=t,this.diarios.debe=[],this.diarios.haber=[],this.diarios.debe=e[t].debe,this.diarios.haber=e[t].haber,this.diarios.comentario=e[t].comentario,this.diarios.fecha=e[t].fecha,$("#as-transaccion").modal("show")},deleteRegistro:function(t){var e=this;Swal.fire({title:"Seguro que deseas eliminar este registro??",text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro se elimino","success"),e.registros.splice(t,1),e.totalDebe(),e.totalHaber())}))},updaterRegister:function(){var t=this.registerindex,e=0,i=0;this.diarios.debe.forEach((function(t,i){var a=t.saldo;e+=Number(a)})),this.diarios.haber.forEach((function(t,e){var a=t.saldo;i+=Number(a)})),0==this.diarios.debe?toastr.error("No tienes transaccion para guardar","Smarmoddle",{timeOut:"3000"}):""===this.diarios.comentario.trim()?toastr.error("Debes agregar un comentario","Smarmoddle",{timeOut:"3000"}):""===this.diarios.fecha.trim()?toastr.error("Debes agregar la fecha","Smarmoddle",{timeOut:"3000"}):i!=e?toastr.error("El Total de Debe y Haber no coinciden","Smarmoddle",{timeOut:"3000"}):(this.registros[t].debe=this.diarios.debe,this.registros[t].haber=this.diarios.haber,this.registros[t].comentario=this.diarios.comentario,this.registros[t].fecha=this.diarios.fecha,this.diarios.debe=[],this.diarios.haber=[],this.diarios.comentario="",this.diarios.fecha="",this.diarios.ajustado=!1,this.totalDebe(),this.totalHaber(),this.limpiar(),$("#as-transaccion").modal("hide"))},agregarEdit:function(){var t={fecha:this.diario.haber.fecha,nom_cuenta:this.diario.haber.nom_cuenta,saldo:this.diario.haber.saldo};this.edit.haber.push(t),toastr.success("Activo agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.diario.haber.fecha="",this.diario.haber.nom_cuenta="",this.diario.haber.saldo=""},agregarEditPasivo:function(){var t={fecha:"",nom_cuenta:this.diario.debe.nom_cuenta,saldo:this.diario.debe.saldo};this.edit.debe.push(t),toastr.success("Activo agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo=""},haberEdit:function(t){var e=this.edit;this.cuentaindex=t,this.diario.haber.nom_cuenta=e.haber[t].nom_cuenta,this.diario.haber.saldo=e.haber[t].saldo,$("#haber_a").modal("show")},updateHaber:function(){var t=this.diario.haber.nom_cuenta,e=this.diario.haber.index,i=this.cuentas.filter((function(e){return e.id==t}));console.log(i);var a=this.diario.haber.saldo;if(1==i[0].porcentual){var o=this.valorPorcentual(i[0].porcentaje,a);this.diarios.haber[e].nom_cuenta=i[0].nombre,this.diarios.haber[e].saldo=o}else this.diarios.haber[e].cuenta_id=t,this.diarios.haber[e].nom_cuenta=i[0].nombre,this.diarios.haber[e].saldo=a;this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1},habediarioEdit:function(t){this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1,this.diario.haber.index=t;var e=this.diarios.haber[t].cuenta_id,i=this.cuentas.filter((function(t){return t.id==e}));console.log(i),1==i[0].porcentual?(this.diario.haber.nom_cuenta=e,this.diario.haber.saldo=""):(this.diario.haber.nom_cuenta=e,this.diario.haber.saldo=this.diarios.haber[t].saldo),this.diario.haber.edit=!0,$("#haber-asiento-tab").tab("show")},updateHaber1:function(){var t=this.cuentaindex;this.diarios.haber[t].nom_cuenta=this.diario.haber.nom_cuenta,this.diarios.haber[t].saldo=this.diario.haber.saldo,$("#haber_d").modal("hide"),this.diario.haber.nom_cuenta="",this.diario.haber.saldo=""},haberDelete:function(t){this.edit.haber.splice(t,1)},debediairoEdit:function(t){this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1,this.diario.debe.index=t;var e=this.diarios.debe[t].cuenta_id;""!==this.diarios.debe[t].fecha?this.diario.debe.fecha=this.diarios.debe[t].fecha:this.diario.debe.fecha="",1==this.cuentas.filter((function(t){return t.id==e}))[0].porcentual?(this.diario.debe.nom_cuenta=e,this.diario.debe.saldo=""):(this.diario.debe.nom_cuenta=e,this.diario.debe.saldo=this.diarios.debe[t].saldo),this.diario.debe.edit=!0,$("#debe-asiento-tab").tab("show")},cancelarEdicion:function(t){"debe"==t?(this.diario.debe.fecha="",this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1):(this.diario.haber.nom_cuenta="",this.diario.haber.saldo="",this.diario.haber.edit=!1)},updateDebe:function(){var t=this.diario.debe.nom_cuenta,e=this.diario.debe.index,i=this.cuentas.filter((function(e){return e.id==t}));console.log(i);var a=this.diario.debe.saldo;if(""!==this.diario.debe.fecha&&(this.diarios.debe[e].fecha=this.diario.debe.fecha),1==i[0].porcentual){var o=this.valorPorcentual(i[0].porcentaje,a);this.diarios.debe[e].nom_cuenta=i[0].nombre,this.diarios.debe[e].saldo=o}else this.diarios.debe[e].nom_cuenta=i[0].nombre,this.diarios.debe[e].saldo=a;this.diarios.debe[e].cuenta_id=t,""!==this.diario.debe.fecha&&(this.diario.debe.fecha=""),this.diario.debe.nom_cuenta="",this.diario.debe.saldo="",this.diario.debe.edit=!1},debeDelete:function(t){this.edit.debe.splice(t,1)},totalDebeBi:function(){var t=this.balanceInicial,e=0;t.debe.forEach((function(t,i){e+=Number(t.saldo)})),this.balanceInicial.totaldebe=e},totalHaberBi:function(){var t=this.balanceInicial,e=0;t.haber.forEach((function(t,i){e+=Number(t.saldo)})),this.balanceInicial.totalhaber=e},totalDebe:function(){this.pasan.debe=0;var t=this.registros,e=0;t.forEach((function(t,i){t.debe.forEach((function(t,i){e+=Number(t.saldo)}))})),this.pasan.debe=this.balanceInicial.totaldebe+e},totalHaber:function(){this.pasan.haber=0;var t=this.registros,e=0;t.forEach((function(t,i){t.haber.forEach((function(t,i){e+=Number(t.saldo)}))})),this.pasan.haber=this.balanceInicial.totalhaber+e},guardarDiario:function(){if(0==this.registros.length)toastr.error("No tienes registros para guardar","Smarmoddle",{timeOut:"3000"});else{var t=this;axios.post("/sistema/admin/taller/asiento-cierre",{id:t.id_taller,registro:t.registros,nombre:t.nombre,total_debe:t.pasan.debe,total_haber:t.pasan.haber}).then((function(e){0==e.data.success?toastr.error(e.data.message,"Smarmoddle",{timeOut:"3000"}):"act"==e.data.success?(toastr.success("Asiento de Cierre Actualizado Correctamente","Smarmoddle",{timeOut:"3000"}),s.obtenerDiarioGeneral(),s.obtenerAsientoCierre()):(toastr.success("Asiento de Cierre Creado Correctamente","Smarmoddle",{timeOut:"3000"}),t.dato=e.data,s.obtenerDiarioGeneral(),s.obtenerAsientoCierre())})).catch((function(t){}))}},obtenerAsientoCierre:function(){var t=this,e=this;axios.post("/sistema/admin/taller/asiento-cierre-obtener",{id:e.id_taller}).then((function(i){1==i.data.datos&&(e.registros=i.data.registros,e.nombre=i.data.nombre,t.totalDebe(),t.totalHaber(),toastr.success("Diairo General cargado Correctamente","Smarmoddle",{timeOut:"3000"}))})).catch((function(t){}))}}}),u=(new Vue({el:"#kardex",data:{id_taller:taller,exis:{cantidad:"",precio:"",total:""},producto:"",producto_id:"",productos:[],nombre:"",suman:{ingreso_cantidad:0,ingreso_total:0,egreso_cantidad:0,egreso_total:0,muestra:0},datos_transacciones:"",totales:{cantidad:"",precio:"",subtotal:"",total:""},prueba:{cantidad:{inventario_inicial:"",adquicisiones:"",ventas:"",inventario_final:""},precio:{inventario_inicial:"",adquicisiones:"",ventas:"",inventario_final:""}},ejercicio:[],actuingreso:{estado:!1,index:""},modales:{modal_ingreso:[],existencia_ingreso:!1,modal_devolucion_compra:[],modal_egreso:[],modal_devolucion_venta:[]},actuegreso:{estado:!1,index:"",tipo:!1},egresos:[],existencias:[],transacciones:[],update:!1,inicial:{fecha:"",movimiento:"",cantidad:"",precio:"",total:""},edit:{egreso:{cantidad:"",precio:"",total:"",temp:""}},movimientos:[],transaccion:{fecha:"",movimiento:"",ingreso:{cantidad:"",precio:"",total:""},egreso:{cantidad:"",precio:"",total:"",temp:"",edit:!1,add:!1,active:!1},existencia:{cantidad:"",precio:"",total:""},exis:{cantidad:"",precio:""}}},methods:{VueSweetAlert2:function(t,e){Swal.fire({html:'<div id="VueSweetAlert2"></div>',showConfirmButton:!1,showCloseButton:!0,heightAuto:!0,customClass:"swal-wide",willOpen:function(){var i=new(Vue.extend(Vue.component(t)))({propsData:e});i.$mount(),document.getElementById("VueSweetAlert2").appendChild(i.$el)}})},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},reverseFecha:function(t){return t.split("/").reverse().join("-")},sumasTotales:function(){var t=this.transacciones,e=0,i=0,a=0,o=0;t.forEach((function(t,i){t.forEach((function(t,i){var a=t.ingreso_cantidad;null!=a&&""!==a&&(e+=parseInt(a))}))})),this.suman.ingreso_cantidad=e,t.forEach((function(t,e){t.forEach((function(t,e){var a=t.ingreso_total;null!=a&&""!==a&&(i+=Number(a))}))})),this.suman.ingreso_total=i.toFixed(2),console.log(i),t.forEach((function(t,e){t.forEach((function(t,e){var i=t.egreso_cantidad;null!=i&&""!==i&&(a+=parseInt(i))}))})),this.suman.egreso_cantidad=a,t.forEach((function(t,e){t.forEach((function(t,e){var i=t.egreso_total;null!=i&&""!==i&&(o+=Number(i))}))})),this.suman.egreso_total=o.toFixed(2),console.log(i)},modalIngreso:function(){if(this.transacciones.length>=1){var t=JSON.parse(JSON.stringify(this.existencias)),e=JSON.parse(JSON.stringify(this.existencias));this.modales.modal_ingreso=t,this.modales.modal_devolucion_venta=e}$("#ingreso").modal("show")},modalInicial:function(){if(this.cerrarInicial(),this.transacciones.length>=1){var t=this.transacciones.length-1;console.log(this.transacciones[t]),this.movimientos=this.transacciones[t]}$("#saldo_inicial").modal("show")},modalEgreso:function(){if(this.transacciones.length>=1){var t=JSON.parse(JSON.stringify(this.existencias)),e=JSON.parse(JSON.stringify(this.existencias));this.modales.modal_egreso=t,this.modales.modal_devolucion_compra=e}$("#egreso").modal("show")},totalIng:function(t){var e=t,i=(this.totales.total,Number(this.ejercicio[e].ingreso_cantidad)),a=Number(this.ejercicio[e].ingreso_precio),o=(this.ejercicio[e].ingreso_total,i*a);this.ejercicio[e].ingreso_total=o.toFixed(2)},ventaIng:function(t){var e=t,i=(this.totales.total,Number(this.ejercicio[e].ingreso_cantidad)),a=Number(this.ejercicio[e].ingreso_precio),o=(this.ejercicio[e].ingreso_total,i*a);this.ejercicio[e].ingreso_total=o.toFixed(2)},actuaIng:function(t){var e=t,i=this.totales.total,a=Number(this.modales.modal_ingreso[e].ingreso_cantidad),o=Number(this.modales.modal_ingreso[e].ingreso_precio),s=(this.modales.modal_ingreso[e].ingreso_total,a*o);this.modales.modal_ingreso[e].ingreso_total=s.toFixed(2);var r=s+i;this.totales.subtotal=r,toastr.error("Datos Actualizado","Smarmoddle",{timeOut:"3000"})},actuaVenta:function(t){var e=t,i=this.totales.total,a=Number(this.modales.modal_devolucion_venta[e].ingreso_cantidad),o=Number(this.modales.modal_devolucion_venta[e].ingreso_precio),s=(this.modales.modal_devolucion_venta[e].ingreso_total,a*o);this.modales.modal_devolucion_venta[e].ingreso_total=s.toFixed(2);var r=s+i;this.totales.subtotal=r,toastr.error("Datos Actualizado","Smarmoddle",{timeOut:"3000"})},bajarExis:function(t){var e={identificador:this.transacciones.length+1,fecha:"",movimiento:"",tipo:"existencia",ingreso_cantidad:"",ingreso_precio:"",ingreso_total:"",egreso_cantidad:"",egreso_precio:"",egreso_total:"",existencia_cantidad:this.exis.cantidad,existencia_precio:this.exis.precio,existencia_total:""};this.modales.modal_ingreso.unshift(e),toastr.success("Agregado","Smarmoddle",{timeOut:"3000"}),this.exis.cantidad="",this.exis.precio="",this.modales.existencia_ingreso=!1},actuExiIng:function(t){var e={identificador:this.ejercicio[0].id,fecha:"",movimiento:"",tipo:"existencia",ingreso_cantidad:"",ingreso_precio:"",ingreso_total:"",egreso_cantidad:"",egreso_precio:"",egreso_total:"",existencia_cantidad:this.exis.cantidad,existencia_precio:this.exis.precio,existencia_total:""};this.ejercicio.unshift(e),toastr.success("Agregado","Smarmoddle",{timeOut:"3000"})},agregarTran:function(){if(""===this.inicial.fecha.trim()||""===this.inicial.movimiento.trim()||""===this.inicial.cantidad.trim()||""===this.inicial.precio.trim())toastr.error("Todos lo campos son obligatorios","Smarmoddle",{timeOut:"3000"});else{var t;this.inicial.total=Number(this.inicial.cantidad*this.inicial.precio).toFixed(2);var e=(a(t={tipo:"existencia",fecha:"",movimiento:""},"tipo","existencia"),a(t,"ingreso_cantidad",""),a(t,"ingreso_precio",""),a(t,"ingreso_total",""),a(t,"egreso_cantidad",""),a(t,"egreso_precio",""),a(t,"egreso_total",""),a(t,"existencia_cantidad",this.inicial.cantidad),a(t,"existencia_precio",this.inicial.precio),a(t,"existencia_total",""),t);this.existencias.push(e);var i=[],o={tipo:"inicial",fecha:this.inicial.fecha,movimiento:this.inicial.movimiento,ingreso_cantidad:"",ingreso_precio:"",egreso_total:"",egreso_cantidad:"",egreso_precio:"",ingreso_total:"",existencia_cantidad:this.inicial.cantidad,existencia_precio:this.inicial.precio,existencia_total:this.inicial.total};i.push(o),this.transacciones.unshift(i),toastr.success("Transaccion agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.totales.cantidad=this.inicial.cantidad,this.totales.precio=this.inicial.precio,this.totales.total=this.inicial.total,this.inicial.fecha="",this.inicial.movimiento="",this.inicial.cantidad="",this.inicial.precio="",$("#saldo_inicial").modal("hide")}this.sumasTotales(),this.ultimaExistencia()},ultimaExistencia:function(){var t=this.transacciones.length,e=this.transacciones.length-1;if(t>=1){var i=this.transacciones[e].filter((function(t){return""!==t.existencia_cantidad&&null!==t.existencia_cantidad||""!==t.existencia_precio&&null!==t.existencia_precio})),o=[];i.forEach((function(t,e){var i,s=(a(i={tipo:"existencia",fecha:"",movimiento:""},"tipo","existencia"),a(i,"ingreso_cantidad",""),a(i,"ingreso_precio",""),a(i,"ingreso_total",""),a(i,"egreso_cantidad",""),a(i,"egreso_precio",""),a(i,"egreso_total",""),a(i,"existencia_cantidad",t.existencia_cantidad),a(i,"existencia_precio",t.existencia_precio),a(i,"existencia_total",""),i);o.push(s)})),console.log(this.transacciones[e]),this.existencias=JSON.parse(JSON.stringify(o))}else this.existencias=[]},cerrarInicial:function(){this.update=!1,this.inicial.fecha="",this.inicial.movimiento="",this.inicial.cantidad="",this.inicial.precio="",this.inicial.fecha="",this.inicial.movimiento="",this.inicial.cantidad="",this.inicial.precio=""},actualizarInicial:function(){if(""===this.inicial.fecha.trim()||""===this.inicial.movimiento.trim()||""===this.inicial.cantidad.trim()||""===this.inicial.precio.trim())toastr.error("Todos lo campos son obligatorios","Smarmoddle",{timeOut:"3000"});else{this.transacciones[0][0].fecha=this.inicial.fecha,this.transacciones[0][0].movimiento=this.inicial.movimiento,this.transacciones[0][0].existencia_cantidad=this.inicial.cantidad,this.transacciones[0][0].existencia_precio=this.inicial.precio;JSON.parse(JSON.stringify(this.inicial.total));var t=Number(this.inicial.cantidad)*Number(this.inicial.precio);this.inicial.total=t,this.transacciones[0][0].existencia_total=t.toFixed(2);this.transacciones.length;this.totales.cantidad=this.inicial.cantidad,this.totales.precio=this.inicial.precio,this.update=!1,this.inicial.fecha="",this.inicial.movimiento="",this.inicial.cantidad="",this.inicial.precio="",$("#saldo_inicial").modal("hide"),this.ultimaExistencia()}},agregarIngreso:function(){if(""===this.transaccion.fecha.trim()||""===this.transaccion.movimiento.trim()||""===this.transaccion.ingreso.cantidad.trim()||""===this.transaccion.ingreso.precio.trim())toastr.error("Todos los campos son obligatorios","Smarmoddle",{timeOut:"3000"});else{var t=this.transacciones.length+1;this.transaccion.ingreso.total=Number(this.transaccion.ingreso.cantidad*this.transaccion.ingreso.precio).toFixed(2);Number(this.transaccion.ingreso.total+this.totales.total);var e={identificador:t,tipo:"ingreso",fecha:this.transaccion.fecha,movimiento:this.transaccion.movimiento,ingreso_cantidad:this.transaccion.ingreso.cantidad,ingreso_precio:this.transaccion.ingreso.precio,ingreso_total:this.transaccion.ingreso.total,egreso_cantidad:"",egreso_precio:"",egreso_total:"",existencia_cantidad:this.transaccion.existencia.cantidad,existencia_precio:this.transaccion.existencia.precio,existencia_total:""};this.modales.modal_ingreso.push(e),toastr.success("Transaccion agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.transaccion.fecha="",this.transaccion.movimiento="",this.transaccion.ingreso.cantidad="",this.transaccion.ingreso.precio="",this.transaccion.ingreso.cantidad="",this.transaccion.ingreso.precio="",this.transaccion.exis.cantidad=this.transaccion.existencia.cantidad,this.transaccion.exis.precio=this.transaccion.existencia.precio,this.transaccion.existencia.cantidad="",this.transaccion.existencia.precio=""}},borrarIngreso:function(t,e){var i=t;"ingreso"!=e?"venta"==e?("ingreso_venta"==this.modales.modal_devolucion_venta[i].tipo||"existencia"==this.modales.modal_devolucion_venta[i].tipo)&&this.modales.modal_devolucion_venta.splice(t,1):("ingreso"==this.modales.modal_ingreso[i].tipo||"existencia"==this.modales.modal_ingreso[i].tipo)&&this.modales.modal_ingreso.splice(t,1):"ingreso"==this.ejercicio[t].tipo||"ingreso_venta"==this.ejercicio[t].tipo?console.log("Si eliminas este ingreso se borrara el movimiento"):this.ejercicio.splice(t,1)},agregarTransaccion:function(t){if("ingreso"==t){if(0==this.modales.modal_ingreso.filter((function(t){return"ingreso"==t.tipo})).length)return void toastr.error("No puedes enviar solo existencias","Smarmoddle",{timeOut:"3000"});var e=this.modales.modal_ingreso.filter((function(t){return"ingreso"==t.tipo})),i=(this.transacciones.length,this.modales.modal_ingreso.filter((function(t){return"existencia"==t.tipo}))),o={tipo:"existencia",fecha:"",movimiento:"",ingreso_cantidad:"",ingreso_precio:"",ingreso_total:"",egreso_cantidad:"",egreso_precio:"",egreso_total:"",existencia_cantidad:e[0].existencia_cantidad,existencia_precio:e[0].existencia_precio,existencia_total:""};i.push(o),this.existencias=JSON.parse(JSON.stringify(i));var s=0;i.forEach((function(t,e){var i=t.existencia_cantidad,a=t.existencia_precio,o=Number(i)*Number(a);s+=Number(o)}));var r=this.modales.modal_ingreso.length-1;this.modales.modal_ingreso[r].existencia_total=s.toFixed(2),this.transacciones.push(this.modales.modal_ingreso),this.modales.modal_ingreso=[],this.totales.total=s,console.log(s),this.suman.muestra=s,this.transaccion.ingreso.total="",$("#ingreso").modal("hide"),this.sumasTotales(),this.ultimaExistencia()}else{var n;if(0==this.modales.modal_devolucion_venta.filter((function(t){return"ingreso_venta"==t.tipo})).length)return void toastr.error("No puedes enviar solo existencias","Smarmoddle",{timeOut:"3000"});var c=this.modales.modal_devolucion_venta.filter((function(t){return"ingreso_venta"==t.tipo})),d=this.transacciones.length+1,l=this.modales.modal_devolucion_venta.filter((function(t){return"existencia"==t.tipo})),h=(a(n={identificador:d,tipo:"existencia",fecha:"",movimiento:""},"tipo","existencia"),a(n,"ingreso_cantidad",""),a(n,"ingreso_precio",""),a(n,"ingreso_total",""),a(n,"egreso_cantidad",""),a(n,"egreso_precio",""),a(n,"egreso_total",""),a(n,"existencia_cantidad",c[0].existencia_cantidad),a(n,"existencia_precio",c[0].existencia_precio),a(n,"existencia_total",""),n);l.unshift(h),this.existencias=JSON.parse(JSON.stringify(l));var u=0;l.forEach((function(t,e){var i=t.existencia_cantidad,a=t.existencia_precio,o=Number(i)*Number(a);u+=Number(o)}));var m=this.modales.modal_devolucion_venta.length-1;this.modales.modal_devolucion_venta[m].existencia_total=u.toFixed(2),this.totales.total=u,console.log(u),this.transacciones.push(this.modales.modal_devolucion_venta),this.modales.modal_devolucion_venta=[],this.transaccion.ingreso.cantidad="",this.transaccion.ingreso.precio="",this.transaccion.ingreso.total="",$("#ingreso").modal("hide"),this.sumasTotales(),this.ultimaExistencia()}},editarTransaccion:function(t,e){if("inicial"==this.transacciones[t][e].tipo)this.update=!0,this.inicial.fecha=this.transacciones[t][e].fecha,this.inicial.movimiento=this.transacciones[t][e].movimiento,this.inicial.cantidad=this.transacciones[t][e].existencia_cantidad,this.inicial.precio=this.transacciones[t][e].existencia_precio,$("#saldo_inicial").modal("show");else if("ingreso"==this.transacciones[t][e].tipo){this.actuingreso.index=t,this.actuingreso.estado=!0,this.actuegreso.estado=!1;var i=JSON.parse(JSON.stringify(this.transacciones[t]));this.ejercicio=i}else if("egreso"==this.transacciones[t][e].tipo){this.actuegreso.index=t,this.actuegreso.estado=!0,this.actuingreso.estado=!1,this.actuegreso.tipo=!0;var a=JSON.parse(JSON.stringify(this.transacciones[t]));this.egresos=a}else if("ingreso_venta"==this.transacciones[t][e].tipo){this.actuingreso.index=t,this.actuingreso.estado=!0,this.actuegreso.estado=!1;var o=JSON.parse(JSON.stringify(this.transacciones[t]));this.ejercicio=o}else if("egreso_compra"==this.transacciones[t][e].tipo){this.actuegreso.index=t,this.actuegreso.estado=!0,this.actuingreso.estado=!1;var s=JSON.parse(JSON.stringify(this.transacciones[t]));this.egresos=s}},cancelarActualizacion:function(t){"egresos"==t?(this.actuegreso.index="",this.actuegreso.estado=!1,this.actuegreso.tipo=!1,this.egresos=[]):"ingresos"==t&&(this.actuingreso.index="",this.actuingreso.estado=!1,this.ejercicio=[])},actualizarIngreso:function(){var t,e=this.ejercicio.filter((function(t){return"ingreso"==t.tipo||"ingreso_venta"==t.tipo})),i=this.transacciones.length+1,o=Number(e[0].ingreso_cantidad*e[0].ingreso_precio).toFixed(2);e[0].ingreso_total=o;var s=this.ejercicio.filter((function(t){return"existencia"==t.tipo})),r=(a(t={identificador:i,tipo:"existencia",fecha:"",movimiento:""},"tipo","existencia"),a(t,"ingreso_cantidad",""),a(t,"ingreso_precio",""),a(t,"ingreso_total",""),a(t,"egreso_cantidad",""),a(t,"egreso_precio",""),a(t,"egreso_total",""),a(t,"existencia_cantidad",e[0].existencia_cantidad),a(t,"existencia_precio",e[0].existencia_precio),a(t,"existencia_total",""),t);s.push(r);var n=0;s.forEach((function(t,e){var i=t.existencia_cantidad,a=t.existencia_precio,o=Number(i)*Number(a);n+=Number(o)}));var c=this.ejercicio.length-1;this.ejercicio[c].existencia_total=n.toFixed(2);var d=this.actuingreso.index;this.transacciones[d]=this.ejercicio,this.ejercicio=[],this.actuingreso.estado=!1,this.actuingreso.index="",this.sumasTotales(),this.ultimaExistencia()},nuevoEgreso:function(t){if("agregar"==t)this.transaccion.egreso.add=!0;else if("cerrar"==t)this.transaccion.egreso.add=!1;else if("crear"==t)if(""===this.edit.egreso.cantidad.trim()||""===this.edit.egreso.precio.trim())toastr.error("Todos lo campos son obligatorios","Smarmoddle",{timeOut:"3000"});else{var e=this.modales.modal_egreso.filter((function(t){return"egreso"==t.tipo})),i=this.transacciones.length+1,a=e.length-1;this.edit.egreso.total=Number(this.edit.egreso.cantidad*this.edit.egreso.precio);var o={identificacion:i,tipo:"egreso",fecha:"",movimiento:"",egreso_cantidad:this.edit.egreso.cantidad,egreso_precio:this.edit.egreso.precio,egreso_total:this.edit.egreso.total,existencia_cantidad:this.transaccion.existencia.cantidad,existencia_precio:this.transaccion.existencia.precio,existencia_total:""};this.modales.modal_egreso.splice(a+1,0,o),this.edit.egreso.cantidad="",this.edit.egreso.precio="",this.edit.egreso.total="",this.transaccion.egreso.add=!1}},agregarEgreso:function(t){if(""===this.transaccion.egreso.cantidad.trim()||""===this.transaccion.egreso.precio.trim())toastr.error("Todos lo campos son obligatorios","Smarmoddle",{timeOut:"3000"});else{if("compra"==t){var e,i=this.transacciones.length+1;this.transaccion.egreso.total=Number(this.transaccion.egreso.cantidad*this.transaccion.egreso.precio).toFixed(2);Number(this.totales.total),Number(this.transaccion.egreso.total);var o=(a(e={identificacion:i,fecha:"",movimiento:"",tipo:"egreso_compra"},"fecha",this.transaccion.fecha),a(e,"movimiento",this.transaccion.movimiento),a(e,"ingreso_cantidad",""),a(e,"ingreso_precio",""),a(e,"ingreso_total",""),a(e,"egreso_cantidad",this.transaccion.egreso.cantidad),a(e,"egreso_precio",this.transaccion.egreso.precio),a(e,"egreso_total",this.transaccion.egreso.total),a(e,"existencia_cantidad",this.transaccion.existencia.cantidad),a(e,"existencia_precio",this.transaccion.existencia.precio),a(e,"existencia_total",""),e);return this.modales.modal_devolucion_compra.push(o),toastr.success("Transaccion agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.exis.cantidad="",this.exis.precio="",this.transaccion.fecha="",this.transaccion.movimiento="",this.transaccion.egreso.cantidad="",this.transaccion.egreso.precio="",this.transaccion.egreso.total="",this.transaccion.existencia.cantidad="",void(this.transaccion.existencia.precio="")}var s=this.modales.modal_egreso.filter((function(t){return"egreso"==t.tipo})),r=this.transacciones.length+1;if(0==s.length){var n;this.transaccion.egreso.total=Number(this.transaccion.egreso.cantidad*this.transaccion.egreso.precio).toFixed(2);Number(this.totales.total),Number(this.transaccion.egreso.total);var c=(a(n={identificacion:r,fecha:"",movimiento:"",tipo:"egreso"},"fecha",this.transaccion.fecha),a(n,"movimiento",this.transaccion.movimiento),a(n,"ingreso_cantidad",""),a(n,"ingreso_precio",""),a(n,"ingreso_total",""),a(n,"egreso_cantidad",this.transaccion.egreso.cantidad),a(n,"egreso_precio",this.transaccion.egreso.precio),a(n,"egreso_total",this.transaccion.egreso.total),a(n,"existencia_cantidad",this.transaccion.existencia.cantidad),a(n,"existencia_precio",this.transaccion.existencia.precio),a(n,"existencia_total",""),n);this.modales.modal_egreso.unshift(c),toastr.success("Transaccion agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.exis.cantidad="",this.exis.precio="",this.transaccion.fecha="",this.transaccion.movimiento="",this.transaccion.egreso.cantidad="",this.transaccion.egreso.precio="",this.transaccion.egreso.total="",this.transaccion.existencia.cantidad="",this.transaccion.existencia.precio="",this.transaccion.egreso.active=!0}else{var d,l=this.modales.modal_egreso.filter((function(t){return"egreso"==t.tipo})).length-1,h=Number(this.modales.modal_egreso[l].existencia_total);this.transaccion.egreso.total=Number(this.transaccion.egreso.cantidad*this.transaccion.egreso.precio).toFixed(2);Number(this.transaccion.egreso.total);var u=(a(d={identificacion:r,fecha:"",movimiento:"",tipo:"egreso"},"fecha",this.transaccion.fecha),a(d,"movimiento",this.transaccion.movimiento),a(d,"ingreso_cantidad",""),a(d,"ingreso_precio",""),a(d,"ingreso_total",""),a(d,"egreso_cantidad",this.transaccion.egreso.cantidad),a(d,"egreso_precio",this.transaccion.egreso.precio),a(d,"egreso_total",this.transaccion.egreso.total),a(d,"existencia_cantidad",this.transaccion.existencia.cantidad),a(d,"existencia_precio",this.transaccion.existencia.precio),a(d,"existencia_total",""),d);this.modales.modal_egreso.splice(l+1,0,u),toastr.success("Transaccion agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.exis.cantidad="",this.exis.precio="",this.transaccion.fecha="",this.transaccion.movimiento="",this.transaccion.egreso.cantidad="",this.transaccion.egreso.precio="",this.transaccion.egreso.total="",this.transaccion.existencia.cantidad="",this.transaccion.existencia.precio=""}}},agregarEgresoNew:function(t){if(""===this.transaccion.egreso.cantidad.trim()||""===this.transaccion.egreso.precio.trim())toastr.error("Cantidad y Precio son obligatorios","Smarmoddle",{timeOut:"3000"});else{this.transacciones;var e,i=this.actuegreso.index,o=this.egresos.length-1;this.transaccion.egreso.total=Number(this.transaccion.egreso.cantidad*this.transaccion.egreso.precio).toFixed(2);var s=(a(e={identificacion:i,fecha:"",movimiento:"",tipo:"egreso"},"fecha",this.transaccion.fecha),a(e,"movimiento",this.transaccion.movimiento),a(e,"ingreso_cantidad",""),a(e,"ingreso_precio",""),a(e,"ingreso_total",""),a(e,"egreso_cantidad",this.transaccion.egreso.cantidad),a(e,"egreso_precio",this.transaccion.egreso.precio),a(e,"egreso_total",this.transaccion.egreso.total),a(e,"existencia_cantidad",this.transaccion.existencia.cantidad),a(e,"existencia_precio",this.transaccion.existencia.precio),a(e,"existencia_total",""),e);this.egresos.splice(o+1,0,s),this.transaccion.egreso.edit=!1,toastr.success("Transaccion agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.exis.cantidad="",this.exis.precio="",this.transaccion.fecha="",this.transaccion.movimiento="",this.transaccion.egreso.cantidad="",this.transaccion.egreso.precio="",this.transaccion.egreso.total="",this.transaccion.existencia.cantidad="",this.transaccion.existencia.precio=""}},existenciaEgreso:function(t){var e={identificador:this.transacciones.length+1,fecha:"",movimiento:"",tipo:"existencia",ingreso_cantidad:"",ingreso_precio:"",ingreso_total:"",egreso_cantidad:"",egreso_precio:"",egreso_total:"",existencia_cantidad:this.exis.cantidad,existencia_precio:this.exis.precio,existencia_total:""};"compra"==t?this.modales.modal_devolucion_compra.unshift(e):this.modales.modal_egreso.push(e),toastr.success("Agregado","Smarmoddle",{timeOut:"3000"}),this.exis.cantidad="",this.exis.precio="",this.modales.existencia_ingreso=!1},exisEgresoAct:function(t){var e={identificador:this.transacciones.length+1,tipo:"existencia",fecha:"",movimiento:"",ingreso_cantidad:"",ingreso_precio:"",ingreso_total:"",egreso_cantidad:"",egreso_precio:"",egreso_total:"",existencia_cantidad:this.exis.cantidad,existencia_precio:this.exis.precio,existencia_total:""};"compra"==t?this.egresos.unshift(e):this.egresos.push(e),toastr.success("Agregado","Smarmoddle",{timeOut:"3000"}),this.exis.cantidad="",this.exis.precio="",this.modales.existencia_ingreso=!1},agregarEgresos:function(){var t=this.modales.modal_egreso.filter((function(t){return"egreso"==t.tipo})),e=t.length-1,i=(JSON.parse(JSON.stringify(t[e].existencia_total)),this.transacciones.length+1),o=this.modales.modal_egreso.filter((function(t){return"existencia"==t.tipo}));this.modales.modal_egreso.filter((function(t){return"existencia"==t.tipo}));this.modales.modal_egreso.filter((function(t){return"egreso"==t.tipo&&t.existencia_cantidad>0&&""!==t.existencia_cantidad})).forEach((function(t,e){var s,r=(a(s={identificador:i,tipo:"existencia",fecha:"",movimiento:""},"tipo","existencia"),a(s,"ingreso_cantidad",""),a(s,"ingreso_precio",""),a(s,"ingreso_total",""),a(s,"egreso_cantidad",""),a(s,"egreso_precio",""),a(s,"egreso_total",""),a(s,"existencia_cantidad",t.existencia_cantidad),a(s,"existencia_precio",t.existencia_precio),a(s,"existencia_total",""),s);o.unshift(r)})),this.existencias=JSON.parse(JSON.stringify(o));var s=0;o.forEach((function(t,e){var i=t.existencia_cantidad,a=t.existencia_precio,o=Number(i)*Number(a);s+=Number(o)}));var r=this.modales.modal_egreso.length-1;this.modales.modal_egreso[r].existencia_total=s.toFixed(2),this.totales.total=s,console.log(s),this.transacciones.push(this.modales.modal_egreso),this.modales.modal_egreso=[],$("#egreso").modal("hide"),this.transaccion.fecha="",this.transaccion.movimiento="",this.transaccion.egreso.cantidad="",this.transaccion.egreso.precio="",this.transaccion.egreso.total="",this.sumasTotales(),this.ultimaExistencia()},agregarDevolucionCompra:function(){var t=this.modales.modal_devolucion_compra.filter((function(t){return"egreso_compra"==t.tipo})),e=t.length-1,i=(JSON.parse(JSON.stringify(t[e].existencia_total)),this.transacciones.length+1),o=this.modales.modal_devolucion_compra.filter((function(t){return"existencia"==t.tipo}));this.modales.modal_devolucion_compra.filter((function(t){return"existencia"==t.tipo}));this.modales.modal_devolucion_compra.filter((function(t){return"egreso_compra"==t.tipo&&t.existencia_cantidad>0})).forEach((function(t,e){var s,r=(a(s={identificador:i,tipo:"existencia",fecha:"",movimiento:""},"tipo","existencia"),a(s,"ingreso_cantidad",""),a(s,"ingreso_precio",""),a(s,"ingreso_total",""),a(s,"egreso_cantidad",""),a(s,"egreso_precio",""),a(s,"egreso_total",""),a(s,"existencia_cantidad",t.existencia_cantidad),a(s,"existencia_precio",t.existencia_precio),a(s,"existencia_total",""),s);o.push(r)}));var s=0;o.forEach((function(t,e){var i=t.existencia_cantidad,a=t.existencia_precio,o=Number(i)*Number(a);s+=Number(o)}));var r=this.modales.modal_devolucion_compra.length-1;this.modales.modal_devolucion_compra[r].existencia_total=s.toFixed(2),this.totales.total=s,console.log(s),this.existencias=JSON.parse(JSON.stringify(o)),this.transacciones.push(this.modales.modal_devolucion_compra),this.modales.modal_devolucion_compra=[],$("#egreso").modal("hide"),this.transaccion.fecha="",this.transaccion.movimiento="",this.transaccion.egreso.cantidad="",this.transaccion.egreso.precio="",this.transaccion.egreso.total="",this.sumasTotales(),this.ultimaExistencia()},actualEgre:function(t,e){if("devolucion_compra"!=e){var i=t;this.totales.total;if(this.modales.modal_egreso.filter((function(t){return"egreso"==t.tipo})).length>=1){var a=Number(this.modales.modal_egreso[i].egreso_cantidad),o=Number(this.modales.modal_egreso[i].egreso_precio),s=(this.modales.modal_egreso[i].egreso_total,a*o);this.modales.modal_egreso[i].egreso_total=s.toFixed(2)}}else{var r=t,n=(this.totales.total,this.modales.modal_devolucion_compra.filter((function(t){return"egreso_compra"==t.tipo}))),c=n.length-1,d=Number(n[c].existencia_total),l=Number(this.modales.modal_devolucion_compra[r].egreso_cantidad),h=Number(this.modales.modal_devolucion_compra[r].egreso_precio),u=this.modales.modal_devolucion_compra[r].egreso_total,m=l*h;if(this.modales.modal_devolucion_compra[r].egreso_total=m.toFixed(2),u>m){var _=d+(u-m);this.totales.subtotal=_}else{var b=d-(m-u);this.totales.subtotal=b}toastr.error("Datos Actualizado","Smarmoddle",{timeOut:"3000"})}},totaEgre:function(t){var e=t,i=(this.totales.total,Number(this.egresos[e].egreso_cantidad)),a=Number(this.egresos[e].egreso_precio),o=(this.egresos[e].egreso_total,i*a);this.egresos[e].egreso_total=o.toFixed(2)},ActualizarEgresos:function(){var t=[],e=this.egresos.filter((function(t){return"egreso"==t.tipo&&t.existencia_cantidad>0&""!==t.existencia_cantidad||"egreso_compra"==t.tipo&&t.existencia_cantidad>0&""!==t.existencia_cantidad}));e.forEach((function(e,i){var o,s=(a(o={tipo:"existencia",fecha:"",movimiento:""},"tipo","existencia"),a(o,"ingreso_cantidad",""),a(o,"ingreso_precio",""),a(o,"ingreso_total",""),a(o,"egreso_cantidad",""),a(o,"egreso_precio",""),a(o,"egreso_total",""),a(o,"existencia_cantidad",e.existencia_cantidad),a(o,"existencia_precio",e.existencia_precio),a(o,"existencia_total",""),o);t.push(s)})),console.log(t+"inu"),e.forEach((function(t,i){var a=t.egreso_cantidad,o=t.egreso_precio,s=Number(a*o);e[i].egreso_total=s.toFixed(2)}));var i=this.egresos.filter((function(t){return"existencia"==t.tipo}));i.length>=1?(filtro_existencias=t.concat(i),console.log("filtros")):(console.log(t),filtro_existencias=t);var o=0;this.existencias=JSON.parse(JSON.stringify(filtro_existencias)),filtro_existencias.forEach((function(t,e){var i=t.existencia_cantidad,a=t.existencia_precio,s=Number(i)*Number(a);o+=Number(s)}));var s=this.egresos.length-1;this.egresos[s].existencia_total=o.toFixed(2);var r=this.actuegreso.index;this.transacciones[r]=this.egresos,this.egresos=[],this.actuegreso.estado=!1,this.actuegreso.tipo=!1,this.actuegreso.index="",this.sumasTotales(),this.ultimaExistencia()},borrarEgresoAct:function(t,e){this.transacciones,this.actuegreso.index;var i=t,a=this.modales.modal_devolucion_compra.length-1;if("existencia"!=e)if("egreso_compra"!=e){var o=this.egresos.filter((function(t){return"egreso"==t.tipo}));"existencia"==this.egresos[i].tipo&&this.egresos[i].existencia_total>0||"existencia"==this.egresos[i].tipo&&""==this.egresos[i].existencia_total?this.egresos.splice(t,1):"egreso"==this.egresos[i].tipo&&1==o.length?console.log("No puede eliminar todos los egresos"):("egreso"==this.egresos[i].tipo&&this.egresos[i].existencia_total>0||"egreso"==this.egresos[i].tipo&&""==this.egresos[i].existencia_total)&&this.egresos.splice(t,1)}else"existencia"==this.modales.egresos[i].tipo?this.modales.egresos.splice(t,1):i==a&&"egreso_compra"==this.modales.egresos[i].tipo&&console.log("No puede eliminar todos los egresos");else"existencia"==this.egresos[t].tipo&&this.egresos.splice(t,1)},borrarEgreso:function(t,e){var i=t,a=this.modales.modal_devolucion_compra.length-1;if("egreso_compra"!=e){this.modales.modal_egreso.filter((function(t){return"egreso"==t.tipo}));("existencia"==this.modales.modal_egreso[i].tipo||"egreso"==this.modales.modal_egreso[i].tipo)&&this.modales.modal_egreso.splice(t,1)}else if("existencia"==this.modales.modal_devolucion_compra[i].tipo)this.modales.modal_devolucion_compra.splice(t,1);else if(i==a&&"egreso_compra"==this.modales.modal_devolucion_compra[i].tipo){this.modales.modal_devolucion_compra[i].existencia_total;this.modales.modal_devolucion_compra.splice(t,1)}},agregarDevolucion:function(){if(""===this.transaccion.fecha.trim()||""===this.transaccion.movimiento.trim()||""===this.transaccion.ingreso.cantidad.trim()||""===this.transaccion.ingreso.precio.trim())toastr.error("Todos los campos son obligatorios","Smarmoddle",{timeOut:"3000"});else{var t,e=this.transacciones.length+1;this.transaccion.ingreso.total=Number(this.transaccion.ingreso.cantidad*this.transaccion.ingreso.precio).toFixed(2);Number(this.transaccion.ingreso.total),Number(this.totales.total);var i=(a(t={identificador:e,fecha:"",movimiento:"",tipo:"ingreso_venta"},"fecha",this.transaccion.fecha),a(t,"movimiento",this.transaccion.movimiento),a(t,"ingreso_cantidad",this.transaccion.ingreso.cantidad),a(t,"ingreso_precio",this.transaccion.ingreso.precio),a(t,"ingreso_total",this.transaccion.ingreso.total),a(t,"egreso_cantidad",""),a(t,"egreso_precio",""),a(t,"egreso_total",""),a(t,"existencia_cantidad",this.transaccion.existencia.cantidad),a(t,"existencia_precio",this.transaccion.existencia.precio),a(t,"existencia_total",""),t);this.modales.modal_devolucion_venta.unshift(i),toastr.success("Transaccion agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.transaccion.exis.cantidad=this.transaccion.existencia.cantidad,this.transaccion.exis.precio=this.transaccion.existencia.precio,this.transaccion.fecha="",this.transaccion.movimiento="",this.transaccion.ingreso.cantidad="",this.transaccion.ingreso.precio="",this.transaccion.ingreso.total="",this.transaccion.existencia.precio="",this.transaccion.existencia.cantidad=""}},existenciaVenta:function(){var t=this.transacciones.length+1,e=this.modales.modal_devolucion_venta.length-1,i=(this.modales.modal_devolucion_venta[e].existencia_total,{identificador:t,fecha:"",movimiento:"",tipo:"existencia",ingreso_cantidad:"",ingreso_precio:"",ingreso_total:"",egreso_cantidad:"",egreso_precio:"",egreso_total:"",existencia_cantidad:this.exis.cantidad,existencia_precio:this.exis.precio,existencia_total:""});this.modales.modal_devolucion_venta.push(i),this.modales.modal_devolucion_venta[e].existencia_total="",toastr.success("Agregado","Smarmoddle",{timeOut:"3000"}),this.exis.cantidad="",this.exis.precio="",this.transaccion.fecha="",this.transaccion.movimiento="",this.transaccion.ingreso.cantidad="",this.transaccion.ingreso.precio="",this.transaccion.ingreso.total=""},agregarNewEgreso:function(t){"agregar"==t?this.transaccion.egreso.edit=!0:(this.transaccion.egreso.edit=!1,this.transaccion.egreso.cantidad="",this.transaccion.egreso.precio="")},guardarKardex:function(){if(0==this.transacciones.length)toastr.error("Debe haber al menos un registro en el Kardex","Smarmoddle",{timeOut:"3000"});else if(""===this.nombre.trim()||""===this.producto.trim())toastr.error("Nombre & Producto es Obligatorio","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/kardex-fifo",{id:this.id_taller,nombre:this.nombre,producto_id:this.producto_id,producto:this.producto,kardex_fifo:this.transacciones,inv_inicial_cantidad:this.prueba.cantidad.inventario_inicial,adquisicion_cantidad:this.prueba.cantidad.adquicisiones,ventas_cantidad:this.prueba.cantidad.ventas,inv_final_cantidad:this.prueba.cantidad.inventario_final,inv_inicial_precio:this.prueba.precio.inventario_inicial,adquisicion_precio:this.prueba.precio.adquicisiones,ventas_precio:this.prueba.precio.ventas,inv_final_precio:this.prueba.precio.inventario_final}).then((function(t){"guardado"==t.data.estado?toastr.success("Kardex creado correctamente","Smarmoddle",{timeOut:"3000"}):"actualizado"==t.data.estado&&toastr.warning("kardex actualizado correctamente","Smarmoddle",{timeOut:"3000"})})).catch((function(t){}))}},obtenerKardexFifo:function(){var t=this,e=this;axios.post("/sistema/admin/taller/kardex-obtener-fifo",{id:e.id_taller,producto_id:e.producto_id}).then((function(i){1==i.data.datos?(toastr.info("Kardex Fifo cargado correctamente","Smarmoddle",{timeOut:"3000"}),e.transacciones=i.data.kardex_fifo,e.nombre=i.data.informacion.nombre,e.producto=i.data.informacion.producto,e.prueba.cantidad.inventario_inicial=i.data.informacion.inv_inicial_cantidad,e.prueba.cantidad.adquicisiones=i.data.informacion.adquisicion_cantidad,e.prueba.cantidad.ventas=i.data.informacion.ventas_cantidad,e.prueba.cantidad.inventario_final=i.data.informacion.inv_final_cantidad,e.prueba.precio.inventario_inicial=i.data.informacion.inv_inicial_precio,e.prueba.precio.adquicisiones=i.data.informacion.adquisicion_precio,e.prueba.precio.ventas=i.data.informacion.ventas_precio,e.prueba.precio.inventario_final=i.data.informacion.inv_final_precio,e.datos_transacciones=i.data.transacciones.transacciones,console.log("nO SE RECIBIO NADA"),t.sumasTotales(),t.ultimaExistencia()):0==i.data.datos&&(e.transacciones=[],e.nombre="",e.producto="",e.prueba.cantidad.inventario_inicial="",e.prueba.cantidad.adquicisiones="",e.prueba.cantidad.ventas="",e.prueba.cantidad.inventario_final="",e.prueba.precio.inventario_inicial="",e.prueba.precio.adquicisiones="",e.prueba.precio.ventas="",e.prueba.precio.inventario_final="",e.datos_transacciones=i.data.transacciones.transacciones,t.sumasTotales(),t.ultimaExistencia())})).catch((function(t){}))},borrarTransaccion:function(t,e){var i=this;Swal.fire({title:"Seguro que deseas eliminar este registro??",text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(e){if(e.isConfirmed)if(Swal.fire("Eliminado!","El Registro se elimino","success"),i.transacciones.length-1==t){if(i.transacciones.splice(t,1),0==i.transacciones.length)return i.sumasTotales(),void i.ultimaExistencia();var a=i.transacciones.length-1,o=JSON.parse(JSON.stringify(i.transacciones[a]));if(o.filter((function(t){return"ingreso"==t.tipo})).length>=1){var s=o.filter((function(t){return"ingreso"==t.tipo})),r=o.filter((function(t){return"existencia"==t.tipo})),n={tipo:"existencia",existencia_cantidad:s[0].existencia_cantidad,existencia_precio:s[0].existencia_precio};return r.push(n),i.existencias=JSON.parse(JSON.stringify(r)),i.sumasTotales(),void i.ultimaExistencia()}if(o.filter((function(t){return"egreso"==t.tipo})).length>=1){var c=o.filter((function(t){return"existencia"==t.tipo}));return o.filter((function(t){return"egreso"==t.tipo&&t.existencia_cantidad>0})).forEach((function(t,e){var i={tipo:"existencia",existencia_cantidad:t.existencia_cantidad,existencia_precio:t.existencia_precio,existencia_total:""};c.unshift(i)})),i.existencias=JSON.parse(JSON.stringify(c)),i.sumasTotales(),void i.ultimaExistencia()}if(o.filter((function(t){return"egreso_compra"==t.tipo})).length>=1){o.filter((function(t){return"egreso_compra"==t.tipo}));var d=o.filter((function(t){return"existencia"==t.tipo}));return o.filter((function(t){return"egreso_compra"==t.tipo&&t.existencia_cantidad>0})).forEach((function(t,e){var i={tipo:"existencia",existencia_cantidad:t.existencia_cantidad,existencia_precio:t.existencia_precio,existencia_total:""};d.push(i)})),i.existencias=JSON.parse(JSON.stringify(d)),i.sumasTotales(),void i.ultimaExistencia()}if(o.filter((function(t){return"ingreso_venta"==t.tipo})).length>=1){var l=o.filter((function(t){return"ingreso_venta"==t.tipo})),h=o.filter((function(t){return"existencia"==t.tipo})),u={tipo:"existencia",existencia_cantidad:l[0].existencia_cantidad,existencia_precio:l[0].existencia_precio};return h.unshift(u),i.existencias=JSON.parse(JSON.stringify(h)),i.sumasTotales(),void i.ultimaExistencia()}if(o.filter((function(t){return"inicial"==t.tipo})).length>=1)return i.existencias=[],i.sumasTotales(),void i.ultimaExistencia()}else i.transacciones.splice(t,1),i.sumasTotales(),i.ultimaExistencia()}))}}}),new Vue({el:"#kardex_promedio",data:{id_taller:taller,kardex_id:"",producto:"",producto_id:"",nombre:"",transacciones:[],update:!1,inicial:{fecha:"",movimiento:"",cantidad:"",precio:"",index:""},prueba:{cantidad:{inventario_inicial:"",adquicisiones:"",ventas:"",inventario_final:""},precio:{inventario_inicial:"",adquicisiones:"",ventas:"",inventario_final:""}},ultima_existencia:[],suman:{ingreso_cantidad:0,ingreso_total:0,egreso_cantidad:0,egreso_total:0,muestra:0},datos_transacciones:"",modales:{modal_ingreso:[],modal_egreso:[]},ingresos:[],egresos:[],transaccion:{fecha:"",movimiento:"",ingreso:{fecha:"",movimiento:"",cantidad:"",precio:"",total:"",edit:!1,index:""},egreso:{fecha:"",movimiento:"",cantidad:"",precio:"",total:"",temp:"",edit:!1,index:""},existencia:{cantidad:"",precio:"",total:""}}},mounted:function(){},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},cancelarActualizacion:function(t){"egresos"==t?(this.transaccion.egreso.index="",this.transaccion.egreso.edit=!1,this.egresos=[]):"ingresos"==t&&(this.transaccion.ingreso.index="",this.transaccion.ingreso.edit=!1,this.ingresos=[])},exitenciaFinal:function(){var t=this.transacciones.length-1;this.ultima_existencia=[JSON.parse(JSON.stringify(this.transacciones[t]))]},sumasTotales:function(){var t=this.transacciones,e=0,i=0,a=0,o=0;if(0==t.length)return this.suman.ingreso_cantidad=0,this.suman.ingreso_total=0,this.suman.egreso_cantidad=0,void(this.suman.egreso_total=0);t.forEach((function(t,i){var a=t.ingreso_cantidad;null!=a&&""!==a&&(e+=parseInt(a))})),this.suman.ingreso_cantidad=e,t.forEach((function(t,e){var a=t.ingreso_total;null!=a&&""!==a&&(i+=Number(a))})),this.suman.ingreso_total=i.toFixed(2),console.log(i),t.forEach((function(t,e){var i=t.egreso_cantidad;null!=i&&""!==i&&(a+=parseInt(i))})),this.suman.egreso_cantidad=a,t.forEach((function(t,e){var i=t.egreso_total;null!=i&&""!==i&&(o+=Number(i))})),this.suman.egreso_total=o.toFixed(2),console.log(i)},modalInicial:function(){if(this.cerrarInicial(),this.transacciones.length>=1){var t=this.transacciones.length-1;console.log(this.transacciones[t]),this.movimientos=this.transacciones[t]}$("#inicial").modal("show")},modalTransacciones:function(){$("#ingreso-kardex").modal("show")},calcularTotalIngreso:function(){if(""===this.transaccion.ingreso.cantidad.trim()||""===this.transaccion.ingreso.precio.trim())toastr.error("La Cantidad & Precio es Obligatoria","Smarmoddle",{timeOut:"3000"});else{this.transaccion.ingreso.total=Number(this.transaccion.ingreso.cantidad*this.transaccion.ingreso.precio).toFixed(2);var t={tipo:"ingreso",fecha:this.transaccion.ingreso.fecha,movimiento:this.transaccion.ingreso.movimiento,ingreso_cantidad:this.transaccion.ingreso.cantidad,ingreso_precio:this.transaccion.ingreso.precio,ingreso_total:this.transaccion.ingreso.total,egreso_cantidad:"",egreso_precio:"",egreso_total:"",existencia_cantidad:this.transaccion.existencia.cantidad,existencia_precio:this.transaccion.existencia.precio,existencia_total:""};this.modales.modal_ingreso.push(t),this.transaccion.ingreso.fecha="",this.transaccion.ingreso.movimiento="",this.transaccion.ingreso.cantidad="",this.transaccion.ingreso.precio="",this.transaccion.ingreso.total=""}},actuaIng:function(t){var e=t,i=Number(this.modales.modal_ingreso[e].ingreso_cantidad),a=Number(this.modales.modal_ingreso[e].ingreso_precio),o=(this.modales.modal_ingreso[e].ingreso_total,i*a);this.modales.modal_ingreso[e].ingreso_total=o.toFixed(2),toastr.success("Datos Actualizado","Smarmoddle",{timeOut:"3000"})},actuaEgre:function(t){var e=t,i=Number(this.modales.modal_egreso[e].egreso_cantidad),a=Number(this.modales.modal_egreso[e].egreso_precio),o=(this.modales.modal_egreso[e].egreso_total,i*a);this.modales.modal_egreso[e].egreso_total=o.toFixed(2),toastr.success("Datos Actualizado","Smarmoddle",{timeOut:"3000"})},calcularTotalEgreso:function(){if(""===this.transaccion.egreso.cantidad.trim()||""===this.transaccion.egreso.precio.trim())toastr.error("La Cantidad & Precio es Obligatoria","Smarmoddle",{timeOut:"3000"});else{this.transaccion.egreso.total=Number(this.transaccion.egreso.cantidad*this.transaccion.egreso.precio).toFixed(2);var t={tipo:"egreso",fecha:this.transaccion.egreso.fecha,movimiento:this.transaccion.egreso.movimiento,ingreso_cantidad:"",ingreso_precio:"",ingreso_total:"",egreso_cantidad:this.transaccion.egreso.cantidad,egreso_precio:this.transaccion.egreso.precio,egreso_total:this.transaccion.egreso.total,existencia_cantidad:this.transaccion.existencia.cantidad,existencia_precio:this.transaccion.existencia.precio,existencia_total:""};this.modales.modal_egreso.push(t),this.transaccion.egreso.fecha="",this.transaccion.egreso.movimiento="",this.transaccion.egreso.cantidad="",this.transaccion.egreso.precio="",this.transaccion.egreso.total=""}},agregarInicial:function(){if(""===this.inicial.fecha.trim()||""===this.inicial.movimiento.trim()||""===this.inicial.cantidad.trim()||""===this.inicial.precio.trim())toastr.error("Todos los campos son Obligatorios","Smarmoddle",{timeOut:"3000"});else{var t=this.inicial.cantidad,e=this.inicial.precio;this.inicial.total=Number(t*e).toFixed(2);var i={tipo:"inicial",fecha:this.inicial.fecha,movimiento:this.inicial.movimiento,ingreso_cantidad:"",ingreso_precio:"",ingreso_total:"",egreso_cantidad:"",egreso_precio:"",egreso_total:"",existencia_cantidad:this.inicial.cantidad,existencia_precio:this.inicial.precio,existencia_total:this.inicial.total};this.transacciones.unshift(i),toastr.success("Transaccion agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.update=!1,this.inicial.fecha="",this.inicial.movimiento="",this.inicial.cantidad="",this.inicial.precio="",this.inicial.total="",$("#inicial").modal("hide");var a=this.transacciones.length-1;this.ultima_existencia=[JSON.parse(JSON.stringify(this.transacciones[a]))],this.sumasTotales()}},cerrarInicial:function(){this.update=!1,this.inicial.fecha="",this.inicial.movimiento="",this.inicial.cantidad="",this.inicial.precio="",this.inicial.fecha="",this.inicial.movimiento="",this.inicial.cantidad="",this.inicial.precio=""},agregarIngreso:function(){this.transacciones.push(this.modales.modal_ingreso[0]),toastr.success("Transaccion agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.modales.modal_ingreso=[],$("#ingreso-kardex").modal("hide");var t=this.transacciones.length-1;this.ultima_existencia=[JSON.parse(JSON.stringify(this.transacciones[t]))],this.sumasTotales()},agregarEgreso:function(){this.transacciones.push(this.modales.modal_egreso[0]),toastr.success("Transaccion agregada correctamente","Smarmoddle",{timeOut:"3000"}),this.modales.modal_egreso=[],$("#ingreso-kardex").modal("hide");var t=this.transacciones.length-1;this.ultima_existencia=[JSON.parse(JSON.stringify(this.transacciones[t]))],this.sumasTotales()},editarTransaccion:function(t,e){"ingreso"==e?(this.transaccion.ingreso.edit=!0,this.transaccion.egreso.edit=!1,this.ingresos=[JSON.parse(JSON.stringify(this.transacciones[t]))],this.transaccion.ingreso.index=t):"egreso"==e?(this.transaccion.egreso.edit=!0,this.transaccion.ingreso.edit=!1,this.egresos=[JSON.parse(JSON.stringify(this.transacciones[t]))],this.transaccion.egreso.index=t):"inicial"==e&&(this.transaccion.ingreso.edit=!1,this.transaccion.egreso.edit=!1,this.inicial.index=t,this.inicial.fecha=this.transacciones[t].fecha,this.inicial.movimiento=this.transacciones[t].movimiento,this.inicial.cantidad=this.transacciones[t].existencia_cantidad,this.inicial.precio=this.transacciones[t].existencia_precio,this.update=!0,$("#inicial").modal("show"))},actualizarIngreso:function(){var t=this.transaccion.ingreso.index,e=this.ingresos[0].ingreso_cantidad,i=this.ingresos[0].ingreso_precio,a=Number(e*i).toFixed(2);this.ingresos[0].ingreso_total=a;var o=this.ingresos[0];this.transacciones.splice(t,1,o),this.transaccion.ingreso.index="",this.ingresos=[],this.exitenciaFinal(),this.sumasTotales(),this.transaccion.ingreso.edit=!1},actualizarEgreso:function(){var t=this.transaccion.egreso.index,e=this.egresos[0].egreso_cantidad,i=this.egresos[0].egreso_precio,a=Number(e*i).toFixed(2);this.egresos[0].egreso_total=a;var o=this.egresos[0];this.transacciones.splice(t,1,o),this.transaccion.egreso.index="",this.egresos=[],this.exitenciaFinal(),this.sumasTotales(),this.transaccion.egreso.edit=!1},actualizarInicial:function(){var t=this.inicial.index,e=this.inicial.cantidad,i=this.inicial.precio,a=Number(e*i).toFixed(2);this.inicial.total=a,this.transacciones[t].fecha=this.inicial.fecha,this.transacciones[t].movimiento=this.inicial.movimiento,this.transacciones[t].existencia_cantidad=this.inicial.cantidad,this.transacciones[t].existencia_precio=this.inicial.precio,this.transacciones[t].existencia_total=this.inicial.total,this.update=!1,this.inicial.fecha="",this.inicial.movimiento="",this.inicial.cantidad="",this.inicial.precio="",this.inicial.total="",this.exitenciaFinal(),this.sumasTotales(),$("#inicial").modal("hide")},totalIng:function(t){var e=this.ingresos[0].ingreso_cantidad,i=this.ingresos[0].ingreso_precio,a=Number(e*i).toFixed(2);this.ingresos[0].ingreso_total=a},totaEgre:function(t){var e=this.egresos[0].egreso_cantidad,i=this.egresos[0].egreso_precio,a=Number(e*i).toFixed(2);this.egresos[0].egreso_total=a},borrarTransaccion:function(t){var e=this;Swal.fire({title:"Seguro que deseas eliminar este registro?? ",text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){if(i.isConfirmed){Swal.fire("Eliminado!","El Registro de la cuenta se elimino correctamente","success");var a=e.transacciones.length-1;t==a?0==a?(e.ultima_existencia=[],e.transacciones.splice(t,1)):(e.transacciones.splice(t,1),e.ultima_existencia=[JSON.parse(JSON.stringify(e.transacciones[a-1]))]):e.transacciones.splice(t,1),toastr.info("Transaccion eliminada correctamente","Smarmoddle",{timeOut:"3000"}),e.sumasTotales()}}))},guardarKardex:function(){if(0==this.transacciones.length)toastr.error("Debe haber al menos un registro en el Kardex","Smarmoddle",{timeOut:"3000"});else if(""===this.nombre.trim()||""===this.producto.trim())toastr.error("Nombre & Producto es Obligatorio","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/kardex-promedio",{id:this.id_taller,nombre:this.nombre,producto:this.producto,producto_id:this.producto_id,kardex_promedio:this.transacciones,inv_inicial_cantidad:this.prueba.cantidad.inventario_inicial,adquisicion_cantidad:this.prueba.cantidad.adquicisiones,ventas_cantidad:this.prueba.cantidad.ventas,inv_final_cantidad:this.prueba.cantidad.inventario_final,inv_inicial_precio:this.prueba.precio.inventario_inicial,adquisicion_precio:this.prueba.precio.adquicisiones,ventas_precio:this.prueba.precio.ventas,inv_final_precio:this.prueba.precio.inventario_final}).then((function(t){"guardado"==t.data.estado?toastr.success("Kardex creado correctamente","Smarmoddle",{timeOut:"3000"}):"actualizado"==t.data.estado&&toastr.warning("kardex actualizado correctamente","Smarmoddle",{timeOut:"3000"})})).catch((function(t){}))}},obtenerKardexPromedio:function(){var t=this,e=this;axios.post("/sistema/admin/taller/kardex-obtener-promedio",{id:e.id_taller,producto_id:e.producto_id}).then((function(i){1==i.data.datos?(toastr.info("Kardex Promedio cargado correctamente","Smarmoddle",{timeOut:"3000"}),e.transacciones=i.data.kardex_promedio,e.nombre=i.data.informacion.nombre,e.producto=i.data.informacion.producto,e.prueba.cantidad.inventario_inicial=i.data.informacion.inv_inicial_cantidad,e.prueba.cantidad.adquicisiones=i.data.informacion.adquisicion_cantidad,e.prueba.cantidad.ventas=i.data.informacion.ventas_cantidad,e.prueba.cantidad.inventario_final=i.data.informacion.inv_final_cantidad,e.prueba.precio.inventario_inicial=i.data.informacion.inv_inicial_precio,e.prueba.precio.adquicisiones=i.data.informacion.adquisicion_precio,e.prueba.precio.ventas=i.data.informacion.ventas_precio,e.prueba.precio.inventario_final=i.data.informacion.inv_final_precio,e.datos_transacciones=i.data.transacciones.transacciones,t.sumasTotales(),t.exitenciaFinal()):(e.transacciones=[],e.nombre="",e.producto="",e.prueba.cantidad.inventario_inicial="",e.prueba.cantidad.adquicisiones="",e.prueba.cantidad.ventas="",e.prueba.cantidad.inventario_final="",e.prueba.precio.inventario_inicial="",e.prueba.precio.adquicisiones="",e.prueba.precio.ventas="",e.prueba.precio.inventario_final="",e.datos_transacciones=i.data.transacciones.transacciones)})).catch((function(t){}))}}}),new Vue({el:"#calApp",data:{currentNum:0,decimalAdded:!1,total:0,prevOps:0,display:""},ready:function(){var t,e,i,a,o;$(".containerBox .row .cBox").click((function(s){0==(t=$(this)).find(".ink").length&&t.prepend("<span class='ink'></span>"),(e=t.find(".ink")).removeClass("animate"),e.height()||e.width()||(i=Math.max(t.outerWidth(),t.outerHeight()),e.css({height:i,width:i})),a=s.pageX-t.offset().left-e.width()/2,o=s.pageY-t.offset().top-e.height()/2,e.css({top:o+"px",left:a+"px"}).addClass("animate")}))},methods:{addDecimal:function(){0==this.decimalAdded&&(0!=this.prevOps?this.display="0.":this.display+=".",this.decimalAdded=!0)},clear:function(){this.currentNum=0,this.decimalAdded=!1,this.total=0,this.display="",this.prevOps=0},del:function(){this.currentNum>0?(0==this.decimalAdded?this.currentNum=parseInt(this.currentNum.toString().slice(0,-1),10):this.currentNum=parseFloat(this.currentNum.toString().slice(0,-1)),isNaN(this.currentNum)&&(this.currentNum=0),this.display=this.currentNum):0==this.currentNum&&(this.display="")},enterNum:function(t){0==this.currentNum?(0==this.prevOps&&(this.total=0),1==this.decimalAdded?(this.currentNum=t/10,this.display+=t.toString()):(this.currentNum=t,this.display=t.toString())):(1==this.decimalAdded?-1==this.currentNum.toString().indexOf(".")?this.currentNum=parseFloat(this.currentNum.toString()+"."+t.toString()):(this.currentNum+=t.toString(),this.currentNum=parseFloat(this.currentNum)):(this.currentNum*=10,this.currentNum+=t),this.display+=t.toString())},enterOps:function(t){if(0!=this.total||0!=this.currentNum){switch(0==this.total&&(this.total+=this.currentNum),this.prevOps){case 1:this.total+=this.currentNum;break;case 2:this.total-=this.currentNum;break;case 3:this.total*=this.currentNum;break;case 4:this.total/=this.currentNum}1==this.decimalAdded&&(this.decimalAdded=!1),this.currentNum=0,this.prevOps=t}},sum:function(){switch(this.prevOps){case 1:this.total+=this.currentNum;break;case 2:this.total-=this.currentNum;break;case 3:this.total*=this.currentNum;break;case 4:this.total/=this.currentNum}this.display=this.total.toString(),this.prevOps=0,this.currentNum=0}}}),new Vue({el:"#librocaja",data:{id_taller:taller,nombre:"",libros_caja:[],caja:{fecha:"",edit:!1,detalle:"",debe:"",haber:"",saldo:""},eliminar:{index:"",nombre:""},suman:{debe:0,haber:0},update:!1,registro_id:"",dgeneral:[],registros_cierres:[],ajustes:[],nombre_cierre:""},mounted:function(){this.obtenerLibroCaja()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},totales:function(){this.suman.debe=0,this.suman.haber=0;var t=this.libros_caja,e=0,i=0;t.forEach((function(t,i){e+=Number(t.debe)})),t.forEach((function(t,e){i+=Number(t.haber)})),this.suman.debe=e.toFixed(2),this.suman.haber=i.toFixed(2)},abrirLibro:function(){this.update=!1,$("#libro-caja").modal("show")},agregarRegistro:function(){if(""===this.caja.fecha.trim())toastr.error("La fecha es obligatoria ","Smarmoddle",{timeOut:"3000"});else if(""===this.caja.detalle.trim())toastr.error("El campo Detalle es Obligatorio","Smartmoodle",{timeOut:"3000"});else if(""!=this.caja.debe.trim()&&""!=this.caja.haber.trim())toastr.error("No puede llenar ambos campos de debe y haber","Smartmoodle",{timeOut:"30000"});else{var t={fecha:this.caja.fecha,detalle:this.caja.detalle,debe:this.caja.debe,haber:this.caja.haber,saldo:this.caja.saldo};this.libros_caja.push(t),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.caja.fecha="",this.caja.detalle="",this.caja.debe="",this.caja.haber="",this.caja.saldo="",this.totales()}},editLibroCaja:function(t){this.caja.edit=!0,this.registro_id=t,this.caja.fecha=this.libros_caja[t].fecha,this.caja.detalle=this.libros_caja[t].detalle,this.caja.debe=this.libros_caja[t].debe,this.caja.haber=this.libros_caja[t].haber,this.caja.saldo=this.libros_caja[t].saldo},editlibrocajafuera:function(t){this.caja.edit=!0,this.registro_id=t,this.caja.fecha=this.libros_caja[t].fecha,this.caja.detalle=this.libros_caja[t].detalle,this.caja.debe=this.libros_caja[t].debe,this.caja.haber=this.libros_caja[t].haber,this.caja.saldo=this.libros_caja[t].saldo,$("#libro-caja").modal("show")},cancelarEditlibro:function(){this.caja.fecha="",this.caja.detalle="",this.caja.debe="",this.caja.haber="",this.caja.saldo="",this.caja.edit=!1},actualizarLibroCaja:function(){if(""===this.caja.fecha.trim())toastr.error("La fecha es obligatoria ","Smarmoddle",{timeOut:"3000"});else if(""===this.caja.detalle.trim())toastr.error("El campo Detalle es Obligatorio","Smartmoodle",{timeOut:"3000"});else{var t=this.registro_id;this.libros_caja[t].fecha=this.caja.fecha,this.libros_caja[t].detalle=this.caja.detalle,this.libros_caja[t].debe=this.caja.debe,this.libros_caja[t].haber=this.caja.haber,this.libros_caja[t].saldo=this.caja.saldo,this.cancelarEditlibro(),this.totales(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}},eliminarLibro:function(){var t=this.eliminar.index;this.libros_caja.splice(t,1),this.eliminar.index="",this.eliminar.nombre="",$("#eliminar-libro").modal("hide")},deleteLibroCaja:function(t){this.libros_caja.splice(t,1),this.totales()},WarningEliminarLibro:function(t){var e=this;this.eliminar.index=t,this.eliminar.nombre=this.libros_caja[t].detalle,Swal.fire({title:"Seguro que deseas eliminar el Registro de "+this.eliminar.nombre,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+e.eliminar.nombre,"success"),e.libros_caja.splice(t,1))}))},guardarLibro:function(){if(0==this.libros_caja.length)toastr.error("Debe haber al menos un registro en el Balance","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/anexo_caja",{id:this.id_taller,libros_caja:this.libros_caja,nombre:this.nombre,debe:this.suman.debe,haber:this.suman.haber}).then((function(t){"guardado"==t.data.estado?toastr.success("Anexo creado correctamente","Smarmoddle",{timeOut:"3000"}):"actualizado"==t.data.estado&&toastr.warning("Anexo actualizado correctamente","Smarmoddle",{timeOut:"3000"})})).catch((function(t){}))}},obtenerLibroCaja:function(){var t=this;axios.post("/sistema/admin/taller/anexo-obtener-caja",{id:this.id_taller}).then((function(e){1==e.data.datos&&(toastr.info("Anexo Libro Caja cargado correctamente","Smarmoddle",{timeOut:"3000"}),t.libros_caja=e.data.banexocaja,t.nombre=e.data.nombre,t.totales())})).catch((function(t){}))}}}),new Vue({el:"#arqueo_caja",data:{id_taller:taller,libros_caja:[],nombre_lb:"",t_saldo:[],saldo:{edit:!1,detalle:"",s_debe:"",s_haber:""},t_exis:[],exis:{edit:!1,detalle:"",e_debe:"",e_haber:""},sumas:{td:0,th:0},eliminar:{index:"",nombre:""},update:!1,registro_id:""},mounted:function(){this.ObtenerArqueo(),this.obtenerLibroCaja()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},obtenerLibroCaja:function(){var t=this;axios.post("/sistema/admin/taller/anexo-obtener-caja",{id:this.id_taller}).then((function(e){1==e.data.datos&&(t.libros_caja=e.data.banexocaja,t.nombre_lb=e.data.nombre)})).catch((function(t){}))},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},totales_s:function(){this.sumas.td=0,this.sumas.th=0;var t=this.t_saldo,e=this.t_exis,i=0,a=0,o=0,s=0;t.forEach((function(t,e){i+=Number(t.s_debe)})),t.forEach((function(t,e){a+=Number(t.s_haber)})),e.forEach((function(t,e){o+=Number(t.e_debe)})),e.forEach((function(t,e){s+=Number(t.e_haber)}));var r=i+o,n=a+s;console.log(i),this.sumas.td=r.toFixed(2),this.sumas.th=n.toFixed(2)},abrirArqueo:function(){this.update=!1,$("#arqueo-caja").modal("show")},agregarsaldo:function(){if(""===this.saldo.detalle.trim())toastr.error("El Detalle es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""!=this.saldo.s_debe.trim()&&""!=this.saldo.s_haber.trim())toastr.error("No puede llenar ambos campos de debe y haber ","Smarmoddle",{timeOut:"3000"});else{var t={detalle:this.saldo.detalle,s_debe:this.saldo.s_debe,s_haber:this.saldo.s_haber};this.t_saldo.push(t),toastr.success("Saldo agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.saldo.detalle="",this.saldo.s_debe="",this.saldo.s_haber="",this.totales_s()}},agregarExistencia:function(){if(""===this.exis.detalle.trim())toastr.error("El Detalle es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""!=this.exis.e_debe.trim()&&""!=this.exis.e_haber.trim())toastr.error("No puede llenar ambos campos de debe y haber ","Smarmoddle",{timeOut:"3000"});else{var t={detalle:this.exis.detalle,e_debe:this.exis.e_debe,e_haber:this.exis.e_haber};this.t_exis.push(t),toastr.success("Existencias agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.exis.detalle="",this.exis.e_debe="",this.exis.e_haber="",this.totales_s()}},editSaldo:function(t){this.registro_id=t,this.saldo.edit=!0,this.saldo.detalle=this.t_saldo[t].detalle,this.saldo.s_debe=this.t_saldo[t].s_debe,this.saldo.s_haber=this.t_saldo[t].s_haber},editSaldoFuera:function(t){this.registro_id=t,this.saldo.edit=!0,this.saldo.detalle=this.t_saldo[t].detalle,this.saldo.s_debe=this.t_saldo[t].s_debe,this.saldo.s_haber=this.t_saldo[t].s_haber,$("#arqueo-caja").modal("show")},editExis:function(t){this.exis.edit=!0,this.registro_id=t,this.exis.detalle=this.t_exis[t].detalle,this.exis.e_debe=this.t_exis[t].e_debe,this.exis.e_haber=this.t_exis[t].e_haber},editExisFuera:function(t){this.exis.edit=!0,this.registro_id=t,this.exis.detalle=this.t_exis[t].detalle,this.exis.e_debe=this.t_exis[t].e_debe,this.exis.e_haber=this.t_exis[t].e_haber,$("#arqueo-caja").modal("show")},cancelarEditSaldo:function(){this.saldo.detalle="",this.saldo.s_debe="",this.saldo.s_haber="",this.saldo.edit=!1},cancelarEditExis:function(){this.exis.detalle="",this.exis.e_debe="",this.exis.e_haber="",this.exis.edit=!1},actualizarSaldo:function(){if(""==this.saldo.detalle)toastr.error("El campo Detalle es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.registro_id;this.t_saldo[t].detalle=this.saldo.detalle,this.t_saldo[t].s_debe=this.saldo.s_debe,this.t_saldo[t].s_haber=this.saldo.s_haber,this.cancelarEditSaldo(),this.totales_s(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}},actualizarExis:function(){if(""==this.exis.detalle)toastr.error("El campo Detalle es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.registro_id;this.t_exis[t].detalle=this.exis.detalle,this.t_exis[t].e_debe=this.exis.e_debe,this.t_exis[t].e_haber=this.exis.e_haber,this.cancelarEditExis(),this.totales_s(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}},eliminarSaldo:function(){var t=this.eliminar.index;this.t_saldo.splice(t,1),this.eliminar.index="",this.eliminar.nombre="",$("#eliminar-arqueo").modal("hide")},eliminarExis:function(){var t=this.eliminar.index;this.t_exis.splice(t,1),this.eliminar.index="",this.eliminar.nombre="",$("#eliminar-arqueo2").modal("hide")},deleteSaldo:function(t){this.t_saldo.splice(t,1),this.totales_s()},deleteExis:function(t){this.t_exis.splice(t,1),this.totales_s()},WarningEliminarSaldo:function(t){var e=this;this.eliminar.index=t,this.eliminar.nombre=this.t_saldo[t].detalle,Swal.fire({title:"Seguro que deseas eliminar este Registro "+this.eliminar.nombre,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+e.eliminar.nombre,"success"),e.t_saldo.splice(t,1))}))},WarningEliminarExis:function(t){var e=this;this.eliminar.index=t,this.eliminar.nombre=this.t_exis[t].detalle,Swal.fire({title:"Seguro que deseas eliminar este Registro "+this.eliminar.nombre,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+e.eliminar.nombre,"success"),e.t_exis.splice(t,1))}))},guardaArqueo:function(){var t=this;if(0==this.t_saldo.length)toastr.error("Debe haber al menos un Saldo Registrado","Smarmoddle",{timeOut:"3000"});else if(0==this.t_exis.length)toastr.error("Debe haber al menos una Existencia Registrado","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/arqueo_caja",{id:this.id_taller,t_saldo:this.t_saldo,t_exis:this.t_exis,td:this.sumas.td,th:this.sumas.th}).then((function(e){"guardado"==e.data.estado?(toastr.success("Arqueo Caja creado correctamente","Smarmoddle",{timeOut:"3000"}),t.totales_s()):"actualizado"==e.data.estado&&(toastr.warning("Arqueo Caja actualizado correctamente","Smarmoddle",{timeOut:"3000"}),t.totales_s())})).catch((function(t){}))}},ObtenerArqueo:function(){var t=this;axios.post("/sistema/admin/taller/arqueo-obtener-caja",{id:this.id_taller}).then((function(e){1==e.data.datos&&(toastr.info("Anexo Arqueo Caja cargado correctamente","Smarmoddle",{timeOut:"3000"}),t.t_saldo=e.data.saldo,t.t_exis=e.data.exis,t.totales_s())})).catch((function(t){}))}}}),new Vue({el:"#librosbanco",data:{id_taller:taller,nombre:"",n_banco:"",c_banco:"",lb_banco:[],eliminar:{index:"",nombre:""},banco:{edit:!1,fecha:"",detalle:"",cheque:"",debe:"",haber:"",saldo:""},suman:{debe:0,haber:0},update:!1,registro_id:"",dgeneral:[],registros_cierres:[],ajustes:[],nombre_cierre:""},mounted:function(){this.obtenerLibroBanco()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},totales:function(){this.suman.debe=0,this.suman.haber=0;var t=this.lb_banco,e=0,i=0;t.forEach((function(t,i){e+=Number(t.debe)})),t.forEach((function(t,e){i+=Number(t.haber)})),this.suman.debe=e.toFixed(2),this.suman.haber=i.toFixed(2)},abrirLibroB:function(){this.update=!1,$("#libro-banco").modal("show")},agregarBanco:function(){if(""===this.banco.fecha.trim())toastr.error("La fecha es obligatoria ","Smarmoddle",{timeOut:"3000"});else if(""===this.banco.detalle.trim())toastr.error("El campo Detalle es Obligatorio","Smartmoodle",{timeOut:"3000"});else if(""!=this.banco.debe.trim()&&""!=this.banco.haber.trim())toastr.error("No puede llenar ambos campos de debe y haber","Smartmoodle",{timeOut:"30000"});else{var t={fecha:this.banco.fecha,detalle:this.banco.detalle,cheque:this.banco.cheque,debe:this.banco.debe,haber:this.banco.haber,saldo:this.banco.saldo};this.lb_banco.push(t),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.banco.fecha="",this.banco.detalle="",this.banco.cheque="",this.banco.debe="",this.banco.haber="",this.banco.saldo="",this.totales()}},editLibroBanco:function(t){this.banco.edit=!0,this.registro_id=t,this.banco.fecha=this.lb_banco[t].fecha,this.banco.detalle=this.lb_banco[t].detalle,this.banco.cheque=this.lb_banco[t].cheque,this.banco.debe=this.lb_banco[t].debe,this.banco.haber=this.lb_banco[t].haber,this.banco.saldo=this.lb_banco[t].saldo},editLibroBancoFuera:function(t){this.banco.edit=!0,this.registro_id=t,this.banco.fecha=this.lb_banco[t].fecha,this.banco.detalle=this.lb_banco[t].detalle,this.banco.cheque=this.lb_banco[t].cheque,this.banco.debe=this.lb_banco[t].debe,this.banco.haber=this.lb_banco[t].haber,this.banco.saldo=this.lb_banco[t].saldo,$("#libro-banco").modal("show")},cancelarEditlibroBanco:function(){this.banco.fecha="",this.banco.detalle="",this.banco.cheque="",this.banco.debe="",this.banco.haber="",this.banco.saldo="",this.banco.edit=!1},actualizarLibroBanco:function(){if(""===this.banco.fecha.trim())toastr.error("La fecha es obligatoria ","Smarmoddle",{timeOut:"3000"});else if(""===this.banco.detalle.trim())toastr.error("El campo Detalle es Obligatorio","Smartmoodle",{timeOut:"3000"});else{var t=this.registro_id;this.lb_banco[t].fecha=this.banco.fecha,this.lb_banco[t].detalle=this.banco.detalle,this.lb_banco[t].cheque=this.banco.cheque,this.lb_banco[t].debe=this.banco.debe,this.lb_banco[t].haber=this.banco.haber,this.lb_banco[t].saldo=this.banco.saldo,this.cancelarEditlibroBanco(),this.totales(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}},eliminarLibro:function(){var t=this.eliminar.index;this.lb_banco.splice(t,1),this.eliminar.index="",this.eliminar.nombre="",$("#eliminar-banco").modal("hide")},deleteLibroBanco:function(t){this.lb_banco.splice(t,1),this.totales()},WarningEliminarLibro:function(t){var e=this;this.eliminar.index=t,this.eliminar.nombre=this.lb_banco[t].detalle,Swal.fire({title:"Seguro que deseas eliminar el Registro de "+this.eliminar.nombre,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+e.eliminar.nombre,"success"),e.lb_banco.splice(t,1))}))},guardarlbBAnco:function(){if(0==this.lb_banco.length)toastr.error("Debe haber al menos un registro en el Balance","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/libro_banco",{id:this.id_taller,lb_banco:this.lb_banco,nombre:this.nombre,n_banco:this.n_banco,c_banco:this.c_banco,debe:this.suman.debe,haber:this.suman.haber}).then((function(t){"guardado"==t.data.estado?toastr.success("Arqueo Libro Banco creado correctamente","Smarmoddle",{timeOut:"3000"}):"actualizado"==t.data.estado&&toastr.warning("Arqueo Libro Banco actualizado correctamente","Smarmoddle",{timeOut:"3000"})})).catch((function(t){}))}},obtenerLibroBanco:function(){var t=this;axios.post("/sistema/admin/taller/libro-obtener-banco",{id:this.id_taller}).then((function(e){1==e.data.datos&&(toastr.info("Anexo Libro Banco cargado correctamente","Smarmoddle",{timeOut:"3000"}),t.lb_banco=e.data.mb,t.nombre=e.data.nombre,t.n_banco=e.data.n_banco,t.c_banco=e.data.c_banco,t.totales())})).catch((function(t){}))}}}),new Vue({el:"#conciliacionb",data:{id_taller:taller,nombre:"",n_banco:"",fecha:"",lb_nombre:"",lb_n_banco:"",lb_c_banco:"",lb_banco:[],c_saldos:[],saldo:{edit:!1,fecha:"",detalle:"",saldo:""},c_debitos:[],debito:{edit:!1,fecha:"",detalle:"",saldo:""},c_creditos:[],credito:{edit:!1,fecha:"",detalle:"",saldo:""},c_cheques:[],cheques:{edit:!1,fecha:"",detalle:"",saldo:""},suman:{saldo_c:0,saldo_ch:0,saldo_d:0,total:0},update:!1,registro_id:""},mounted:function(){this.obtenerConciliacionBancaria(),this.obtenerLibroBanco()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},obtenerLibroBanco:function(){var t=this;axios.post("/sistema/admin/taller/libro-obtener-banco",{id:this.id_taller}).then((function(e){1==e.data.datos&&(t.lb_banco=e.data.mb,t.lb_nombre=e.data.nombre,t.lb_n_banco=e.data.n_banco,t.lb_c_banco=e.data.c_banco)})).catch((function(t){}))},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},totales:function(){this.suman.saldo_c=0,this.suman.saldo_ch=0,this.suman.saldo_d=0,this.suman.total=0;var t=this.c_saldos,e=this.c_debitos,i=this.c_creditos,a=this.c_cheques,o=0,s=0,r=0,n=0;t.forEach((function(t,e){o+=Number(t.saldo)})),e.forEach((function(t,e){s+=Number(t.saldo)})),i.forEach((function(t,e){r+=Number(t.saldo)})),a.forEach((function(t,e){n+=Number(t.saldo)}));var c=o+s-r-n;this.suman.saldo_d=s.toFixed(2),this.suman.saldo_c=r.toFixed(2),this.suman.saldo_ch=n.toFixed(2),this.suman.total=c.toFixed(2)},abrirSaldos:function(){this.limpiar(),$("#conciliacion-bancaria").modal("show"),$("#nav-bih-conciliacion-saldo-tab").tab("show")},abrirDebito:function(){this.limpiar(),$("#conciliacion-bancaria").modal("show"),$("#nav-bih-conciliacion-debito-tab").tab("show")},abrirCredito:function(){this.limpiar(),$("#conciliacion-bancaria").modal("show"),$("#nav-bih-conciliacion-credito-tab").tab("show")},abrirCheques:function(){this.limpiar(),$("#conciliacion-bancaria").modal("show"),$("#nav-bih-conciliacion-cheque-tab").tab("show")},agregarSaldo:function(){if(""===this.saldo.fecha.trim())toastr.error("La Fecha es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.saldo.detalle.trim())toastr.error("El Detalle es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.saldo.saldo.trim())toastr.error("El Saldo es Obligatorio ","Smarmoddle",{timeOut:"3000"});else{var t={fecha:this.saldo.fecha,detalle:this.saldo.detalle,saldo:this.saldo.saldo};this.c_saldos.push(t),toastr.success("El Valor agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.saldo.fecha="",this.saldo.detalle="",this.saldo.saldo="",this.totales()}},editSaldo:function(t){this.saldo.edit=!0,this.registro_id=t,this.saldo.fecha=this.c_saldos[t].fecha,this.saldo.detalle=this.c_saldos[t].detalle,this.saldo.saldo=this.c_saldos[t].saldo,$("#nav-bih-conciliacion-saldo-tab").tab("show")},editSaldoFuera:function(t){this.saldo.edit=!0,this.registro_id=t,this.saldo.fecha=this.c_saldos[t].fecha,this.saldo.detalle=this.c_saldos[t].detalle,this.saldo.saldo=this.c_saldos[t].saldo,$("#conciliacion-bancaria").modal("show"),$("#nav-bih-conciliacion-saldo-tab").tab("show")},cancelarEditSaldo:function(){this.saldo.fecha="",this.saldo.detalle="",this.saldo.saldo="",this.saldo.edit=!1},EliminarSaldo:function(t){var e=this,i=this.c_saldos[t].detalle;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.c_saldos.splice(t,1),e.totales())}))},actualizarSaldo:function(){if(""===this.saldo.fecha.trim())toastr.error("La Fecha es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.saldo.detalle.trim())toastr.error("El Detalle es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.saldo.saldo.trim())toastr.error("El Saldo es Obligatorio ","Smarmoddle",{timeOut:"3000"});else{var t=this.registro_id;this.c_saldos[t].fecha=this.saldo.fecha,this.c_saldos[t].detalle=this.saldo.detalle,this.c_saldos[t].saldo=this.saldo.saldo,this.cancelarEditSaldo(),this.totales(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}},agregarCreditos:function(){if(""===this.credito.fecha.trim())toastr.error("La Fecha es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.credito.detalle.trim())toastr.error("El Detalle es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.credito.saldo.trim())toastr.error("El Valor es Obligatorio ","Smarmoddle",{timeOut:"3000"});else{var t={fecha:this.credito.fecha,detalle:this.credito.detalle,saldo:this.credito.saldo};this.c_creditos.push(t),toastr.success("El Credito agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.credito.fecha="",this.credito.detalle="",this.credito.saldo="",this.totales()}},editCredito:function(t){this.credito.edit=!0,this.registro_id=t,this.credito.fecha=this.c_creditos[t].fecha,this.credito.detalle=this.c_creditos[t].detalle,this.credito.saldo=this.c_creditos[t].saldo,$("#nav-bih-conciliacion-credito-tab").tab("show")},editCreditoFuera:function(t){this.credito.edit=!0,this.registro_id=t,this.credito.fecha=this.c_creditos[t].fecha,this.credito.detalle=this.c_creditos[t].detalle,this.credito.saldo=this.c_creditos[t].saldo,$("#conciliacion-bancaria").modal("show"),$("#nav-bih-conciliacion-credito-tab").tab("show")},cancelarEditCredito:function(){this.credito.fecha="",this.credito.detalle="",this.credito.saldo="",this.credito.edit=!1},EliminarCredito:function(t){var e=this,i=this.c_creditos[t].detalle;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.c_creditos.splice(t,1),e.totales())}))},actualizarCredito:function(){if(""===this.credito.fecha.trim())toastr.error("La Fecha es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.credito.detalle.trim())toastr.error("El Detalle es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.credito.saldo.trim())toastr.error("El Saldo es Obligatorio ","Smarmoddle",{timeOut:"3000"});else{var t=this.registro_id;this.c_creditos[t].fecha=this.credito.fecha,this.c_creditos[t].detalle=this.credito.detalle,this.c_creditos[t].saldo=this.credito.saldo,this.cancelarEditCredito(),this.totales(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}},agregarDebitos:function(){if(""===this.debito.fecha.trim())toastr.error("La Fecha es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.debito.detalle.trim())toastr.error("El Detalle es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.debito.saldo.trim())toastr.error("El Valor es Obligatorio ","Smarmoddle",{timeOut:"3000"});else{var t={fecha:this.debito.fecha,detalle:this.debito.detalle,saldo:this.debito.saldo};this.c_debitos.push(t),toastr.success("El Debito agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.debito.fecha="",this.debito.detalle="",this.debito.saldo="",this.totales()}},editDebito:function(t){this.debito.edit=!0,this.registro_id=t,this.debito.fecha=this.c_debitos[t].fecha,this.debito.detalle=this.c_debitos[t].detalle,this.debito.saldo=this.c_debitos[t].saldo,$("#nav-bih-conciliacion-debito-tab").tab("show")},editDebitoFuera:function(t){this.debito.edit=!0,this.registro_id=t,this.debito.fecha=this.c_debitos[t].fecha,this.debito.detalle=this.c_debitos[t].detalle,this.debito.saldo=this.c_debitos[t].saldo,$("#conciliacion-bancaria").modal("show"),$("#nav-bih-conciliacion-debito-tab").tab("show")},cancelarEditDebito:function(){this.debito.fecha="",this.debito.detalle="",this.debito.saldo="",this.debito.edit=!1},EliminarDebito:function(t){var e=this,i=this.c_debitos[t].detalle;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.c_debitos.splice(t,1),e.totales())}))},actualizarDebito:function(){if(""===this.debito.fecha.trim())toastr.error("La Fecha es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.debito.detalle.trim())toastr.error("El Detalle es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.debito.saldo.trim())toastr.error("El Saldo es Obligatorio ","Smarmoddle",{timeOut:"3000"});else{var t=this.registro_id;this.c_debitos[t].fecha=this.debito.fecha,this.c_debitos[t].detalle=this.debito.detalle,this.c_debitos[t].saldo=this.debito.saldo,this.cancelarEditDebito(),this.totales(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}},agregarCheques:function(){if(""===this.cheques.fecha.trim())toastr.error("La Fecha es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.cheques.detalle.trim())toastr.error("El Detalle es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.cheques.saldo.trim())toastr.error("El Valor es Obligatorio ","Smarmoddle",{timeOut:"3000"});else{var t={fecha:this.cheques.fecha,detalle:this.cheques.detalle,saldo:this.cheques.saldo};this.c_cheques.push(t),toastr.success("El Cheque agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.cheques.fecha="",this.cheques.detalle="",this.cheques.saldo="",this.totales()}},editCheque:function(t){this.cheques.edit=!0,this.registro_id=t,this.cheques.fecha=this.c_cheques[t].fecha,this.cheques.detalle=this.c_cheques[t].detalle,this.cheques.saldo=this.c_cheques[t].saldo,$("#nav-bih-conciliacion-cheque-tab").tab("show")},editChequeFuera:function(t){this.cheques.edit=!0,this.registro_id=t,this.cheques.fecha=this.c_cheques[t].fecha,this.cheques.detalle=this.c_cheques[t].detalle,this.cheques.saldo=this.c_cheques[t].saldo,$("#conciliacion-bancaria").modal("show"),$("#nav-bih-conciliacion-cheque-tab").tab("show")},cancelarEditCheque:function(){this.cheques.fecha="",this.cheques.detalle="",this.cheques.saldo="",this.cheques.edit=!1},EliminarCheque:function(t){var e=this,i=this.c_cheques[t].detalle;Swal.fire({title:"Seguro que deseas eliminar la cuenta "+i,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(a){a.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+i,"success"),e.c_cheques.splice(t,1),e.totales())}))},actualizarCheque:function(){if(""===this.cheques.fecha.trim())toastr.error("La Fecha es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.cheques.detalle.trim())toastr.error("El Detalle es Obligatorio","Smarmoddle",{timeOut:"3000"});else if(""===this.cheques.saldo.trim())toastr.error("El Saldo es Obligatorio ","Smarmoddle",{timeOut:"3000"});else{var t=this.registro_id;this.c_cheques[t].fecha=this.cheques.fecha,this.c_cheques[t].detalle=this.cheques.detalle,this.c_cheques[t].saldo=this.cheques.saldo,this.cancelarEditCheque(),this.totales(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}},limpiar:function(){this.saldo.fecha="",this.saldo.detalle="",this.saldo.saldo="",this.debito.fecha="",this.debito.detalle="",this.debito.saldo="",this.credito.fecha="",this.credito.detalle="",this.credito.saldo="",this.cheques.detalle="",this.cheques.saldo="",this.cheques.fecha=""},guardarConciliacionB:function(){if(0==this.nombre.length)toastr.error("Debe Registrar el Nombre del Comercial","Smarmoddle",{timeOut:"3000"});else if(0==this.fecha.length)toastr.error("Debe Ingresar la Fecha","Smarmoddle",{timeOut:"3000"});else if(0==this.n_banco.length)toastr.error("Debe Ingresar el Nombre del Banco","Smarmoddle",{timeOut:"3000"});else if(0==this.c_saldos.length)toastr.error("Debe haber al menos un Saldo Registrado","Smarmoddle",{timeOut:"3000"});else if(0==this.c_debitos.length)toastr.error("Debe haber al menos un Débito Registrado","Smarmoddle",{timeOut:"3000"});else if(0==this.c_creditos.length)toastr.error("Debe haber al menos un Crédito Registrado","Smarmoddle",{timeOut:"3000"});else if(0==this.c_cheques.length)toastr.error("Debe haber al menos un Cheque Registrado","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/conciliacion_bancaria",{id:this.id_taller,nombre:this.nombre,n_banco:this.n_banco,fecha:this.fecha,saldo_c:this.suman.saldo_c,saldo_d:this.suman.saldo_d,saldo_ch:this.suman.saldo_ch,total:this.suman.total,c_saldos:this.c_saldos,c_debitos:this.c_debitos,c_creditos:this.c_creditos,c_cheques:this.c_cheques}).then((function(t){"guardado"==t.data.estado?toastr.success("Conciliación Bancaria creada correctamente","Smarmoddle",{timeOut:"3000"}):"actualizado"==t.data.estado&&toastr.warning("Conciliación Bancaria actualizado correctamente","Smarmoddle",{timeOut:"3000"})})).catch((function(t){}))}},obtenerConciliacionBancaria:function(){var t=this;axios.post("/sistema/admin/taller/conciliacion-obtener-bancaria",{id:this.id_taller}).then((function(e){1==e.data.datos&&(toastr.info("Anexo Conciliación Bancaria cargado correctamente","Smarmoddle",{timeOut:"3000"}),t.c_saldos=e.data.saldo,t.c_debitos=e.data.debito,t.c_creditos=e.data.credito,t.c_cheques=e.data.cheque,t.nombre=e.data.nombre,t.n_banco=e.data.n_banco,t.fecha=e.data.fecha,t.totales())})).catch((function(t){}))}}}),new Vue({el:"#retencion_iva",data:{id_taller:taller,nombre_c:"",fecha:"",ruc:"",dgeneral:[],eliminar:{index:"",nombre:""},t_ventas:[],t_compras:[],compra:{edit:!1,fecha_c:"",detalle:"",proveedor:"",base_im:"",porcentaje:"",v_retenido:"",iva:"",ret_10:"",ret_20:"",ret_30:"",ret_70:"",ret_100:""},suma_c:{suma_base:0,suma_reten:0,suma_ivac:0,suma_10:0,suma_20:0,suma_30:0,suma_70:0,suma_100:0},venta:{edit:!1,fecha_v:"",detalle:"",cliente:"",base_im:"",porcentaje:"",v_retenido:"",iva:"",ret_10:"",ret_20:"",ret_30:"",ret_70:"",ret_100:""},suma_v:{suma_base:0,suma_reten:0,suma_ivav:0,suma_10:0,suma_20:0,suma_30:0,suma_70:0,suma_100:0},total:{t_ivacompra:"",t_ivaventa:"",total_pagar:"",result_iva:"",t_reten:""},update:!1,registro_id:""},mounted:function(){this.obtenerDiarioGeneral(),this.obtenerRetencionIva()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},obtenerDiarioGeneral:function(){var t=this;axios.post("/sistema/admin/taller/diariogeneral",{id:t.id_taller}).then((function(e){if(1==e.data.datos){t.dgeneral=e.data.registros,t.ajustes=e.data.ajustes,t.nombre_dgral=e.data.nombre;var i=e.data.inicial;t.dgeneral.unshift(i)}})).catch((function(t){}))},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},Totales:function(){var t=this.t_compras,e=this.t_ventas,i=0,a=0,o=0,s=0,r=0,n=0,c=0,d=0,l=0,h=0,u=0,m=0,_=0,b=0,p=0,g=0;t.forEach((function(t,e){var a=t.base_im;null!=a&&""!==a&&(i+=Number(a))})),this.suma_c.suma_base=i.toFixed(2),t.forEach((function(t,e){var i=t.v_retenido;null!=i&&""!==i&&(a+=Number(i))})),this.suma_c.suma_reten=a.toFixed(2),t.forEach((function(t,e){var i=t.iva;null!=i&&""!==i&&(o+=Number(i))})),this.suma_c.suma_ivac=o.toFixed(2),t.forEach((function(t,e){var i=t.ret_10;null!=i&&""!==i&&(s+=Number(i))})),this.suma_c.suma_10=s.toFixed(2),t.forEach((function(t,e){var i=t.ret_20;null!=i&&""!==i&&(r+=Number(i))})),this.suma_c.suma_20=r.toFixed(2),t.forEach((function(t,e){var i=t.ret_30;null!=i&&""!==i&&(n+=Number(i))})),this.suma_c.suma_30=n.toFixed(2),t.forEach((function(t,e){var i=t.ret_70;null!=i&&""!==i&&(c+=Number(i))})),this.suma_c.suma_70=c.toFixed(2),t.forEach((function(t,e){var i=t.ret_100;null!=i&&""!==i&&(d+=Number(i))})),this.suma_c.suma_100=d.toFixed(2),e.forEach((function(t,e){var i=t.base_im;null!=i&&""!==i&&(l+=Number(i))})),this.suma_v.suma_base=l.toFixed(2),e.forEach((function(t,e){var i=t.v_retenido;null!=i&&""!==i&&(h+=Number(i))})),this.suma_v.suma_reten=h.toFixed(2),e.forEach((function(t,e){var i=t.iva;null!=i&&""!==i&&(u+=Number(i))})),this.suma_v.suma_ivav=u.toFixed(2),e.forEach((function(t,e){var i=t.ret_10;null!=i&&""!==i&&(m+=Number(i))})),this.suma_v.suma_10=m.toFixed(2),e.forEach((function(t,e){var i=t.ret_20;null!=i&&""!==i&&(_+=Number(i))})),this.suma_v.suma_20=_.toFixed(2),e.forEach((function(t,e){var i=t.ret_30;null!=i&&""!==i&&(b+=Number(i))})),this.suma_v.suma_30=b.toFixed(2),e.forEach((function(t,e){var i=t.ret_70;null!=i&&""!==i&&(p+=Number(i))})),this.suma_v.suma_70=p.toFixed(2),e.forEach((function(t,e){var i=t.ret_100;null!=i&&""!==i&&(g+=Number(i))})),this.suma_v.suma_100=g.toFixed(2)},abrirRetencion:function(){this.update=!1,$("#modal-retencion").modal("show")},agregarCompra:function(){if(""==this.compra.fecha_c)toastr.error("El campo Fecha es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""==this.compra.detalle)toastr.error("El campo de Compra de Bienes y Servicios es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t={fecha_c:this.compra.fecha_c,detalle:this.compra.detalle,proveedor:this.compra.proveedor,base_im:this.compra.base_im,porcentaje:this.compra.porcentaje,v_retenido:this.compra.v_retenido,iva:this.compra.iva,ret_10:this.compra.ret_10,ret_20:this.compra.ret_20,ret_30:this.compra.ret_30,ret_70:this.compra.ret_70,ret_100:this.compra.ret_100};this.t_compras.push(t),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.compra.fecha_c="",this.compra.detalle="",this.compra.proveedor="",this.compra.base_im="",this.compra.porcentaje="",this.compra.v_retenido="",this.compra.iva="",this.compra.ret_10="",this.compra.ret_20="",this.compra.ret_30="",this.compra.ret_70="",this.compra.ret_100="",this.Totales()}},editCompra:function(t){this.compra.edit=!0,this.registro_id=t,this.compra.fecha_c=this.t_compras[t].fecha_c,this.compra.detalle=this.t_compras[t].detalle,this.compra.proveedor=this.t_compras[t].proveedor,this.compra.base_im=this.t_compras[t].base_im,this.compra.porcentaje=this.t_compras[t].porcentaje,this.compra.v_retenido=this.t_compras[t].v_retenido,this.compra.iva=this.t_compras[t].iva,this.compra.ret_10=this.t_compras[t].ret_10,this.compra.ret_20=this.t_compras[t].ret_20,this.compra.ret_30=this.t_compras[t].ret_30,this.compra.ret_70=this.t_compras[t].ret_70,this.compra.ret_100=this.t_compras[t].ret_100},editCompraFuera:function(t){this.compra.edit=!0,this.registro_id=t,this.compra.fecha_c=this.t_compras[t].fecha_c,this.compra.detalle=this.t_compras[t].detalle,this.compra.proveedor=this.t_compras[t].proveedor,this.compra.base_im=this.t_compras[t].base_im,this.compra.porcentaje=this.t_compras[t].porcentaje,this.compra.v_retenido=this.t_compras[t].v_retenido,this.compra.iva=this.t_compras[t].iva,this.compra.ret_10=this.t_compras[t].ret_10,this.compra.ret_20=this.t_compras[t].ret_20,this.compra.ret_30=this.t_compras[t].ret_30,this.compra.ret_70=this.t_compras[t].ret_70,this.compra.ret_100=this.t_compras[t].ret_100,$("#modal-retencion").modal("show")},cancelarEditCompra:function(){this.compra.fecha_c="",this.compra.detalle="",this.compra.proveedor="",this.compra.base_im="",this.compra.porcentaje="",this.compra.v_retenido="",this.compra.iva="",this.compra.ret_10="",this.compra.ret_20="",this.compra.ret_30="",this.compra.ret_70="",this.compra.ret_100="",this.compra.edit=!1},actualizarCompra:function(){if(""==this.compra.fecha_c)toastr.error("El campo Fecha es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""==this.compra.detalle)toastr.error("El campo de Compra de Bienes y Servicios es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.registro_id;this.t_compras[t].fecha_c=this.compra.fecha_c,this.t_compras[t].detalle=this.compra.detalle,this.t_compras[t].proveedor=this.compra.proveedor,this.t_compras[t].base_im=this.compra.base_im,this.t_compras[t].porcentaje=this.compra.porcentaje,this.t_compras[t].v_retenido=this.compra.v_retenido,this.t_compras[t].iva=this.compra.iva,this.t_compras[t].ret_10=this.compra.ret_10,this.t_compras[t].ret_20=this.compra.ret_20,this.t_compras[t].ret_30=this.compra.ret_30,this.t_compras[t].ret_70=this.compra.ret_70,this.t_compras[t].ret_100=this.compra.ret_100,this.cancelarEditCompra(),this.Totales(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}},eliminarCompra:function(){var t=this.eliminar.index;this.t_compras.splice(t,1),this.eliminar.index="",this.eliminar.nombre="",$("#eliminar-retencion").modal("hide")},deleteCompra:function(t){this.t_compras.splice(t,1),this.Totales()},WarningEliminarCompra:function(t){var e=this;this.eliminar.index=t,this.eliminar.nombre=this.t_compras[t].detalle,Swal.fire({title:"Seguro que deseas eliminar este Registro "+this.eliminar.nombre,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+e.eliminar.nombre,"success"),e.t_compras.splice(t,1))}))},agregarVenta:function(){if(""==this.venta.fecha_v)toastr.error("El campo Fecha es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""==this.venta.detalle)toastr.error("El campo de Venta de Bienes y Servicios es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t={fecha_v:this.venta.fecha_v,detalle:this.venta.detalle,cliente:this.venta.cliente,base_im:this.venta.base_im,porcentaje:this.venta.porcentaje,v_retenido:this.venta.v_retenido,iva:this.venta.iva,ret_10:this.venta.ret_10,ret_20:this.venta.ret_20,ret_30:this.venta.ret_30,ret_70:this.venta.ret_70,ret_100:this.venta.ret_100};this.t_ventas.push(t),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.venta.fecha_v="",this.venta.detalle="",this.venta.cliente="",this.venta.base_im="",this.venta.porcentaje="",this.venta.v_retenido="",this.venta.iva="",this.venta.ret_10="",this.venta.ret_20="",this.venta.ret_30="",this.venta.ret_70="",this.venta.ret_100="",this.Totales()}},editVenta:function(t){this.venta.edit=!0,this.registro_id=t,this.venta.fecha_v=this.t_ventas[t].fecha_v,this.venta.detalle=this.t_ventas[t].detalle,this.venta.cliente=this.t_ventas[t].cliente,this.venta.base_im=this.t_ventas[t].base_im,this.venta.porcentaje=this.t_ventas[t].porcentaje,this.venta.v_retenido=this.t_ventas[t].v_retenido,this.venta.iva=this.t_ventas[t].iva,this.venta.ret_10=this.t_ventas[t].ret_10,this.venta.ret_20=this.t_ventas[t].ret_20,this.venta.ret_30=this.t_ventas[t].ret_30,this.venta.ret_70=this.t_ventas[t].ret_70,this.venta.ret_100=this.t_ventas[t].ret_100},editVentaFuera:function(t){this.venta.edit=!0,this.registro_id=t,this.venta.fecha_v=this.t_ventas[t].fecha_v,this.venta.detalle=this.t_ventas[t].detalle,this.venta.cliente=this.t_ventas[t].cliente,this.venta.base_im=this.t_ventas[t].base_im,this.venta.porcentaje=this.t_ventas[t].porcentaje,this.venta.v_retenido=this.t_ventas[t].v_retenido,this.venta.iva=this.t_ventas[t].iva,this.venta.ret_10=this.t_ventas[t].ret_10,this.venta.ret_20=this.t_ventas[t].ret_20,this.venta.ret_30=this.t_ventas[t].ret_30,this.venta.ret_70=this.t_ventas[t].ret_70,this.venta.ret_100=this.t_ventas[t].ret_100,$("#modal-retencion").modal("show")},cancelarEditVenta:function(){this.venta.fecha_v="",this.venta.detalle="",this.venta.cliente="",this.venta.base_im="",this.venta.porcentaje="",this.venta.v_retenido="",this.venta.iva="",this.venta.ret_10="",this.venta.ret_20="",this.venta.ret_30="",this.venta.ret_70="",this.venta.ret_100="",this.venta.edit=!1},actualizarVenta:function(){if(""==this.venta.fecha_v)toastr.error("El campo Fecha es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""==this.venta.detalle)toastr.error("El campo de Venta de Bienes y Servicios es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.registro_id;this.t_ventas[t].fecha_v=this.venta.fecha_v,this.t_ventas[t].detalle=this.venta.detalle,this.t_ventas[t].cliente=this.venta.cliente,this.t_ventas[t].base_im=this.venta.base_im,this.t_ventas[t].porcentaje=this.venta.porcentaje,this.t_ventas[t].v_retenido=this.venta.v_retenido,this.t_ventas[t].iva=this.venta.iva,this.t_ventas[t].ret_10=this.venta.ret_10,this.t_ventas[t].ret_20=this.venta.ret_20,this.t_ventas[t].ret_30=this.venta.ret_30,this.t_ventas[t].ret_70=this.venta.ret_70,this.t_ventas[t].ret_100=this.venta.ret_100,this.cancelarEditVenta(),this.Totales(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}},eliminarVenta:function(){var t=this.eliminar.index;this.t_ventas.splice(t,1),this.eliminar.index="",this.eliminar.nombre="",$("#eliminar-retencion1").modal("hide")},deleteVenta:function(t){this.t_ventas.splice(t,1),this.Totales()},WarningEliminarVenta:function(t){var e=this;this.eliminar.index=t,this.eliminar.nombre=this.t_ventas[t].detalle,Swal.fire({title:"Seguro que deseas eliminar este Registro "+this.eliminar.nombre,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la cuenta "+e.eliminar.nombre,"success"),e.t_ventas.splice(t,1))}))},guardaretencioniva:function(){if(0==this.nombre_c.length)toastr.error("Debe Registrar el Nombre del Comercial","Smarmoddle",{timeOut:"3000"});else if(0==this.fecha.length)toastr.error("Debe Ingresar la Fecha","Smarmoddle",{timeOut:"3000"});else if(0==this.ruc.length)toastr.error("Debe Ingresar el Ruc ","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/retencion_iva",{id:this.id_taller,nombre_c:this.nombre_c,fecha:this.fecha,ruc:this.ruc,sumac_base:this.suma_c.suma_base,sumac_reten:this.suma_c.suma_reten,sumac_ivac:this.suma_c.suma_ivac,sumac_10:this.suma_c.suma_10,sumac_20:this.suma_c.suma_20,sumac_30:this.suma_c.suma_30,sumac_70:this.suma_c.suma_70,sumac_100:this.suma_c.suma_100,sumav_base:this.suma_v.suma_base,sumav_reten:this.suma_v.suma_reten,sumav_ivav:this.suma_v.suma_ivav,sumav_10:this.suma_v.suma_10,sumav_20:this.suma_v.suma_20,sumav_30:this.suma_v.suma_30,sumav_70:this.suma_v.suma_70,sumav_100:this.suma_v.suma_100,t_ivacompra:this.total.t_ivacompra,t_ivaventa:this.total.t_ivaventa,total:this.total.total_pagar,t_reten:this.total.t_reten,result_iva:this.total.result_iva,t_compras:this.t_compras,t_ventas:this.t_ventas}).then((function(t){"guardado"==t.data.estado?toastr.success("Retención del Iva creada correctamente","Smarmoddle",{timeOut:"3000"}):"actualizado"==t.data.estado&&toastr.warning("Retención del Iva actualizado correctamente","Smarmoddle",{timeOut:"3000"})})).catch((function(t){}))}},obtenerRetencionIva:function(){var t=this;axios.post("/sistema/admin/taller/retencion-obtener-iva",{id:this.id_taller}).then((function(e){1==e.data.datos&&(toastr.info("Anexo Retencion del Iva cargado correctamente","Smarmoddle",{timeOut:"3000"}),t.t_compras=e.data.compra,t.t_ventas=e.data.venta,t.nombre_c=e.data.nombre,t.ruc=e.data.ruc,t.fecha=e.data.fecha,t.total.t_ivacompra=e.data.t_ivacompra,t.total.t_ivaventa=e.data.t_ivaventa,t.total.t_reten=e.data.t_reten,t.total.result_iva=e.data.result_iva,t.total.total_pagar=e.data.total,t.Totales())})).catch((function(t){}))}}}),new Vue({el:"#nomina_empleado",data:{id_taller:taller,fecha:"",nombre:"",t_nomina:[],nomina:{edit:!1,nombre_e:"",cargo:"",sueldo:"",s_tiempo:"",ingresos:"",iees:"",pres_iees:"",pres_cia:"",anticipo:"",imp_renta:"",egresos:"",neto_pagar:""},eliminar:{index:"",nombre:""},sobretiempo:{sueldo:"",hora_trabajo:"",total_suple:"",total_extra:"",suma_suple:"",suma_extra:"",total:""},calculo:{valor:"",tiempo:"",interes:"",total:""},calculo1:{valor:"",mes:"",interes:"",total:""},suma:{s_sueldo:0,s_sobretiempo:0,s_tingreso:0,s_iess:0,s_piess:0,s_pcias:0,s_anticipo:0,s_impr:0,s_tegresos:0,s_netopagar:0},deduccion:{valor:"",descripcion:""},deducciones:[],impuesto:{iva:"",fraccion_excedente_iva:"",ingreso_gravable:"",iies:"",ingreso_liquido:"",sueldo:"",comisiones:"",fraccion:"",fraccion_excedente:"",impuesto_fraccion:"",ingreso_mensual:"",base_imponible:"",ingreso_anual:"",interes:"",total:"",total_impuesto:""},update:!1,registro_id:""},mounted:function(){this.obtenerNomina()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},calculoHora:function(){if(""==this.sobretiempo.sueldo)toastr.error("No ha agregado el sueldo","Smarmoddle",{timeOut:"3000"});else{var t=Number(this.sobretiempo.sueldo)/30/8;this.sobretiempo.hora_trabajo=Number(t).toFixed(2)}},calculoSobre:function(){var t=Number(this.sobretiempo.total_suple)*Number(this.sobretiempo.hora_trabajo)*1.5,e=Number(this.sobretiempo.total_extra)*Number(this.sobretiempo.hora_trabajo)*2;this.sobretiempo.suma_suple=Number(t).toFixed(2),this.sobretiempo.suma_extra=Number(e).toFixed(2),this.sobretiempo.total=Number(t+e).toFixed(2)},limpiarSobre:function(){this.sobretiempo.sueldo="",this.sobretiempo.hora_trabajo="",this.sobretiempo.total_suple="",this.sobretiempo.total_extra="",this.sobretiempo.suma_suple="",this.sobretiempo.suma_extra="",this.sobretiempo.total=""},impuestoAgregado:function(t){if("ingresos"==t){var e=Number(this.impuesto.sueldo)-Number(this.impuesto.comisiones);this.impuesto.ingreso_gravable=Number(e).toFixed(2);var i=9.45*e/100;this.impuesto.iies=Number(i).toFixed(2);var a=e-i;this.impuesto.ingreso_liquido=Number(a).toFixed(2),this.impuestoAgregado("deduccion")}else if("deduccion"==t){var o=0;this.deducciones.forEach((function(t){o+=Number(t.valor)}));var s=Number(this.impuesto.ingreso_liquido)-o,r=12*s;this.impuesto.ingreso_mensual=Number(s).toFixed(2),this.impuesto.ingreso_anual=Number(r).toFixed(2),this.impuesto.base_imponible=Number(r).toFixed(2)}else if("final"==t){var n=Number(this.impuesto.interes),c=Number(this.impuesto.base_imponible),d=Number(this.impuesto.fraccion),l=Number(this.impuesto.impuesto_fraccion),h=c-Number(d),u=h*Number(n)/100,m=Number(l)+u;this.impuesto.fraccion_excedente=Number(h).toFixed(2),this.impuesto.fraccion_excedente_iva=Number(u).toFixed(2),this.impuesto.total_impuesto=Number(m).toFixed(2);var _=m/12;this.impuesto.total=Number(_).toFixed(2),this.impuesto.iva=n}},agregardeduccion:function(){if(""==this.deduccion.valor)toastr.error("No puede dejar el campo vacio","Smarmoddle",{timeOut:"3000"});else{var t={valor:Number(this.deduccion.valor),descripcion:this.deduccion.descripcion};this.deducciones.push(t),this.deduccion.descripcion="",this.deduccion.valor="",this.impuestoAgregado("deduccion")}},limpiar:function(){this.impuesto.total="",this.impuesto.sueldo="",this.impuesto.fraccion="",this.impuesto.impuesto_fraccion="",this.impuesto.interes="",this.deducciones=[],this.impuesto.comisiones="",this.impuesto.ingreso_gravable="",this.impuesto.iies="",this.impuesto.ingreso_liquido="",this.impuesto.ingreso_mensual="",this.impuesto.ingreso_anual="",this.impuesto.base_imponible="",this.impuesto.fraccion_excedente="",this.impuesto.fraccion_excedente_iva="",this.impuesto.total_impuesto="",this.impuesto.iva="",toastr.error("Limpiado Correctamente","Smarmoddle",{timeOut:"3000"})},borrarDeduccion:function(t){this.deducciones.splice(t,1),this.impuestoAgregado("deduccion")},impuestoRenta:function(){""==this.impuesto.fraccion?toastr.error("No has agregado la fraccion basica","Smarmoddle",{timeOut:"3000"}):""==this.impuesto.impuesto_fraccion?toastr.error("No has agregado el impuesto a fraccion basica","Smarmoddle",{timeOut:"3000"}):""==this.impuesto.interes?toastr.error("No has agregado el porcentaje","Smarmoddle",{timeOut:"3000"}):this.impuestoAgregado("final")},prestamoHipotecario:function(t,e,i){var a=Number(t)/Number(e),o=a*Number(i)/100;return Number((a+o)/12).toFixed(2)},calculoHipo:function(){if(""==this.calculo.valor)toastr.error("No has agregado el valor","Smarmoddle",{timeOut:"3000"});else if(""==this.calculo.tiempo)toastr.error("No has agregado el tiempo","Smarmoddle",{timeOut:"3000"});else if(""==this.calculo.interes)toastr.error("Debe agregar el Interes","Smarmoddle",{timeOut:"3000"});else{var t=this.calculo.valor,e=this.calculo.tiempo,i=this.calculo.interes,a=this.prestamoHipotecario(t,e,i);this.calculo.total=a,this.calculo.valor="",this.calculo.tiempo="",this.calculo.interes=""}},prestamoQuirografario:function(t,e,i){var a=Number(t)/Number(e),o=a*Number(i)/100;return Number(a+o).toFixed(2)},calculoquiro:function(){if(""==this.calculo1.valor)toastr.error("No has agregado el valor","Smarmoddle",{timeOut:"3000"});else if(""==this.calculo1.mes)toastr.error("No has agregado el Mes","Smarmoddle",{timeOut:"3000"});else if(""==this.calculo1.interes)toastr.error("Debe agregar el Interes","Smarmoddle",{timeOut:"3000"});else{var t=this.calculo1.valor,e=this.calculo1.mes,i=this.calculo1.interes,a=this.prestamoQuirografario(t,e,i);this.calculo1.total=a,this.calculo1.valor="",this.calculo1.mes="",this.calculo1.interes=""}},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},formatoFecha:function(t){return null!==t?t.split("-").reverse().join("-"):void 0},abrirNomina:function(){this.update=!1,$("#modal_nomina").modal("show")},totales:function(){var t=this.t_nomina,e=0,i=0,a=0,o=0,s=0,r=0,n=0,c=0,d=0,l=0;t.forEach((function(t,i){var a=t.sueldo;null!=a&&""!==a&&(e+=Number(a))})),this.suma.s_sueldo=e.toFixed(2),t.forEach((function(t,e){var a=t.s_tiempo;null!=a&&""!==a&&(i+=Number(a))})),this.suma.s_sobretiempo=i.toFixed(2),t.forEach((function(t,e){var i=t.ingresos;null!=i&&""!==i&&(a+=Number(i))})),this.suma.s_tingreso=a.toFixed(2),t.forEach((function(t,e){var i=t.iees;null!=i&&""!==i&&(o+=Number(i))})),this.suma.s_iess=o.toFixed(2),t.forEach((function(t,e){var i=t.pres_iees;null!=i&&""!==i&&(s+=Number(i))})),this.suma.s_piess=s.toFixed(2),t.forEach((function(t,e){var i=t.pres_cia;null!=i&&""!==i&&(r+=Number(i))})),this.suma.s_pcias=r.toFixed(2),t.forEach((function(t,e){var i=t.anticipo;null!=i&&""!==i&&(n+=Number(i))})),this.suma.s_anticipo=n.toFixed(2),t.forEach((function(t,e){var i=t.imp_renta;null!=i&&""!==i&&(c+=Number(i))})),this.suma.s_impr=c.toFixed(2),t.forEach((function(t,e){var i=t.egresos;null!=i&&""!==i&&(d+=Number(i))})),this.suma.s_tegresos=d.toFixed(2),t.forEach((function(t,e){var i=t.neto_pagar;null!=i&&""!==i&&(l+=Number(i))})),this.suma.s_netopagar=l.toFixed(2)},agregarNomina:function(){if(""==this.nomina.nombre_e)toastr.error("El Nombre del Empleado es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""==this.nomina.cargo)toastr.error("El Cargo del Empleado es Obligatorio es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t={nombre_e:this.nomina.nombre_e,cargo:this.nomina.cargo,sueldo:this.nomina.sueldo,s_tiempo:this.nomina.s_tiempo,ingresos:this.nomina.ingresos,iees:this.nomina.iees,pres_iees:this.nomina.pres_iees,pres_cia:this.nomina.pres_cia,anticipo:this.nomina.anticipo,imp_renta:this.nomina.imp_renta,egresos:this.nomina.egresos,neto_pagar:this.nomina.neto_pagar};this.t_nomina.push(t),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.nomina.nombre_e="",this.nomina.cargo="",this.nomina.sueldo="",this.nomina.s_tiempo="",this.nomina.ingresos="",this.nomina.iees="",this.nomina.pres_iees="",this.nomina.pres_cia="",this.nomina.anticipo="",this.nomina.imp_renta="",this.nomina.egresos="",this.nomina.neto_pagar="",this.totales()}},editNomina:function(t){this.nomina.edit=!0,this.registro_id=t,this.nomina.nombre_e=this.t_nomina[t].nombre_e,this.nomina.cargo=this.t_nomina[t].cargo,this.nomina.sueldo=this.t_nomina[t].sueldo,this.nomina.s_tiempo=this.t_nomina[t].s_tiempo,this.nomina.ingresos=this.t_nomina[t].ingresos,this.nomina.iees=this.t_nomina[t].iees,this.nomina.pres_iees=this.t_nomina[t].pres_iees,this.nomina.pres_cia=this.t_nomina[t].pres_cia,this.nomina.anticipo=this.t_nomina[t].anticipo,this.nomina.imp_renta=this.t_nomina[t].imp_renta,this.nomina.egresos=this.t_nomina[t].egresos,this.nomina.neto_pagar=this.t_nomina[t].neto_pagar},editNominaFuera:function(t){this.nomina.edit=!0,this.registro_id=t,this.nomina.nombre_e=this.t_nomina[t].nombre_e,this.nomina.cargo=this.t_nomina[t].cargo,this.nomina.sueldo=this.t_nomina[t].sueldo,this.nomina.s_tiempo=this.t_nomina[t].s_tiempo,this.nomina.ingresos=this.t_nomina[t].ingresos,this.nomina.iees=this.t_nomina[t].iees,this.nomina.pres_iees=this.t_nomina[t].pres_iees,this.nomina.pres_cia=this.t_nomina[t].pres_cia,this.nomina.anticipo=this.t_nomina[t].anticipo,this.nomina.imp_renta=this.t_nomina[t].imp_renta,this.nomina.egresos=this.t_nomina[t].egresos,this.nomina.neto_pagar=this.t_nomina[t].neto_pagar,$("#modal_nomina").modal("show")},cancelarEditNomina:function(){this.nomina.nombre_e="",this.nomina.cargo="",this.nomina.sueldo="",this.nomina.s_tiempo="",this.nomina.ingresos="",this.nomina.iees="",this.nomina.pres_iees="",this.nomina.pres_cia="",this.nomina.anticipo="",this.nomina.imp_renta="",this.nomina.egresos="",this.nomina.neto_pagar="",this.nomina.edit=!1},actualizarNomina:function(){if(""==this.nomina.nombre_e)toastr.error("El Nombre del Empleado es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""==this.nomina.cargo)toastr.error("El Cargo del Empleado es Obligatorio es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.registro_id;this.t_nomina[t].nombre_e=this.nomina.nombre_e,this.t_nomina[t].cargo=this.nomina.cargo,this.t_nomina[t].sueldo=this.nomina.sueldo,this.t_nomina[t].s_tiempo=this.nomina.s_tiempo,this.t_nomina[t].ingresos=this.nomina.ingresos,this.t_nomina[t].iees=this.nomina.iees,this.t_nomina[t].pres_iees=this.nomina.pres_iees,this.t_nomina[t].pres_cia=this.nomina.pres_cia,this.t_nomina[t].anticipo=this.nomina.anticipo,this.t_nomina[t].imp_renta=this.nomina.imp_renta,this.t_nomina[t].egresos=this.nomina.egresos,this.t_nomina[t].neto_pagar=this.nomina.neto_pagar,this.cancelarEditNomina(),this.totales(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}},eliminarNomina:function(){var t=this.eliminar.index;this.t_nomina.splice(t,1),this.eliminar.index="",this.eliminar.nombre="",$("#eliminar_nomina").modal("hide")},deleteNomina:function(t){this.t_nomina.splice(t,1),this.Totales()},WarningEliminarNomina:function(t){var e=this;this.eliminar.index=t,this.eliminar.nombre=this.t_nomina[t].nombre_e,Swal.fire({title:"Seguro que deseas eliminar el Registro de  "+this.eliminar.nombre,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la Nomina "+e.eliminar.nombre,"success"),e.t_nomina.splice(t,1),e.totales())}))},guardarNomina:function(){if(0==this.nombre.length)toastr.error("Debe Registrar el Nombre del Comercial","Smarmoddle",{timeOut:"3000"});else if(0==this.fecha.length)toastr.error("Debe Ingresar la Fecha","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/nomina_empleado",{id:this.id_taller,nombre:this.nombre,fecha:this.fecha,t_nomina:this.t_nomina,s_sueldo:this.suma.s_sueldo,s_sobretiempo:this.suma.s_sobretiempo,s_tingreso:this.suma.s_tingreso,s_iess:this.suma.s_iess,s_piess:this.suma.s_piess,s_pcias:this.suma.s_pcias,s_anticipo:this.suma.s_anticipo,s_impr:this.suma.s_impr,s_tegresos:this.suma.s_tegresos,s_netopagar:this.suma.s_netopagar}).then((function(t){"guardado"==t.data.estado?(toastr.success("Nómina de Empleados creada correctamente","Smarmoddle",{timeOut:"3000"}),u.obtenerNomina()):"actualizado"==t.data.estado&&(toastr.warning("Nómina de Empleados actualizado","Smarmoddle",{timeOut:"3000"}),u.obtenerNomina())})).catch((function(t){}))}},obtenerNomina:function(){var t=this;axios.post("/sistema/admin/taller/nomina-obtener-empleado",{id:this.id_taller}).then((function(e){1==e.data.datos&&(toastr.info("Anexo Nómina de Empleado cargado correctamente","Smarmoddle",{timeOut:"3000"}),t.nombre=e.data.nombre,t.fecha=e.data.fecha,t.t_nomina=e.data.nomina,t.totales())})).catch((function(t){}))}}}),new Vue({el:"#provision_beneficio",data:{id_taller:taller,t_nomina:[],nombre:"",fecha:"",t_pro:[],pro:{edit:!1,nombre_em:"",dias:"",v_recibido:"",d_tercero:"",d_cuarto:"",vacaciones:"",f_reserva:""},eliminar:{index:"",nombre:""},suma:{s_valor:"",s_tercero:"",s_cuarto:"",s_vacaciones:"",s_res:""},update:!1,registro_id:""},mounted:function(){this.obtenerProvision(),this.obtenerNomina()},methods:{calculadora:function(){o.VueSweetAlert2("example-component",{title:"Called from basic js",noteProp:["Note number 1","Note number 2"]})},obtenerNomina:function(){var t=this;axios.post("/sistema/admin/taller/nomina-obtener-empleado",{id:t.id_taller}).then((function(e){1==e.data.datos&&(t.nombre=e.data.nombre,t.fecha=e.data.fecha,t.t_nomina=e.data.nomina)})).catch((function(t){}))},decimales:function(t){return null!==t&&""!==t&&0!==t?Number(t).toFixed(2):void 0},abrirProvision:function(){this.update=!1,$("#modal_provision").modal("show")},totales:function(){var t=this.t_pro,e=0,i=0,a=0,o=0,s=0;t.forEach((function(t,i){var a=t.v_recibido;null!=a&&""!==a&&(e+=Number(a))})),this.suma.s_valor=e.toFixed(2),t.forEach((function(t,e){var a=t.d_tercero;null!=a&&""!==a&&(i+=Number(a))})),this.suma.s_tercero=i.toFixed(2),t.forEach((function(t,e){var i=t.d_cuarto;null!=i&&""!==i&&(a+=Number(i))})),this.suma.s_cuarto=a.toFixed(2),t.forEach((function(t,e){var i=t.vacaciones;null!=i&&""!==i&&(o+=Number(i))})),this.suma.s_vacaciones=o.toFixed(2),t.forEach((function(t,e){var i=t.f_reserva;null!=i&&""!==i&&(s+=Number(i))})),this.suma.s_res=s.toFixed(2)},agregarProvision:function(){if(""==this.pro.nombre_em)toastr.error("El Nombre del Empleado es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""==this.pro.dias)toastr.error("Este campo es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""==this.pro.v_recibido)toastr.error("El Valor recibido es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t={nombre_em:this.pro.nombre_em,dias:this.pro.dias,v_recibido:this.pro.v_recibido,d_tercero:this.pro.d_tercero,d_cuarto:this.pro.d_cuarto,vacaciones:this.pro.vacaciones,f_reserva:this.pro.f_reserva};this.t_pro.push(t),toastr.success("Registro agregado correctamente","Smarmoddle",{timeOut:"3000"}),this.pro.nombre_em="",this.pro.dias="",this.pro.v_recibido="",this.pro.d_tercero="",this.pro.d_cuarto="",this.pro.vacaciones="",this.pro.f_reserva="",this.totales()}},editProvision:function(t){this.pro.edit=!0,this.registro_id=t,this.pro.nombre_em=this.t_pro[t].nombre_em,this.pro.dias=this.t_pro[t].dias,this.pro.v_recibido=this.t_pro[t].v_recibido,this.pro.d_tercero=this.t_pro[t].d_tercero,this.pro.d_cuarto=this.t_pro[t].d_cuarto,this.pro.vacaciones=this.t_pro[t].vacaciones,this.pro.f_reserva=this.t_pro[t].f_reserva},editProvisionFuera:function(t){this.pro.edit=!0,this.registro_id=t,this.pro.nombre_em=this.t_pro[t].nombre_em,this.pro.dias=this.t_pro[t].dias,this.pro.v_recibido=this.t_pro[t].v_recibido,this.pro.d_tercero=this.t_pro[t].d_tercero,this.pro.d_cuarto=this.t_pro[t].d_cuarto,this.pro.vacaciones=this.t_pro[t].vacaciones,this.pro.f_reserva=this.t_pro[t].f_reserva,$("#modal_provision").modal("show")},cancelarEditProvision:function(){this.pro.nombre_em="",this.pro.dias="",this.pro.v_recibido="",this.pro.d_tercero="",this.pro.d_cuarto="",this.pro.vacaciones="",this.pro.f_reserva="",this.pro.edit=!1},actualizarProvision:function(){if(""==this.pro.nombre_em)toastr.error("El Nombre del Empleado es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""==this.pro.dias)toastr.error("Este campo es obligatorio","Smarmoddle",{timeOut:"3000"});else if(""==this.pro.v_recibido)toastr.error("El Valor recibido es obligatorio","Smarmoddle",{timeOut:"3000"});else{var t=this.registro_id;this.t_pro[t].nombre_em=this.pro.nombre_em,this.t_pro[t].dias=this.pro.dias,this.t_pro[t].v_recibido=this.pro.v_recibido,this.t_pro[t].d_tercero=this.pro.d_tercero,this.t_pro[t].d_cuarto=this.pro.d_cuarto,this.t_pro[t].vacaciones=this.pro.vacaciones,this.t_pro[t].f_reserva=this.pro.f_reserva,this.cancelarEditProvision(),this.totales(),toastr.error("Registro actualizado correctamente","Smarmoddle",{timeOut:"3000"})}},eliminarProvision:function(){var t=this.eliminar.index;this.t_pro.splice(t,1),this.eliminar.index="",this.eliminar.nombre="",$("#eliminar_p").modal("hide")},deleteProvision:function(t){this.t_pro.splice(t,1),this.totales()},WarningEliminarProvision:function(t){var e=this;this.eliminar.index=t,this.eliminar.nombre=this.t_pro[t].nombre_em,Swal.fire({title:"Seguro que deseas eliminar el Registro de  "+this.eliminar.nombre,text:"Esta accion no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then((function(i){i.isConfirmed&&(Swal.fire("Eliminado!","El Registro de la Provision "+e.eliminar.nombre,"success"),e.t_pro.splice(t,1),e.totales())}))},guardarProvision:function(){if(0==this.t_pro.length)toastr.error("Debe haber al menos un  Registrado","Smarmoddle",{timeOut:"3000"});else{axios.post("/sistema/admin/taller/provision_social",{id:this.id_taller,s_valor:this.suma.s_valor,s_tercero:this.suma.s_tercero,s_cuarto:this.suma.s_cuarto,s_vacaciones:this.suma.s_vacaciones,s_res:this.suma.s_res,t_pro:this.t_pro}).then((function(t){"guardado"==t.data.estado?toastr.success("Provisión de Beneficio creada correctamente","Smarmoddle",{timeOut:"3000"}):"actualizado"==t.data.estado&&toastr.warning("Provisión de Beneficio actualizado correctamente","Smarmoddle",{timeOut:"3000"})})).catch((function(t){}))}},obtenerProvision:function(){var t=this;axios.post("/sistema/admin/taller/provision-obtener-beneficio",{id:this.id_taller}).then((function(e){1==e.data.datos&&(toastr.success("Anexo Provisión Beneficio Social cargado correctamente","Smarmoddle",{timeOut:"3000"}),t.t_pro=e.data.pro,t.totales())})).catch((function(t){}))}}}))}});
//# sourceMappingURL=tallercontabilidad.js.map